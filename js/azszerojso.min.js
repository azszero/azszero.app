function storageAvailable(n){try{var i=window[n],t="__storage_test__";return i.setItem(t,t),i.removeItem(t),!0}catch(r){return!1}}function changespancolor(n,t,i,r){return parseInt(n)<=0?($("."+t).prop("hidden",!0),$("."+t).css("background-color","#292e34"),$("."+t).css("color","#292e34"),0):t=="leftspanactionsFinished"?($("."+t).css("background-color","#"+i),$("."+t).css("color","#"+r),$("."+t).prop("textContent","✫"),$("."+t).prop("hidden",!1),1):($("."+t).css("background-color","#"+i),$("."+t).css("color","#"+r),$("."+t).prop("textContent",n),$("."+t).prop("hidden",!1),1)}function setColors(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et){var ot="ffffff",st="cc0000",ct="850000",lt="c54900",at="004AAA",ht="007119";dangeralerts=dangeralerts+changespancolor(t,"leftspanfeedback",st,ot);successalerts=successalerts+changespancolor(i,"leftspanactions",st,ot);infoalerts=infoalerts+changespancolor(r,"leftspanfbainbounds","1000ff",ot);dangeralerts=dangeralerts+changespancolor(u,"leftspanlateFbaShipments",st,ot);infoalerts=infoalerts+changespancolor(f,"leftspanfbaInboundsArrived",ht,ot);dangeralerts=dangeralerts+changespancolor(e,"leftspanfbaInboundsProblem",ct,ot);dangeralerts=dangeralerts+changespancolor(o,"criticalASINs",st,ot);warningalerts=warningalerts+changespancolor(s,"refundsUnackComments",lt,ot);changespancolor(h,"leftspansalesRankTrendingDN",lt,ot);changespancolor(c,"leftspansalesRankTrendingUP","009119",ot);warningalerts=warningalerts+changespancolor(l,"leftspanunderPerforming",st,ot);infoalerts=infoalerts+changespancolor(a,"leftspanoverPerforming",ht,ot);dangeralerts=dangeralerts+changespancolor(v,"leftspansalesRankProblem",ct,ot);dangeralerts=dangeralerts+changespancolor(y,"leftspanoutOfStock",ct,ot);dangeralerts=dangeralerts+changespancolor(p,"leftspanshipImmediatly",st,ot);dangeralerts=dangeralerts+changespancolor(w,"leftspanshipNow",lt,ot);warningalerts=warningalerts+changespancolor(b,"leftspanplanning",at,ot);dangeralerts=dangeralerts+changespancolor(k,"leftspanlateInbound",st,ot);dangeralerts=dangeralerts+changespancolor(d,"leftspanstuckInbound",st,ot);infoalerts=infoalerts+changespancolor(g,"leftspantodayItemsSold",ht,ot);warningalerts=warningalerts+changespancolor(nt,"leftspanyesterdayNoSales",st,ot);dangeralerts=dangeralerts+changespancolor(tt,"leftspandays3NoSales",st,ot);dangeralerts=dangeralerts+changespancolor(it,"leftspandays7NoSales",st,ot);dangeralerts=dangeralerts+changespancolor(rt,"leftspandays30NoSales",st,ot);infoalerts=infoalerts+changespancolor(ut,"leftspanactionsPending",ht,ot);warningalerts=warningalerts+changespancolor(ft,"leftspanactionsWorkingEvaluating",at,ot);dangeralerts=dangeralerts+changespancolor(et,"leftspanactionsFinished",st,ot)}function icontranslate(n){return n=="0"?"trending-up":n=="1"?"arrows":n=="2"?"trending-down":n=="3"?"truck":n=="4"?"flight-land":n=="5"?"flash-auto":n=="6"?"star-half":n=="7"?"star":void 0}function setNotifColors(n){n<=0?($(".notifcounter").prop("hidden",!0),$(".notifcounter").css("background-color","#292e34"),$(".notifcounter").css("color","#292e34")):($(".notifcounter").css("background-color","#cc0000"),$(".notifcounter").css("color","#ffffff"),$(".notifcounter").prop("textContent",n),$(".notifcounter").prop("hidden",!1))}function setfbColors(n){n<=0?($(".leftspanfeedback").prop("hidden",!0),$(".leftspanfeedback").css("background-color","#292e34"),$(".leftspanfeedback").css("color","#292e34")):($(".leftspanfeedback").css("background-color","#cc0000"),$(".leftspanfeedback").css("color","#ffffff"),$(".leftspanfeedback").prop("textContent",n),$(".leftspanfeedback").prop("hidden",!1))}function setrfndColors(n){n<=0?($(".refundsUnackComments").prop("hidden",!0),$(".refundsUnackComments").css("background-color","#292e34"),$(".refundsUnackComments").css("color","#292e34")):($(".refundsUnackComments").css("background-color","#cc0000"),$(".refundsUnackComments").css("color","#ffffff"),$(".refundsUnackComments").prop("textContent",n),$(".refundsUnackComments").prop("hidden",!1))}function setActionsColor(n,t,i){var r="#ffffff";n<=0?($(".leftspanactionsPending").prop("hidden",!0),$(".leftspanactionsPending").css("background-color","#292e34"),$(".leftspanactionsPending").css("color","#292e34")):($(".leftspanactionsPending").css("background-color","#007119"),$(".leftspanactionsPending").css("color",r),$(".leftspanactionsPending").prop("textContent",n),$(".leftspanactionsPending").prop("hidden",!1));t<=0?($(".leftspanactionsWorkingEvaluating").prop("hidden",!0),$(".leftspanactionsWorkingEvaluating").css("background-color","#292e34"),$(".leftspanactionsWorkingEvaluating").css("color","#292e34")):($(".leftspanactionsWorkingEvaluating").css("background-color","#004AAA"),$(".leftspanactionsWorkingEvaluating").css("color",r),$(".leftspanactionsWorkingEvaluating").prop("textContent",t),$(".leftspanactionsWorkingEvaluating").prop("hidden",!1));i<=0?($(".leftspanactionsFinished").prop("hidden",!0),$(".leftspanactionsFinished").css("background-color","#292e34"),$(".leftspanactionsFinished").css("color","#292e34")):($(".leftspanactionsFinished").css("background-color","#cc0000"),$(".leftspanactionsFinished").css("color",r),$(".leftspanactionsFinished").prop("textContent","✫"),$(".leftspanactionsFinished").prop("hidden",!1))}function createAlert(n,t,i){var o=!0,s="danger",u=!1,e=["alert","animated","flipInX"],f,r,h,c,l,a;e.push("alert-"+s.toLowerCase());o&&e.push("alert-dismissible");f=$("<i />",{"class":{info:"zmdi zmdi-badge-check",success:"zmdi zmdi-badge-check",warning:"zmdi zmdi-alert-triangle",danger:"zmdi zmdi-alert-circle"}[s]});r=$("<div />",{"class":e.join(" ")});n&&(h=$("<h4 />",{html:n}).appendTo(r),u||(h.prepend(f),u=!0));t&&(c=$("<strong />",{html:t}).appendTo(r),u||(c.prepend(f),u=!0));i&&(l=$("<p />",{html:i}).appendTo(r),u||(l.prepend(f),u=!0));o&&(a=$("<button />",{"class":"btn-close",type:"button","data-bs-dismiss":"alert","aria-label":"Close",html:""}).appendTo(r));$("#pageMessages").prepend(r);!0&&setTimeout(function(){r.addClass("flipOutX");setTimeout(function(){r.remove()},1e3)},1e4)}function createMiniAlert(n,t,i,r){var s=!0,e=!0,o,u,l,a,v,y;r=="info"?(s=!1,e=!1):r=="success"&&(s=!0,e=!0);var c="pageMessages",f=!1,h=["alert"];h.push("alert-"+r.toLowerCase());e&&h.push("alert-dismissible");o=$("<i />",{"class":{info:"zmdi zmdi-replay zmdi-hc-spin-reverse",success:"zmdi zmdi-badge-check",warning:"zmdi zmdi-alert-triangle",danger:"zmdi zmdi-alert-circle"}[r]});u=$("<div />",{"class":h.join(" ")});n&&(l=$("<h6 />",{html:n}).appendTo(u),f||(l.prepend(o),f=!0));t&&(a=$("<strong />",{html:t}).appendTo(u),f||(a.prepend(o),f=!0));i&&(v=$("<p />",{html:i}).appendTo(u),f||(v.prepend(o),f=!0));e&&(y=$("<button />",{"class":"btn-close",type:"button","data-bs-dismiss":"alert","aria-label":"Close",html:""}).appendTo(u));$("#"+c).html("");$("#"+c).append(u);s&&setTimeout(function(){setTimeout(function(){u.remove()},1500)},1500)}function showOpacity(n,t){$.when($("#"+t).addClass("fade")).then($.when($("#"+t).remove()).then($("#"+n).addClass("show active")));$("#"+n).removeClass("d-none")}function tableInitComplete(n,t,i){if(!isEmpty(i))i.on("draw",function(){showOpacity(n,t,i)});setTimeout(function(){showOpacity(n,t,i)},2e3)}function isEmpty(n){return Object.keys(n).length===0}function addWaitingDotsToButton(n,t){$("#"+n).prop("disabled",!0);$("#"+n).addClass("invisible");$("#"+t).append('<div class="dot-pulse"><\/div>')}function removeWaitingDotsToButton(n,t){$("#"+n).prop("disabled",!1);$("#"+n).removeClass("invisible");$("#"+t+" div").remove()}var documentReady,AddAction,$urloptions,$realId,DeleteAction,EditAction,pending_fbainbounds,closing_fbainbounds,problem_fbainbounds,working_fbainbounds,tracking,closeFBA,itemasin,todayTopAsinSaleschart,dailychart,hourglass,loaded,selectedShippingBox,mainAutoconfig,shippingId,newMarketPerformance,currentMarket,salesmarkets,productstable,productstableData,tableRowIndex,productId,itemCostVal,itemsInOneBox,fulfillmentDays,defaultShippingMethod,minOrderQty,tblinfo,newMarketProducts,componentstable,addpSelect,addvSelect,newMarket,selectasinssales,selectMainDataset,switchMarket,selectMarketsDataset,noSalesTableInitialized,selectnosalestable,translateCustomerComments,ackToggle,selectDataset,vendorstable,nvIndex,ppbtable,editdeleteclicked,columnDefs,Deleteppb,Editppb,asincomponentstable,asincomponentstableinit,asinaddpSelect,asinaddvSelect,asinsku,AddComponent,DeleteComponent,EditComponent;(function(n){"use strict";var t=function(t){var c=document.querySelector(".wui-side-menu")!==null;if(c){var i=t,r={},f={},e={},l=function(){r=t.querySelector(".wui-side-menu-pin-trigger");f=r.querySelector("i.zmdi");e=document.querySelector(".wui-overlay");Array.prototype.forEach.call(document.querySelectorAll(".wui-side-menu-trigger"),function(n){n.addEventListener("click",function(n){n.preventDefault();o()},!1)});r.addEventListener("click",function(n){n.preventDefault();s()},!1);e.addEventListener("click",function(){i.classList.remove("open")},!1);n.addEventListener("resize",h,!1);h()},o=function(){i.classList.toggle("open");u(i,i.classList.contains("open"))},s=function(){i.classList.toggle("pinned");f.classList.toggle("zmdi-hc-rotate-90");i.classList.contains("pinned")!==!0&&i.classList.remove("open");a(i,i.classList.contains("pinned"))},h=function(){var t=n.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;t<=767&&i.classList.contains("open")===!0&&(i.classList.remove("open"),u(i,i.classList.contains("open")));t>767&&i.classList.contains("pinned")===!1&&(i.classList.remove("open"),u(i,i.classList.contains("open")))},u=function(n,t){var i=new CustomEvent("menuStateChanged",{detail:{open:t}});n.dispatchEvent(i)},a=function(n,t){var i=new CustomEvent("menuPinStateChanged",{detail:{pinned:t}});n.dispatchEvent(i)};return l(),{htmlElement:i,toggleMenuState:o,toggleMenuPinState:s}}};n.SideMenu=t})(window);documentReady=function(n){document.readyState!="loading"?n():document.addEventListener("DOMContentLoaded",n)};$(document).ready(function(){function n(){var n=window.location.hash,i,t,r;n&&(i=n.replace(/[^#]/g,"").length,i>1?(t=n.substr(n.lastIndexOf("#")),r=n.replace(t,""),$('.nav-tabs a[href="'+r+'"]').tab("show"),$('.nav-tabs a[href="'+t+'"]').tab("show")):$('.nav-tabs a[href="'+n+'"]').tab("show"))}window.addEventListener("hashchange",n,!1);n()});var Homepage="Home",Marketplacespage="Marketplaces",Actionspage="Actions",Businesspage="Business",Contactspage="Contacts",Dashboardpage="Dashboard",FBAInboundShipmentspage="FBAInboundShipments",InventoryManagementspage="InventoryManagements",PageBuilderspage="PageBuilders",Performancepage="Performance",Productpage="Product",ProductComponentspage="ProductComponents",asinProductComponentspage="asinProductComponents",ProductSalespage="ProductSales",ReportsFeedbackspage="ReportsFeedbacks",ReportsRefundspage="ReportsRefunds",SellersProductSalespage="SellersProductSales",Vendorspage="Vendors",AppSettingspage="AppSettings",BillingSettingspage="BillingSettings",UpdatePayment="UpdatePayment",Authenticatepage="Authenticate",pagevar="page",sidevar="Side",activeclass="active",urlPara="?",lang=localStorage.getItem("Language");lang&&(urlPara="lang="+lang);documentReady(function(){var n=document.getElementById("feedbackbug");n.onclick=function(){var n,t,i;window.ybug_settings={id:"0xhywpxnbaghbfhrkms9"};n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://widget.ybug.io/button/"+window.ybug_settings.id+".js";t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t);i=function(){function t(n){return new Promise(t=>setTimeout(t,n))}async function i(){while(n.contents().find("button").length==0)await t(100);let i=n.contents().find("button");i.trigger("click")}let n=$("#__ybug-launcher");i()};n.onload=i}});documentReady(function(){function at(){var i=new Date,n=i.getTime(),t;localStorage.getItem("countsdatetime")!=null?(t=parseInt(localStorage.getItem("countsdatetime",n)),n>t+3e5&&(localStorage.setItem("countsdatetime",n),document.hidden||vt())):localStorage.setItem("countsdatetime",n)}function pt(){document.addEventListener("visibilitychange",function(){document.hidden||vt()})}function vt(){$.ajax({url:"/Notifications/CheckForNewNotifications/",type:"GET","async":!0,success:function(t){t.success?t.notifications?(n=t.notificationsCount,setNotifColors(n),localStorage.setItem("azs0notificationsCount",n)):n=0:n=0}});$.ajax({url:"/Counters/GetCounters/",type:"GET","async":!0,cache:!0,success:function(n){n.success&&(t=n.data.reviews,i=n.data.feedback,r=n.data.actions,u=n.data.fbaInbounds,f=n.data.fbaInboundsArrived,e=n.data.lateFbaShipments,o=n.data.fbaInboundsProblem,s=n.data.refundsUnackComments,h=n.data.criticalASINs,c=n.data.salesRankTrendingUP,l=n.data.salesRankTrendingDN,a=n.data.underPerforming,v=n.data.overPerforming,y=n.data.salesRankProblem,p=n.data.outOfStock,w=n.data.shipImmediatly,b=n.data.shipNow,k=n.data.planning,d=n.data.lateInbound,g=n.data.stuckInbound,nt=n.data.todayItemsSold,tt=n.data.yesterdayNoSales,it=n.data.noSales3days,rt=n.data.noSales7days,ut=n.data.noSales30days,ft=n.data.actionsPending,et=n.data.actionsEvaluating+n.data.actionsWorking,ot=n.data.actionsFinished,localStorage.setItem("reviewCount",t),localStorage.setItem("feedbackCount",i),localStorage.setItem("actionsCount",r),localStorage.setItem("fbainboundsCount",u),localStorage.setItem("fbaInboundsArrivedCount",f),localStorage.setItem("lateFbaShipmentsCount",e),localStorage.setItem("fbaInboundsProblemCount",o),localStorage.setItem("refundsUnackCommentsCount",s),localStorage.setItem("criticalASINsCount",h),localStorage.setItem("salesRankTrendingUP",c),localStorage.setItem("salesRankTrendingDN",l),localStorage.setItem("underPerforming",a),localStorage.setItem("overPerforming",v),localStorage.setItem("salesRankProblem",y),localStorage.setItem("outOfStockCount",p),localStorage.setItem("shipImmediatlyCount",w),localStorage.setItem("shipNowCount",b),localStorage.setItem("planningCount",k),localStorage.setItem("lateInboundCount",d),localStorage.setItem("stuckInboundCount",g),localStorage.setItem("todayItemsSoldCount",nt),localStorage.setItem("yesterdayNoSalesCount",tt),localStorage.setItem("days3NoSalesCount",it),localStorage.setItem("days7NoSalesCount",rt),localStorage.setItem("days30NoSalesCount",ut),localStorage.setItem("actionsPending",ft),localStorage.setItem("actionsWorkingEvaluating",et),localStorage.setItem("actionsFinished",ot),setColors(t,i,r,u,e,f,o,h,s,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot))}})}function wt(){t=localStorage.getItem("reviewCount");i=localStorage.getItem("feedbackCount");r=localStorage.getItem("actionsCount");u=localStorage.getItem("fbainboundsCount");f=localStorage.getItem("fbaInboundsArrivedCount");e=localStorage.getItem("lateFbaShipmentsCount");o=localStorage.getItem("fbaInboundsProblemCount");s=localStorage.getItem("refundsUnackCommentsCount");h=localStorage.getItem("criticalASINsCount");c=localStorage.getItem("salesRankTrendingUP");l=localStorage.getItem("salesRankTrendingDN");a=localStorage.getItem("underPerforming");v=localStorage.getItem("overPerforming");y=localStorage.getItem("salesRankProblem");p=localStorage.getItem("outOfStockCount");w=localStorage.getItem("shipImmediatlyCount");b=localStorage.getItem("shipNowCount");k=localStorage.getItem("planningCount");d=localStorage.getItem("lateInboundCount");g=localStorage.getItem("stuckInboundCount");nt=localStorage.getItem("todayItemsSoldCount");tt=localStorage.getItem("yesterdayNoSalesCount");it=localStorage.getItem("days3NoSalesCount");rt=localStorage.getItem("days7NoSalesCount");ut=localStorage.getItem("days30NoSalesCount");ft=localStorage.getItem("actionsPending");et=localStorage.getItem("actionsWorkingEvaluating");ot=localStorage.getItem("actionsFinished");n=localStorage.getItem("azs0notificationsCount");setNotifColors(n);setColors(t,i,r,u,e,f,o,h,s,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot)}function yt(){var n=$(window).width(),t;n<500?(t=n-50,$("#notificationdropdown").css("min-width",t)):$("#notificationdropdown").css("min-width","480px")}var st,ct,ht,lt;$.ajaxSetup({beforeSend:function(){NProgress.start()},complete:function(){NProgress.done()},error:function(n,t,i){createAlert("Disconnected "+t,"You were disconnected poor connection.",i)}});st=navigator.language||navigator.userLanguage;st=st.split("-")[0];$(function(){$('[data-toggle="tooltip"]').tooltip()});ct=document.querySelector(".wui-side-menu")!==null;ct&&(ht=new SideMenu(document.querySelector(".wui-side-menu")),ht.htmlElement.addEventListener("menuPinStateChanged",function(){},!1),ht.htmlElement.addEventListener("menuStateChanged",function(){},!1));lt=!!window.localStorage&&$.isFunction(localStorage.getItem)&&$.isFunction(localStorage.setItem)&&$.isFunction(localStorage.removeItem);lt;var t=$(".leftspanreview").text(),i=$(".leftspanfeedback").text(),r=$(".leftspanactions").text(),u=$(".leftspanfbainbounds").text(),f=$(".leftspanfbaInboundsArrived").text(),e=$(".leftspanlateFbaShipments").text(),o=$(".leftspanfbaInboundsProblem").text(),bt=$(".leftspanRefunds").text(),s=$(".refundsUnackComments").text(),h=$(".criticalASINs").text(),c=$(".leftspansalesRankTrendingUP").text(),l=$(".leftspansalesRankTrendingDN").text(),a=$(".leftspanunderPerforming").text(),v=$(".leftspanoverPerforming").text(),y=$(".leftspansalesRankProblem").text(),n=$(".notificationsCount").text(),p=$(".leftspanoutOfStock").text(),w=$(".leftspanshipImmediatly").text(),b=$(".leftspanshipNow").text(),k=$(".leftspanplanning").text(),d=$(".leftspanplanning").text(),g=$(".leftspanplanning").text(),nt=$(".leftspantodayItemsSold").text(),tt=$(".leftspanyesterdayNoSales").text(),it=$(".leftspandays3NoSales").text(),rt=$(".leftspandays7NoSales").text(),ut=$(".leftspandays30NoSales").text(),ft=$(".leftspanactionsPending").text(),et=$(".leftspanactionsWorkingEvaluating").text(),ot=$(".leftspanactionsFinished").text();setNotifColors(0);setColors(t,i,r,u,e,f,o,h,s,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot);pt();wt();at();setInterval(at,3e4);$("#notifdropdown").click(function(){var n=$("#notification").attr("aria-expanded");$("#notification").hasClass("show")&&$.ajax({url:"/Notifications/GetNotifications/",type:"GET","async":!0,success:function(n){var i,r,t;if(n.success)if(n.notifications){for($("#notifbody").fadeOut(100).html(""),t=0;t<n.notif.length;t++)r=n.notif[t].read?"":"",i='<li class="menulineseperator"><a href="'+n.notif[t].link+'" class="wui-side-menu-item icons-dropdown"><div style="display:flex;"><div class="notificationsline"><\/div><div class="" style="display:flex;line-height:2;"><div style="padding-top: 10px;padding-right: 20px;"><i class="zmdi zmdi-'+icontranslate(n.notif[t].title)+" zmdi-hc-2x mdc-text-"+n.notif[t].importance+'"><\/i><\/div><div'+r+'><div><span class="box-title">'+n.notif[t].body+'<\/span><\/div><div style="color: #aaaa;font-size: smaller;"> <span class="">'+n.notif[t].date+"<\/span><\/div><\/div><\/div><\/div><\/a><\/li>",$("#notifbody").append(i).fadeIn(100);$.ajax({url:"/Notifications/SetNotificationsToRead/",type:"POST","async":!0,success:function(){setNotifColors(0);localStorage.setItem("azs0notificationsCount",0)}})}else setNotifColors(0),localStorage.setItem("azs0notificationsCount",0)}})});yt();window.onresize=function(){yt()};storageAvailable("localStorage")||$.ajax({url:"/GetAppSettings/AppSettingsNA/",type:"GET",success:function(n){n.success}})});var infoalerts=0,successalerts=0,warningalerts=0,dangeralerts=0;if($(function(){var r=$(".table-skeleton"),u=r.find("thead"),f=r.find("tbody"),n,t,i;for(u.append("<tr><\/tr>"),n=0;n<5;n++)u.find("tr").append("<th><\/th>");for(t=0;t<10;t++)f.append("<tr><\/tr>");for(i=0;i<5;i++)f.find("tr").append("<td><div><\/div><\/td>")}),$("#"+Actionspage+pagevar).length>0){$("#"+Actionspage+sidevar).addClass(activeclass);var workingActionsTable,pendingActionsTable,finishedActionsTable,pendingActionsTableData,workingActionsTableData,finishedActionsTableData,pendingActionsTab=!1,finishedActionsTab=!1,$select1=$("#aAddPlatformType"),$select2=$("#aAddPlatformName"),$options=$select2.find("option"),s2options=$options.clone(!0),es2options=$options.clone(!0),$editselect1=$("#EditModal #aEditPlatformType"),$editselect2=$("#EditModal #aEditPlatformName"),$editoptions=$editselect2.find("option"),edits2options=$editoptions.clone(!0),$eselect1,$eselect2,$eoptions,currentTable=0,pendingActionsTablecolumnDefs=[{data:"marketplaceId",title:"Market",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"actionName",title:"Action Name"},{data:"actionPlatformName",title:"Platform",render:function(n){return $("#selectids").find("option:contains("+n+")").val()}},{data:"startDate",title:"Date",render:function(n){return n.split("T")[0]}},{data:"runDays",title:"Run Days"},{data:"discountTire",title:"Discount",render:function(n){return $("#aAddDiscountTire option[value="+n+"]").text()}},{data:"adTotalBudget",title:"Ad Budget",render:function(n){return"$"+n}},{data:"avgSalesBefore",title:"Sales Before"},{data:"id",title:"Edit/Delete",orderable:!1,render:function(n,t,i){return currentTable==0?'<a href="#" onclick="EditAction(\''+n+"','"+i.actionPlatformName+'\')"><div style="display:flex "><i class="zmdi zmdi-edit mdc-text-light-blue  zmdi-hc-2x"><\/i><\/a><a href="#" onclick="DeleteAction(\''+n+'\')"><i class="zmdi zmdi-delete mdc-text-light-red  zmdi-hc-2x" style="padding-left: 20px;"><\/i><\/a><\/div>':currentTable==1?'<a href="#" onclick="DeleteAction(\''+n+'\')"><i class="zmdi zmdi-delete mdc-text-light-red  zmdi-hc-2x" style="padding-left: 20px;"><\/i><\/a>':currentTable==2?"":void 0}}],workingActionsTablecolumnDefs=[{data:"marketplaceId",title:"Market",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"actionName",title:"Action Name"},{data:"actionPlatformName",title:"Platform",render:function(n){return $("#selectids").find("option:contains("+n+")").val()}},{data:"startDate",title:"Date",render:function(n){return n.split("T")[0]}},{data:"runDays",title:"Run Days"},{data:"discountTire",title:"Discount",render:function(n){return $("#aAddDiscountTire option[value="+n+"]").text()}},{data:"adTotalBudget",title:"Ad Budget",render:function(n){return"$"+n}},{data:"avgSalesBefore",title:"Sales Before"},{data:"avgSalesDuring",title:"Sales During",type:"natural-nohtml",render:function(n,t,i){return i.avgSalesBefore!=0?n>=i.avgSalesBefore?n>=i.avgSalesBefore*2?n+'&nbsp;<i class="zmdi zmdi-trending-up mdc-text-green"><\/i>&nbsp;<i class="zmdi zmdi-thumb-up mdc-text-green"><\/i>':n>=i.avgSalesBefore*1.5?n+'&nbsp;<i class="zmdi zmdi-trending-up mdc-text-green"><\/i>':n:n<=i.avgSalesBefore*.5?n+'&nbsp;<i class="zmdi zmdi-trending-down mdc-text-red"><\/i>&nbsp;<i class="zmdi zmdi-thumb-down mdc-text-red"><\/i>':n<=i.avgSalesBefore*.75?n+'&nbsp;<i class="zmdi zmdi-trending-down mdc-text-red"><\/i>':n:n==i.avgSalesBefore?n:n>i.avgSalesBefore?n+'&nbsp;<i class="zmdi zmdi-trending-up mdc-text-green"><\/i>&nbsp;<i class="zmdi zmdi-thumb-up mdc-text-green"><\/i>':void 0}},{data:"id",title:"Edit/Delete",orderable:!1,render:function(n,t,i){return currentTable==0?'<a href="#" onclick="EditAction(\''+n+"','"+i.actionPlatformName+'\')"><div style="display:flex "><i class="zmdi zmdi-edit mdc-text-light-blue  zmdi-hc-2x"><\/i><\/a><a href="#" onclick="DeleteAction(\''+n+'\')"><i class="zmdi zmdi-delete mdc-text-light-red  zmdi-hc-2x" style="padding-left: 20px;"><\/i><\/a><\/div>':currentTable==1?'<a href="#" onclick="DeleteAction(\''+n+'\')"><i class="zmdi zmdi-delete mdc-text-light-red  zmdi-hc-2x" style="padding-left: 20px;"><\/i><\/a>':currentTable==2?"":void 0}}],finishedActionsTablecolumnDefs=[{data:"marketplaceId",title:"Market",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"actionName",title:"Action Name"},{data:"actionPlatformName",title:"Platform",render:function(n){return $("#selectids").find("option:contains("+n+")").val()}},{data:"startDate",title:"Date",render:function(n){return n.split("T")[0]}},{data:"runDays",title:"Run Days"},{data:"discountTire",title:"Discount",render:function(n){return $("#aAddDiscountTire option[value="+n+"]").text()}},{data:"adTotalBudget",title:"Ad Budget",render:function(n){return"$"+n}},{data:"avgSalesBefore",title:"Sales Before"},{data:"avgSalesDuring",title:"Sales During",type:"natural-nohtml",render:function(n,t,i){return i.avgSalesBefore!=0?n>=i.avgSalesBefore?n>=i.avgSalesBefore*2?n+'&nbsp;<i class="zmdi zmdi-trending-up mdc-text-green"><\/i>&nbsp;<i class="zmdi zmdi-thumb-up mdc-text-green"><\/i>':n>=i.avgSalesBefore*1.5?n+'&nbsp;<i class="zmdi zmdi-trending-up mdc-text-green"><\/i>':n:n<=i.avgSalesBefore*.5?n+'&nbsp;<i class="zmdi zmdi-trending-down mdc-text-red"><\/i>&nbsp;<i class="zmdi zmdi-thumb-down mdc-text-red"><\/i>':n<=i.avgSalesBefore*.75?n+'&nbsp;<i class="zmdi zmdi-trending-down mdc-text-red"><\/i>':n:n==i.avgSalesBefore?n:n>i.avgSalesBefore?n+'&nbsp;<i class="zmdi zmdi-trending-up mdc-text-green"><\/i>&nbsp;<i class="zmdi zmdi-thumb-up mdc-text-green"><\/i>':void 0}},{data:"avgSalesAfter",title:"Sales After",type:"natural",render:function(n,t,i){if(i.avgSalesBefore!=0){var r=Math.round((n-i.avgSalesBefore)/i.avgSalesBefore*100);return n>=i.avgSalesBefore?r>49?r+'%&nbsp;<i class="zmdi zmdi-trending-up mdc-text-green"><\/i>&nbsp;<i class="zmdi zmdi-thumb-up mdc-text-green"><\/i><\/i>&nbsp;<i class="zmdi zmdi-fire mdc-text-green"><\/i>':r>24?r+'%&nbsp;<i class="zmdi zmdi-trending-up mdc-text-green"><\/i>&nbsp;<i class="zmdi zmdi-thumb-up mdc-text-green"><\/i>':r>9?r+'%&nbsp;<i class="zmdi zmdi-trending-up mdc-text-green"><\/i>':r+"%&nbsp":r<-25?r+'%&nbsp;<i class="zmdi zmdi-trending-down mdc-text-red"><\/i>&nbsp;<i class="zmdi zmdi-thumb-down mdc-text-red"><\/i>&nbsp;<i class="zmdi zmdi-mood-bad mdc-text-red"><\/i>':r<-12?r+'%&nbsp;<i class="zmdi zmdi-trending-down mdc-text-red"><\/i>&nbsp;<i class="zmdi zmdi-thumb-down mdc-text-red"><\/i>':r<-5?r+'%&nbsp;<i class="zmdi zmdi-trending-down mdc-text-red"><\/i>':r+"%&nbsp"}return"N/A"}},];$(document).ready(function(){function i(n,t,i,r){$.ajax({url:"/Actions/GetImageLink/"+n,"async":!0,type:"GET",data:n,success:function(n){var e;if(n.success){var u=n.data.imageLink,o=n.data.asin,s=n.data.market,f=s.toLowerCase()+"flag";u!=""&&u!=null?($(t).fadeOut(),$(t).attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==").fadeIn().fadeOut(),$(t).attr("src",u).fadeIn()):$(t).attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==");$(i).val(o+"-");e=getComputedStyle(document.querySelector("."+f)).backgroundImage.substring(5).substring(0,getComputedStyle(document.querySelector("."+f)).backgroundImage.length-7);$(r+"1").attr("src",e)}else createAlert(n.responseTitle,n.responseSummary,n.responseText)}})}$(".modal #ProductAddSelect").select2({dropdownParent:$("#AddModal"),width:"100%"});$("#AddBtn").on("click",function(){if($("#formCreate").validate(),$("#formCreate").valid()){var n=$("#formCreate").serialize();addWaitingDotsToButton("AddBtn","AddModalFooter");setTimeout(function(){$("#AddModal").modal("hide")},2e3);$.ajax({url:"/Actions/Create/",type:"POST",data:n,success:function(n){n.success?(createMiniAlert("Ok","","","success"),pendingActionsTab&&t(!1),$("#AddModal").modal("hide"),e("formCreate"),actionsPending=localStorage.getItem("actionsPending"),actionsWorkingEvaluating=localStorage.getItem("actionsWorkingEvaluating"),actionsFinished=localStorage.getItem("actionsFinished"),actionsPending++,actionsPending>0&&$("#pending-actions-href").text("Pending ("+actionsPending+")"),localStorage.setItem("actionsPending",actionsPending),setActionsColor(actionsPending,actionsWorkingEvaluating,actionsFinished)):(createAlert(n.responseTitle,n.responseSummary,n.responseText),$("#AddModal").modal("hide"));removeWaitingDotsToButton("AddBtn","AddModalFooter");$options=s2options.clone(!0);$select2.html($options.filter('[value="0"]'));$select2.val($("#aAddPlatformName option:first").val());$select2.trigger("change")}})}$("#aAddPlatformName").prop("selectedIndex",0)});var n,u=$("#ProductAddSelect"),o=$("#EditModal #ProductEditSelect");u.on("change",function(t){var r=t.currentTarget.value;i(r,"#pAddImg","#pAddsku","#pAddmarketflag");n=$("#ProductAddSelect").val()});$(document).on("show.bs.modal","#AddModal",function(){n!=null?($("#ProductAddSelect").val(n).change(),i(n,"#pAddImg","#pAddsku","#pAddmarketflag")):i($('#ProductAddSelect option[value!=""]').first().val(),"#pAddImg","#pAddsku","#pAddmarketflag")});$("#EditModal").on("change","#ProductEditSelect",function(n){var t=n.currentTarget.value;i(t,"#pEditImg","#pEditsku","#pEditmarketflag")});$.ajax({url:"/Actions/GetWorkingActions/",type:"GET",success:function(n){n.success?(workingActionsTableData=n.data,r(workingActionsTableData),actionsPending=localStorage.getItem("actionsPending"),actionsWorkingEvaluating=workingActionsTableData.length,actionsFinished=localStorage.getItem("actionsFinished"),actionsWorkingEvaluating>0&&$("#running-actions-href").text("Running ("+actionsWorkingEvaluating+")"),actionsPending>0&&$("#pending-actions-href").text("Pending ("+actionsPending+")"),actionsFinished>0&&$("#finished-actions-href").text("Finished ("+actionsFinished+")")):createAlert(n.responseTitle,n.responseSummary,n.responseText)}});$('a[data-bs-toggle="tab"]').on("shown.bs.tab",function(n){var i=$(n.target).attr("href");i=="#pending-actions-tab"?pendingActionsTab||t(!0):i=="#finished-actions-tab"&&(finishedActionsTab||$.ajax({url:"/Actions/GetFinishedActions/",type:"GET",success:function(n){n.success?(finishedActionsTableData=n.data,f(finishedActionsTableData),finishedActionsTab=!0):createAlert(n.responseTitle,n.responseSummary,n.responseText)}}))})});function t(n){$.ajax({url:"/Actions/GetPendingActions/",type:"GET",success:function(t){t.success?(pendingActionsTableData=t.data,n?(u(pendingActionsTableData),pendingActionsTab=!0):pendingActionsTable.clear().rows.add(pendingActionsTableData).draw()):createAlert(t.responseTitle,t.responseSummary,t.responseText)}})}function r(n){workingActionsTable=$("#workingActionsTable").DataTable({columns:workingActionsTablecolumnDefs,data:n,responsive:!0,initComplete:function(){showOpacity("workingActionsTable","workingtableskeleton",workingActionsTable)}})}function u(n){pendingActionsTable=$("#pendingActionsTable").DataTable({columns:pendingActionsTablecolumnDefs,data:n,responsive:!0,initComplete:function(){showOpacity("pendingActionsTable","pendingtableskeleton",pendingActionsTable)}})}function f(n){finishedActionsTable=$("#finishedActionsTable").DataTable({columns:finishedActionsTablecolumnDefs,data:n,responsive:!0,initComplete:function(){showOpacity("finishedActionsTable","finishedtableskeleton",finishedActionsTable)}})}AddAction=function(){$("#AddModal").modal("show")};function e(n){document.getElementById(n).reset()}$urloptions=$("#selecturl").find("option");$realId=$("#selectids").find("option");$select1.on("change",function(){$options=s2options.clone(!0);$select2.html($options.filter('[value="'+this.value+'"]'));$select2.val($("#aAddPlatformName option:first").val());$select2.trigger("change")}).trigger("change");$("#aAddPlatformName").change(function(){var t=$urloptions,i=$realId,r=$(this).val(),n=$("#aAddPlatformName option:selected").text(),u=i.filter('[value="'+n+'"]'),f=$(u).text();$("#selecturl").html(t.filter('[value="'+n+'"]'));$("option[value="+r+"]",this).val(f);$("a#changeme").attr("href","https://"+$("#selecturl option:selected").text())});DeleteAction=function(n){var t="/Actions/Delete/"+n;$("#DeleteModalBodyDiv").load(t,function(){$("#DeleteModal").modal("show")})};$("#DeleteModal").on("click","#DeleteBtn",function(){var n=$("#formDelete input#Id").val(),t=$("#DeleteModal #formDelete").serialize();addWaitingDotsToButton("DeleteBtn","DeleteModalFooter");setTimeout(function(){$("#DeleteModal").modal("hide")},2e3);$.ajax({url:"/Actions/Delete/",type:"POST",data:t,success:function(t){t.success?(createMiniAlert("Ok","","","success"),$.when(o(t.actionType,t.actionCount,n)).then(s()),$("#DeleteModal").modal("hide"),$("#DeleteModalBodyDiv").empty()):createAlert(t.responseTitle,t.responseSummary,t.responseText);removeWaitingDotsToButton("DeleteBtn","DeleteModalFooter")}})});function o(t,i,r){if(t=="Pending")localStorage.setItem("actionsPending",i),pendingActionsTab&&(pendingActionsTableData=n(pendingActionsTable,pendingActionsTableData,r));else if(t=="Working")if(localStorage.setItem("actionsWorkingEvaluating",i),pendingActionsTab){var u=localStorage.getItem("actionsPending");localStorage.setItem("actionsPending",u-1);pendingActionsTableData=n(pendingActionsTable,pendingActionsTableData,r)}else workingActionsTableData=n(workingActionsTable,workingActionsTableData,r);else t=="Finished"&&(localStorage.setItem("actionsFinished",i),finishedActionsTab&&(finishedActionsTableData=n(finishedActionsTable,finishedActionsTableData,r)))}function s(){actionsPending=localStorage.getItem("actionsPending");actionsWorkingEvaluating=localStorage.getItem("actionsWorkingEvaluating");actionsFinished=localStorage.getItem("actionsFinished");actionsWorkingEvaluating>=0&&$("#running-actions-href").text("Running ("+actionsWorkingEvaluating+")");actionsPending>=0&&$("#pending-actions-href").text("Pending ("+actionsPending+")");actionsFinished>=0&&$("#finished-actions-href").text("Finished ("+actionsFinished+")");setActionsColor(actionsPending,actionsWorkingEvaluating,actionsFinished)}function n(n,t,r){var u=t.map(n=>Object.assign({},n));for(i=0;i<t.length;i++)t[i].id==r&&delete u[i];return u=u.filter(function(n){return n!=null}),n.clear().rows.add(u).draw(),u}EditAction=function(n,t){var i="/Actions/Edit/"+n;$("#EditModalBodyDiv").load(i,function(){var n,i,r,u;$("#EditModal").modal("show");$.validator.unobtrusive.parse("#formEdit");$("#ProductEditSelect").select2({dropdownParent:$("#EditModal"),width:"100%"});n=$("#pEditmarketflag1").attr("value")+"flag";i=getComputedStyle(document.querySelector("."+n)).backgroundImage.substring(5).substring(0,getComputedStyle(document.querySelector("."+n)).backgroundImage.length-7);$("#pEditmarketflag1").attr("src",i);$editselect1=$("#EditModal #aEditPlatformType");$editselect2=$("#EditModal #aEditPlatformName");$editoptions=$editselect2.find("option");edits2options=$editoptions.clone(!0);$editoptions=edits2options.clone(!0);$editselect2.html($editoptions.filter('[value="'+$editselect1.val()+'"]'));$editselect2.val($("#EditModal #aEditPlatformName option:first").val());$editselect2.trigger("change");$("#EditModal #aEditPlatformName").prop("selectedIndex",0);var f=$("#selectidsinv").find("option"),e=f,o=e.filter('[value="'+t+'"]'),s=$(o).text();$("#EditModal #aEditPlatformName option:selected").text(s);r=$urloptions;u=$("#EditModal #aEditPlatformName option:selected").text();$("#EditModal #selecturl").html(r.filter('[value="'+u+'"]'));$("#EditModal a#changeme").attr("href","https://"+$("#EditModal #selecturl option:selected").text())})};$("#EditModal").on("change","#aEditPlatformType",function(){$eoptions=es2options.clone(!0);$eselect2.html($eoptions.filter('[value="'+this.value+'"]'));$eselect2.val($("#EditModal #aEditPlatformName option:first").val());$eselect2.trigger("change")}).trigger("change");$("#EditModal").on("change","#aEditPlatformName",function(){var t=$urloptions,i=$realId,r=$(this).val(),n=$("#EditModal #aEditPlatformName option:selected").text(),u=i.filter('[value="'+n+'"]'),f=$(u).text();$("#EditModal #selecturl").html(t.filter('[value="'+n+'"]'));$("option[value="+r+"]",this).val(f);$("#EditModal a#changeme").attr("href","https://"+$("#EditModal #selecturl option:selected").text())});$("#EditModal").on("click","#EditBtn",function(){if($("#formEdit").validate(),$("#formEdit").valid()){var n=$("#EditModal #Id").val(),t=$("#EditModal #formEdit").serialize();addWaitingDotsToButton("EditBtn","EditModalFooter");setTimeout(function(){$("#EditModal").modal("hide")},2e3);$.ajax({url:"/Actions/Edit/"+n,type:"POST",data:t,success:function(n){n.success?(createMiniAlert("Ok","","","success"),$("#EditModal").modal("hide"),$("#EditModalBodyDiv").empty()):createAlert(n.responseTitle,n.responseSummary,n.responseText);removeWaitingDotsToButton("EditBtn","EditModalFooter")}})}})}if($("#"+AppSettingspage+pagevar).length>0&&$(document).ready(function(){var n=localStorage.getItem("appsettings");n!="1"?$.ajax({url:"/AppSettings/GetAppSettings/",type:"GET",success:function(n){n.success?(localStorage.setItem("appsettings","1"),localStorage.setItem("Language",n.language),$("#Language").val(n.language),localStorage.setItem("Currency",n.currency),$("#Currency").val(n.currency),localStorage.setItem("Metricsystem",n.metricsystem),$("#Metricsystem").prop("checked",n.metricsystem),localStorage.setItem("EmailNL",n.emailNL)):createAlert(n.responseTitle,n.responseSummary,n.responseText)}}):($("#Language").val(localStorage.getItem("Language")),$("#Currency").val(localStorage.getItem("Currency")),$("#Metricsystem").prop("checked",JSON.parse(localStorage.getItem("Metricsystem"))));$("#ProfileSave").on("click",function(){if($("#formEditProfile").validate(),$("#formEditProfile").valid()){$("#ProfileSave").prop("disabled",!0);$("#ProfileSave").val("Please Wait");$("#ProfileSaveSpan").css("pointer-events","none");$("#ProfileSaveSpan i").addClass("zmdi zmdi-rotate-right zmdi-hc-spin");var n=$("#formEditProfile").serialize();$.ajax({url:"/AppSettings/Edit",type:"POST",data:n,success:function(n){n.success?(createMiniAlert("Ok","","","success"),localStorage.setItem("Language",n.language),localStorage.setItem("Currency",n.currency),localStorage.setItem("Metricsystem",n.metricsystem)):createAlert(n.responseTitle,n.responseSummary,n.responseText);$("#ProfileSave").prop("disabled",!1);$("#ProfileSave").val("Saved");$("#ProfileSaveSpan").css("pointer-events","auto");$("#ProfileSaveSpan i").removeClass("zmdi zmdi-rotate-right zmdi-hc-spin")}})}})}),$("#"+BillingSettingspage+pagevar).length>0&&$(document).ready(function(){function p(){function t(n){var t=new XMLHttpRequest;return t.open("GET",n,!1),t.send(null),t.responseText}paypal.Buttons({style:{layout:"horizontal",size:"small",color:"blue",shape:"pill",label:"pay",height:40,tagline:"false"},createOrder:function(t){orderId=t.orderID;let i=new FormData;return i.append("amount",n),i.append("type","paypal"),fetch("/api/paypal/checkout/order/create/",{method:"post",body:i}).then(function(n){return n.json()}).then(function(n){return n.orderID})},onApprove:function(n,t){return fetch("/api/paypal/checkout/order/approved/"+n.orderID,{method:"post"}).then(function(){return t.order.capture()}).then(function(n){$(".spinnerloading").removeClass("d-none");let t=new FormData;t.append("orderId",n.id);t.append("payerId",n.payer.payer_id);var i="/api/paypal/checkout/order/complete/"+n.id+"/"+n.payer.payer_id;$.ajax({url:i,type:"POST",success:function(n){if(n.success)s(n.balance),$("#card-errors").text(""),$("#card-success").html('<i class="zmdi zmdi-check-circle"><\/i>'),$(".spinnerloading").addClass("d-none"),n.balance>=0&&$("#paypalpaycontainer").fadeOut(1e4),$("#cutomerTransactionsShow").removeClass("d-none"),$("#cutomerTransactionsShow").attr("title",$("#cutomerTransactionsShow").text()),c();else{$(".spinnerloading").addClass("d-none");var t=document.getElementById("card-errors");t.textContent=n.error;$("#errresult").removeClass("d-none")}}})})},onCancel:function(n){t("/api/paypal/checkout/order/cancel/"+n.orderID)},onError:function(n){var t=document.getElementById("card-errors");t.textContent=n;$("#errresult").removeClass("d-none")}}).render("#paypal-button-container")}function w(){e=Stripe("pk_live_H3WggWv8vqUX0FhnPPwxg56B");var n=e.elements();f=n.create("card",{iconStyle:"solid",style:{base:{iconColor:"#8898AA",color:"#31325F",lineHeight:"36px",fontWeight:900,fontSize:"19px","::placeholder":{color:"lightgray"}},invalid:{iconColor:"#e85746",color:"#e85746"}},classes:{focus:"is-focused",empty:"is-empty"}});f.mount("#card-element");$("#cutomerPaymentShow").click()}function b(){if(u||u>0){$("#cutomerPaymentShow").removeClass("d-none");$("#cutomerPaymentShow").on("click",function(){$("#steps").hasClass("d-none")?($("#cutomerPaymentShow > i").removeClass("zmdi-plus"),$("#cutomerPaymentShow > i").addClass("zmdi-minus"),$("#steps").removeClass("d-none")):($("#cutomerPaymentShow > i").addClass("zmdi-plus"),$("#cutomerPaymentShow > i").removeClass("zmdi-minus"),$("#steps").addClass("d-none"))})}else $("#cutomerPaymentShow").addClass("d-none"),$("#steps").addClass("d-none")}function k(){function ut(n,t,i){e.confirmCardPayment(n,{payment_method:{card:f,billing_details:{name:$("#ccname").val()}},setup_future_usage:"off_session"}).then(function(n){n.error?d(n.error,t):n.paymentIntent.status==="succeeded"&&(w(),l(t,i),$("#step-1").hasClass("hasPaymentMethod")||($("#step-1").addClass("hasPaymentMethod"),it(),et()))})}function b(n,t,i){t!="offSession"&&(i=$("#alipayname").val());e.confirmAlipayPayment(n,{payment_method:{billing_details:{name:i}},return_url:`${window.location.origin}/BillingSettings/UpdatePayment`})}function k(n,t,i){e.confirmWechatPayPayment(n,{payment_method_options:{wechat_pay:{client:"web"}}}).then(function(n){n.paymentIntent.status==="succeeded"?(w(),l(t,i),t=="onSession"&&($("#step-1").hasClass("hasPaymentMethod")?t=="offSession":($("#step-1").addClass("hasPaymentMethod"),it()))):d(n.error,t)})}function l(n,t){n=="onSession"?($("#card-errors").text(""),$("#card-success").html('<i class="zmdi zmdi-check-circle"><\/i>'),t>=0?($(".paybutton").text("OK"),$("form").find(":input:not(:disabled)").prop("disabled",!0),$("form").fadeOut(1e4)):(o(),u("onSession"))):n=="offSession"&&(t>=0?($("#paycardoffsession").prop("disabled",!0),$("#paycardoffsession").text("OK")):(setTimeout(()=>{$("#paycardoffsession").prop("disabled",!1)},1e4),u("offSession")),$("#offSessionResultError").text(""),$("#offSessionResultSuccess").removeClass("d-none"),$("#offSessionResultSuccess").html('<i class="zmdi zmdi-check-circle"><\/i>'))}function d(n,t){console.log(n.message);t=="onSession"?(n!="undefined"&&r(n.message,"onSession"),o(),u("onSession")):t=="offSession"&&($("#offSessionResultSuccess").text(""),$("#offSessionResultError").removeClass("d-none"),n!="undefined"&&$("#offSessionResultError").text(n.message))}function r(n,t){if(t=="onSession"){var i=document.getElementById("card-errors");i.textContent=n}else t=="offSession"&&($("#offSessionResultSuccess").text(""),$("#offSessionResultError").removeClass("d-none"),$("#offSessionResultError").text(n))}function ft(){var n=document.getElementById("card-errors");n.textContent=""}function a(){$(".amounttopay").prop("disabled",!0);$(".amounttopay").removeClass("btn-primary");$(".amounttopay").addClass("btn-secondary")}function o(){$(".amounttopay").prop("disabled",!1);$(".amounttopay").removeClass("btn-secondary");$(".amounttopay").addClass("btn-primary")}function g(){$("#paywechat").prop("disabled",!1);$("#paywechat").removeClass("btn-secondary");$("#paywechat").addClass("btn-primary")}function nt(){$("#payalipay").prop("disabled",!1);$("#payalipay").removeClass("btn-secondary");$("#payalipay").addClass("btn-primary")}function y(){$("#paycrypto").text("Pay $"+n);$("#paycrypto").prop("disabled",!1);$("#paycrypto").removeClass("btn-secondary");$("#paycrypto").addClass("btn-primary")}function tt(n){n=="onSession"&&($(".paybutton").text(""),$(".paybutton").append('<i class="zmdi zmdi-spinner zmdi-hc-spin"><\/i>'));n=="offSession"&&($("#paycardoffsession").text(""),$("#paycardoffsession").append('<i class="zmdi zmdi-spinner zmdi-hc-spin"><\/i>'))}function u(t){t=="onSession"&&($(".paybutton").text(""),$(".paybutton").append(" $"+n));t=="offSession"&&($("#paycardoffsession").text(""),$("#paycardoffsession").append(" $"+n))}function it(){$("#cutomerTransactionsShow").removeClass("d-none");$("#cutomerTransactionsShow").attr("title",$("#cutomerTransactionsShow").text());c()}function et(){$("#ccavailableShow").removeClass("d-none");$("#ccavailableShow").attr("title",$("#ccavailableShow").text());v();$("#ccavailableWarning").removeClass("d-none")}function w(){$(".spinnerloading").removeClass("d-none");setTimeout(()=>{$.ajax({url:"/BillingSettings/UpdatePaymentSession",type:"GET",success:function(n){n.success?(s(n.balance),$(".spinnerloading").addClass("d-none")):(++p,p<5?setTimeout(()=>{w()},5e3):($("#errresult").removeClass("d-none"),$(".spinnerloading").addClass("d-none")))}})},1e4)}var h,rt,p,ot;$(".hasPaymentMethod").hasClass("card")?$("#currentcc").removeClass("d-none"):$(".hasPaymentMethod").hasClass("wechat_pay")?$("#currentwechat_pay").removeClass("d-none"):$(".hasPaymentMethod").hasClass("alipay")?$("#currentalipay").removeClass("d-none"):$(".hasPaymentMethod").hasClass("crypto")?$("#currentcrypto").removeClass("d-none"):$(".hasPaymentMethod").hasClass("paypalpay")&&$("#currentpaypalpay").removeClass("d-none");$(".paybutton").append(" $"+n);f.on("change",function(n){n.error?r(n.error.message,"onSession"):ft()});$(".amounttopay").prop("disabled",!0);g();nt();y();h=!1;$("input#ccname").on("change keyup paste",function(){$("#ccname").val()!=""&&h?o():a()});f.on("change",function(n){n.complete?($("#ccname").val()!=""&&o(),h=!0):(a(),h=!1);g();nt();y()});$("#paycardoffsession").on("click",function(){$("#offSessionResultSuccess").addClass("d-none");$("#offSessionResultError").addClass("d-none");$("#paycardoffsession").prop("disabled",!0);tt("offSession");var i={amount:n,type:t};t=="card"?($.ajax({url:"/BillingSettings/processOffSessionPayments",type:"POST",data:i,success:function(n){n.success?n.threeDSecure?(r(n.message,"offSession"),setTimeout(()=>{$(".gostep-4").click(),$("#step-10").addClass("d-none")},2e3)):(l("offSession",n.balance),s(n.balance)):(r(n.message,"offSession"),$("#paycardoffsession").prop("disabled",!1),u("offSession"))}}),event.preventDefault()):t=="alipay"||t=="wechat_pay"?($.ajax({url:"/BillingSettings/ProcessPaymentAmount",type:"POST",data:i,success:function(n){if(n.success){var f=n.name,i=n.paymentIntentClientSecret;t=="wechat_pay"?k(i,"offSession",n.balance):t=="alipay"&&b(i,"offSession",f,n.balance)}else r(n.message,"offSession"),$("#paycardoffsession").prop("disabled",!1),u("offSession")}}),event.preventDefault()):t=="crypto"&&($.ajax({url:"/BillingSettings/CreateCoinbaseCharge",type:"POST",data:i,success:function(n){if(n.success){var t=n.redirect;location.href=t}else r(n.message,"offSession"),$("#paycardoffsession").prop("disabled",!1),u("offSession")}}),event.preventDefault())});$(".amounttopay").on("click",function(){a();tt("onSession");var t={name:$("#ccname").val(),amount:n,type:i};i!="crypto"?($.ajax({url:"/BillingSettings/ProcessPaymentAmount",type:"POST",data:t,success:function(n){if(n.success){var t=n.paymentIntentClientSecret;i=="card"?ut(t,"onSession",n.balance):i=="wechat_pay"?k(t,"onSession",n.balance):i=="alipay"&&b(t,"onSession",n.balance)}else r(n.message,"onSession"),o(),u("onSession")}}),event.preventDefault()):i=="crypto"&&($.ajax({url:"/BillingSettings/CreateCoinbaseCharge",type:"POST",data:t,success:function(n){if(n.success){var t=n.redirect;location.href=t}else r(n.message,"onSession"),$("#paycardoffsession").prop("disabled",!1),u("onSession")}}),event.preventDefault())});rt=document.querySelectorAll("input.field");Array.prototype.forEach.call(rt,function(n){n.addEventListener("focus",function(){n.classList.add("is-focused")});n.addEventListener("blur",function(){n.classList.remove("is-focused")});n.addEventListener("keyup",function(){n.value.length===0?n.classList.add("is-empty"):n.classList.remove("is-empty")})});$("#cancelcryptopayment").on("click",function(){y()});p=0;ot=!1}function c(){if($("#cutomerTransactionsShow").attr("title").length>1){$("#cutomerTransactionsShow").removeClass("d-none");$("#cutomerTransactionsShow").on("click",function(){$("#cutomerTransactionsShowTable").hasClass("d-none")?($("#cutomerTransactionsShow > i").removeClass("zmdi-plus"),$("#cutomerTransactionsShow > i").addClass("zmdi-minus"),d().then(function(){$("#cutomerTransactionsShowTable").removeClass("d-none")})):($("#cutomerTransactionsShow > i").addClass("zmdi-plus"),$("#cutomerTransactionsShow > i").removeClass("zmdi-minus"),$("#cutomerTransactionsShowTable").addClass("d-none"))})}else $("#cutomerTransactionsShow").addClass("d-none")}async function d(){if(!a&&(a=!0,!o)){$("#cutomerTransactionsSpinner >i").addClass("zmdi zmdi-spinner zmdi-hc-spin");var n=[{data:"created",title:"Date",orderable:!0,width:"100px"},{data:"amount",title:"Amount",orderable:!0,width:"10px","class":"text-center"},{data:"amountRecieved",title:"Recieved",orderable:!0,width:"10px","class":"text-center"},{data:"status",title:"Status",orderable:!0,width:"10px","class":"text-center"}];await $.ajax({url:"/BillingSettings/ListCustomerTransactions",type:"GET",success:function(t){t.success?($("#cutomerTransactionsSpinner >i").removeClass("zmdi zmdi-spinner zmdi-hc-spin"),$("#customerTransactions").dataTable({data:t.customerPaymentHistory,columns:n}),o=!0):(o=!1,$("#cutomerTransactionsSpinner >i").removeClass("zmdi zmdi-spinner zmdi-hc-spin"),$("#cutomerTransactionsShow > i").addClass("zmdi-plus"),$("#cutomerTransactionsShow > i").removeClass("zmdi-minus"),$("#cutomerTransactionsShowTable").addClass("d-none"))}})}}function v(){if($("#ccavailableShow").attr("title").length>1){$("#ccavailableShow").removeClass("d-none");$("#ccavailableShow").on("click",function(){$("#avilableCreditCard").hasClass("d-none")?($("#ccavailableShow > i").removeClass("zmdi-plus"),$("#ccavailableShow > i").addClass("zmdi-minus"),g(),$("#avilableCreditCard").removeClass("d-none")):($("#ccavailableShow > i").addClass("zmdi-plus"),$("#ccavailableShow > i").removeClass("zmdi-minus"),$("#avilableCreditCard").addClass("d-none"))})}else $("#ccavailableShow").addClass("d-none")}function g(){$("#autorenewcc").change(function(){$("#autorenewcc").prop("disabled",!0);var n;$.ajax({url:"/BillingSettings/AutoRenewCC?autorenew="+$(this).prop("checked"),type:"POST",data:n,success:function(n){n.success;$("#autorenewcc").prop("disabled",!1)}})})}function nt(){function e(n,i){var f,u;n!=10?(f="#step-"+(n-1),u="#step-"+n,currentstep=n):(f="#step-1",u="#step-10",currentstep=10,t=$(i).attr("title"));$(f).fadeOut(r);n==3&&$("#step-1").fadeOut(r);setTimeout(()=>{$(f).addClass("d-none"),$(u).css("display","none"),$(u).removeClass("d-none"),$(u).fadeIn(r)},r)}function o(n){var i,t;n!=10?(i="#step-"+(n+1),t="#step-"+n,currentstep=n):(i="#step-10",t="#step-1",currentstep=1);$(i).fadeOut(r);setTimeout(()=>{$(i).addClass("d-none"),$(t).css("display","none"),$(t).removeClass("d-none"),$(t).fadeIn(r),currentstep=t},r)}function s(t,i){n=u*t;$("#offsession>div").removeClass("active");$(i).addClass("active");$("#paycardoffsession").text("Pay $"+n)}function f(t,i){n=u*t;$("#onsession>div").removeClass("active");$(i).addClass("active");$("#paycardonsession").text("Pay $"+n);$(".paybutton").text("Pay $"+n);$("#paypalpayamount").text("$"+n)}h&&$("#step-1").addClass("available");$("#step-1").hasClass("hasPaymentMethod")&&(h=!0);h?$("#step-1").removeClass("d-none"):($("#step-2").removeClass("d-none"),$("#backtostep-1").empty());$(".gostep-2").on("click",function(){e(2,this)});$(".gostep-3").on("click",function(){e(3,this);$this=this;i=$($this).attr("title");$("#onsession>#1-month").click()});$(".gostep-4").on("click",function(){e(4,this);$(".allpaymentmethods").addClass("d-none");var n="#"+i;$(n).removeClass("d-none")});$(".gostep-10").on("click",function(){$this=this;t=$($this).attr("title");t=="paypalpay"?(e(3,$this),$("#onsession>#1-month").click(),i=$($this).attr("title")):(e(10,this),$("#offsession>#1-month").click())});$("#backtostep-1").on("click",function(){o(1)});$("#backtostep-2").on("click",function(){o(2)});$("#backtostep-3").on("click",function(){o(3)});$("#backtostep-10").on("click",function(){o(10)});$("#offsession>#1-month").on("click",function(){s(1,this);f(1,this)});$("#offsession>#3-month").on("click",function(){s(3,this);f(3,this)});$("#offsession>#6-month").on("click",function(){s(6,this);f(6,this)});$("#offsession>#12-month").on("click",function(){s(12,this);f(12,this)});$("#onsession>#1-month").on("click",function(){f(1,this)});$("#onsession>#3-month").on("click",function(){f(3,this)});$("#onsession>#6-month").on("click",function(){f(6,this)});$("#onsession>#12-month").on("click",function(){f(12,this)})}function s(n){$("#balanceamount").text("$"+n);var t=parseFloat(n);return t<-5&&t>=-25?($("#balancestatus").html('<i class="zmdi zmdi-alert-circle"><\/i>'),$("#balancestatus").css("color","lightcoral")):t<-25?($("#balancestatus").html('<i class="zmdi  zmdi-close-circle"><\/i>'),$("#balancestatus").css("color","red")):($("#balancestatus").html('<i class="zmdi zmdi-check-circle"><\/i>'),$("#balancestatus").css("color","green")),$("#balanceamount").removeClass("d-none"),$("#balancestatus").css("font-size","96px"),n<-5?!1:!0}var l=s($("#balanceamount").text()),y=$("#cutomerPaymentShow").attr("title"),u=parseFloat(y),n=u,i="card",r=300,h,t,f,e,a=!1,o;l||(p(),w(),b(),nt(),k());($("#cutomerTransactionsShow").attr("title").length>1||!l)&&(c(),v());o=!1;$("#autorenewcc").change(function(){$("#autorenewcc").prop("disabled",!0);$.ajax({url:"BillingSettings/AutoRenewCC/?autorenew="+$(this).prop("checked"),type:"GET",complete:function(){},success:function(n){n.success?(createMiniAlert("Ok","","","success"),$(this).prop("checked")==!0?(AutoRenew=!0,$("#ccprepay").addClass("visually-hidden")):(AutoRenew=!1,$("#ccprepay").removeClass("visually-hidden"))):createAlert(n.responseTitle,n.responseSummary,n.responseText);$("#autorenewcc").prop("disabled",!1)}})})}),$("#"+Businesspage+pagevar).length>0&&($("#"+Businesspage+sidevar).addClass(activeclass),$("#EditBtn").prop("disabled",!0),$(document).ready(function(){$.ajax({url:"/Business/Load/",type:"GET",success:function(n){n.success?($("#name").prop("value",n.data.name),$("#contactPerson").prop("value",n.data.contactPerson),$("#email").prop("value",n.data.email),$("#street").prop("value",n.data.street),$("#city").prop("value",n.data.city),$("#zipCode").prop("value",n.data.zipCode),$("#state").prop("value",n.data.state),$("#country").prop("value",n.data.country),$("#website").prop("value",n.data.website),$("#phone").prop("value",n.data.phone),$("#name").attr("readonly",!1),$("#contactPerson").attr("readonly",!1),$("#email").attr("readonly",!1),$("#street").attr("readonly",!1),$("#city").attr("readonly",!1),$("#zipCode").attr("readonly",!1),$("#state").attr("readonly",!1),$("#country").attr("readonly",!1),$("#website").attr("readonly",!1),$("#phone").attr("readonly",!1),$("#EditBtn").prop("disabled",!1)):(createAlert(n.responseTitle,n.responseSummary,n.responseText),$("#name").attr("readonly",!0),$("#contactPerson").attr("readonly",!0),$("#email").attr("readonly",!0),$("#street").attr("readonly",!0),$("#city").attr("readonly",!0),$("#zipCode").attr("readonly",!0),$("#state").attr("readonly",!0),$("#country").attr("readonly",!0),$("#website").attr("readonly",!0),$("#phone").attr("readonly",!0),$("#EditBtn").prop("disabled",!0))}});$("#EditBtn").on("click",function(){if($("#formEdit").validate(),$("#formEdit").valid()){var n=$("#formEdit").serialize();$("#EditBtn").prop("disabled",!0);$("#EditBtn").val("Please Wait");$("span").css("pointer-events","none");$("span i").addClass("zmdi zmdi-rotate-right zmdi-hc-spin");$.ajax({url:"/Business/Edit/",type:"POST",data:n,success:function(n){n.success?createMiniAlert("Ok","","","success"):createAlert(n.responseTitle,n.responseSummary,n.responseText);$("#EditBtn").prop("disabled",!1);$("#EditBtn").val("Save");$("span").css("pointer-events","auto");$("span i").removeClass("zmdi zmdi-rotate-right zmdi-hc-spin")}})}});$("#website").change(function(){var n=this.value;n=n.toLowerCase();/^http:\/\//.test(n)||/^https:\/\//.test(n)||(this.value="http://"+n)})})),$("#"+FBAInboundShipmentspage+pagevar).length>0){$("#"+FBAInboundShipmentspage+sidevar).addClass(activeclass);var fbaInboundstable,fbainClosingTable,fbainProblemTable,fbainWorkingTable,tableRowIndex,shipmentId,estDeliveryDate,tbldata,cdata=[],vcdata=[],cdataread=!1,delrow=!1,unit=0,trackingmodalLoaded=[],trackingModalBody=[],closingbain=0,rtable=[],rfbainClosingTable=[],initUnit=!0,fbaInbounds,fbaClosing,fbaProblem,fbaWorking,newestDeliveryDate,fbaProblemLength,problemFBAcolumnDefs=[{data:"shipFromAddressCountryCode",title:"From",className:"carrier-truncate",orderable:!1,render:function(n,t,i){return'<div><div style="text-align: center;"><i class="country-select-flag '+n.toLowerCase()+'flag"><\/i><\/div><div class="carrier-from">'+i.shipmentId+'<\/div><div style="font-size: xx-small;">'+i.shipmentName+"<\/div><\/div>"}},{data:"numberOfBoxesSent",title:"Cases",className:"carrier-truncate-sm",orderable:!1,render:function(n,t,i){var r,u;if(i.shipmentType==null)return". . . . .";if(r='<div style="display: flex;"><div><div style="display: flex;"><div><i class="zmdi zmdi-long-arrow-right mdc-text-green zmdi-hc-2x"><\/i><\/div><div class="carrier-sent">'+n+'<\/div><\/div><div style="display: flex;"><div class="carrier-received">'+i.numberOfBoxesRecieved+'<\/div><div style="margin-left: 10px;"><i class="zmdi zmdi-long-arrow-left mdc-text-blue zmdi-hc-2x"><\/i><\/div><\/div><\/div>',i.isPartnered&&(r=r+'<div style="margin-left: -43px;margin-top: 50px;"><i class="zmdi zmdi-amazon zmdi-hc-1x><\/i><\/div>'),i.shipmentType=="SP")r=r+'<div style="margin-left: -43px;margin-top: 50px;"><i class="carrier-select smallparcel"><\/i><\/div>';else if(i.shipmentType=="LTL"&&(r=r+'<div style="margin-left: -43px;margin-top: 50px;"><i class="carrier-select ltl"><\/i><\/div>',u='<div style="margin-left: -43px;margin-top: 50px;"><i class="carrier-select ltl"><\/i><\/div>',!i.ispartnered))return u;return r+"<\/div>"}},{data:"fbaItems",title:"Items",orderable:!1,render:function(n,t,i,r){var u="",f="",e=0;return u=u+'<div class="container"><div class="row mx-auto">',n.forEach(function(n){f=n.imageLink;var t="";f[0]=="d"&&(t="width:75px;");u=f.length<1?u+'<div id="'+n.fbaItemsId+"-"+e+'"><a href="#" onclick="itemasin(\''+n.fbaItemsId+"','"+r.row+"','"+n.fbaItemsId+"-"+e+'\' )"><i class="carrier-select unknown"><\/i><\/a><\/div><div><div style="display: flex;justify-content: space-evenly;"><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-up mdc-text-green"><\/i><\/div><div class="carrier-items">'+n.quantityShipped+'<\/div><\/div><\/div><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-down mdc-text-blue"><\/i><\/div><div class="carrier-items">'+n.quantityReceived+'<\/div><\/div><\/div><\/div><div><div style="display: flex;justify-content: center;"><div><i class="zmdi zmdi-codepen"><\/i><\/div><div class="carrier-items">&nbsp;'+n.quantityInCase+"<\/div><\/div><\/div><\/div><\/div>":n.canModifyASIN&&f.length>0?u+'<div style="width: 100px;" class="col-sm-3" id="'+n.fbaItemsId+"-"+e+'x"><a href="#" onclick="itemasin(\''+n.fbaItemsId+"','"+r.row+"','"+n.fbaItemsId+"-"+e+'x\' )"><img src="'+f+'"><\/a><\/div><div><div style="display: flex;justify-content: space-evenly;"><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-up mdc-text-green"><\/i><\/div><div class="carrier-items">'+n.quantityShipped+'<\/div><\/div><\/div><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-down mdc-text-blue"><\/i><\/div><div class="carrier-items">'+n.quantityReceived+'<\/div><\/div><\/div><\/div><div><div style="display: flex;justify-content: center;"><div><i class="zmdi zmdi-codepen"><\/i><\/div><div class="carrier-items">&nbsp;'+n.quantityInCase+"<\/div><\/div><\/div><\/div><\/div>":u+'<div style="width: 100px;" class="col-sm-3"><img style="'+t+'" src="'+f+'"><div><div style="display: flex;justify-content: space-evenly;"><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-up mdc-text-green"><\/i><\/div><div class="carrier-items">'+n.quantityShipped+'<\/div><\/div><\/div><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-down mdc-text-blue"><\/i><\/div><div class="carrier-items">'+n.quantityReceived+'<\/div><\/div><\/div><\/div><div><div style="display: flex;justify-content: center;"><div><i class="zmdi zmdi-codepen"><\/i><\/div><div class="carrier-items">&nbsp;'+n.quantityInCase+"<\/div><\/div><\/div><\/div><\/div>";e++}),u=u+"<\/div><\/div>"}},{data:"shipmentStatus",title:"Status",className:"carrier-truncate-sm",render:function(n,t,i,r){if(i.shipmentType==null)return". . . . .";var u="";return i.shipmentType=="SP"?(u='<div style="display: flex;">',u=i.carrierName.length<1?u+'<div><a href="#" onclick="tracking(\''+i.shipmentId+"','"+r.row+'\')"><i class="carrier-select unknown"><\/i><\/a><\/div>':u+'<div><a href="#" onclick="tracking(\''+i.shipmentId+"','"+r.row+'\')"><i class="carrier-select '+i.carrierName.toLowerCase()+'"><\/i><\/a><\/div>',trackingmodalLoaded[r.row]=!1,trackingModalBody[r.row]=""):u=i.isPartnered?'<div style="display: flex;"><div style="margin-left: 10px;"><i class="zmdi zmdi-amazon zmdi-hc-1x><\/i><\/div>':'<div style="display: flex;"><div style="margin-left: 10px;"><a href="https://www.freightcenter.com/shipment-tracking/results?tn='+i.trackingId+'" target="_blank">Track PRO Number<\/a><\/div>',n=="CLOSED"?u=u+'<div><i class="zmdi zmdi-alert-circle-o zmdi-hc-2x"><\/i><\/div>':n=="SHIPPED"?u=u+'<div><i class="zmdi zmdi-hourglass-alt zmdi-hc-2x"><\/i><\/div>':n=="IN_TRANSIT"?u=u+'<div  class="carrier-select2-pos"><i class="carrier-select2 intransit"><\/i><\/div>':n=="CHECKED_IN"?u=u+'<div class="carrier-select2-pos"><i class="carrier-select2 checkedin"><\/i><\/div>':n=="RECEIVING"?u=u+'<div class="carrier-select2-pos"><i class="carrier-select2 receiving"><\/i><\/div>':n=="DELIVERED"&&(u=u+'<div class="carrier-select2-pos"><i class="zmdi zmdi-badge-check zmdi-hc-2x mdc-text-light-green"><\/i><\/div>'),u=u+'<div><div class="carrier-select3-pos1"><i class="carrier-select3 calender-passed"><\/i><\/div><div class="carrier-select3-pos2">'+i.daysPassedSinceCheckedIn+"<\/div><\/div>",u+"<\/div>"}},{data:"destinationFulfillmentCenterId",className:"carrier-truncate-sm",title:"Warehouse",className:"carrier-truncate",orderable:!1,render:function(n,t,i){return'<div style="display: flex;"><div style="opacity: 0.4;"><a href="'+i.trackUri+'" target="_blank"><i class="country-select-flag '+i.destinationCountryCode.toLowerCase()+'flag" style="cursor: pointer;"><\/i><\/a><\/div><div class="carrier-wh">'+n+"<\/div><\/div>"}},{data:"shipmentId",className:"carrier-truncate-sm",title:"Check/Close",orderable:!1,render:function(n,t,i,r){return'<div style="display:flex"><a href="#" onclick="closeFBA(\''+n+"',"+r.row+')"><i class="zmdi zmdi-delete mdc-text-light-red  zmdi-hc-2x"><\/i><\/a><\/div>'}}],closingFBAcolumnDefs=[{data:"shipFromAddressCountryCode",title:"From",className:"carrier-truncate",orderable:!1,render:function(n,t,i){return'<div><div style="text-align: center;"><i class="country-select-flag '+n.toLowerCase()+'flag"><\/i><\/div><div class="carrier-from">'+i.shipmentId+'<\/div><div style="font-size: xx-small;">'+i.shipmentName+"<\/div><\/div>"}},{data:"numberOfBoxesSent",title:"Cases",className:"carrier-truncate-sm",orderable:!1,render:function(n,t,i){var r,u;if(i.shipmentType==null)return". . . . .";if(r='<div style="display: flex;"><div><div style="display: flex;"><div><i class="zmdi zmdi-long-arrow-right mdc-text-green zmdi-hc-2x"><\/i><\/div><div class="carrier-sent">'+n+'<\/div><\/div><div style="display: flex;"><div class="carrier-received">'+i.numberOfBoxesRecieved+'<\/div><div style="margin-left: 10px;"><i class="zmdi zmdi-long-arrow-left mdc-text-blue zmdi-hc-2x"><\/i><\/div><\/div><\/div>',i.isPartnered&&(r=r+'<div style="margin-left: -43px;margin-top: 50px;"><i class="zmdi zmdi-amazon zmdi-hc-1x><\/i><\/div>'),i.shipmentType=="SP")r=r+'<div style="margin-left: -43px;margin-top: 50px;"><i class="carrier-select smallparcel"><\/i><\/div>';else if(i.shipmentType=="LTL"&&(r=r+'<div style="margin-left: -43px;margin-top: 50px;"><i class="carrier-select ltl"><\/i><\/div>',u='<div style="margin-left: -43px;margin-top: 50px;"><i class="carrier-select ltl"><\/i><\/div>',!i.ispartnered))return u;return r+"<\/div>"}},{data:"fbaItems",title:"Items",orderable:!1,render:function(n,t,i,r){var u="",f="",e=0;return u=u+'<div class="container"><div class="row mx-auto">',n.forEach(function(n){f=n.imageLink;var t="";f[0]=="d"&&(t="width:75px;");u=f.length<1?u+'<div id="'+n.fbaItemsId+"-"+e+'"><a href="#" onclick="itemasin(\''+n.fbaItemsId+"','"+r.row+"','"+n.fbaItemsId+"-"+e+'\' )"><i class="carrier-select unknown"><\/i><\/a><\/div><div><div style="display: flex;justify-content: space-evenly;"><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-up mdc-text-green"><\/i><\/div><div class="carrier-items">'+n.quantityShipped+'<\/div><\/div><\/div><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-down mdc-text-blue"><\/i><\/div><div class="carrier-items">'+n.quantityReceived+'<\/div><\/div><\/div><\/div><div><div style="display: flex;justify-content: center;"><div><i class="zmdi zmdi-codepen"><\/i><\/div><div class="carrier-items">&nbsp;'+n.quantityInCase+"<\/div><\/div><\/div><\/div><\/div>":n.canModifyASIN&&f.length>0?u+'<div style="width: 100px;" class="col-sm-3" id="'+n.fbaItemsId+"-"+e+'x"><a href="#" onclick="itemasin(\''+n.fbaItemsId+"','"+r.row+"','"+n.fbaItemsId+"-"+e+'x\' )"><img src="'+f+'"><\/a><\/div><div><div style="display: flex;justify-content: space-evenly;"><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-up mdc-text-green"><\/i><\/div><div class="carrier-items">'+n.quantityShipped+'<\/div><\/div><\/div><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-down mdc-text-blue"><\/i><\/div><div class="carrier-items">'+n.quantityReceived+'<\/div><\/div><\/div><\/div><div><div style="display: flex;justify-content: center;"><div><i class="zmdi zmdi-codepen"><\/i><\/div><div class="carrier-items">&nbsp;'+n.quantityInCase+"<\/div><\/div><\/div><\/div><\/div>":u+'<div style="width: 100px;" class="col-sm-3"><img style="'+t+'" src="'+f+'"><div><div style="display: flex;justify-content: space-evenly;"><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-up mdc-text-green"><\/i><\/div><div class="carrier-items">'+n.quantityShipped+'<\/div><\/div><\/div><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-down mdc-text-blue"><\/i><\/div><div class="carrier-items">'+n.quantityReceived+'<\/div><\/div><\/div><\/div><div><div style="display: flex;justify-content: center;"><div><i class="zmdi zmdi-codepen"><\/i><\/div><div class="carrier-items">&nbsp;'+n.quantityInCase+"<\/div><\/div><\/div><\/div><\/div>";e++}),u=u+"<\/div><\/div>"}},{data:"shipmentStatus",title:"Status",className:"carrier-truncate",render:function(n,t,i,r){if(i.shipmentType==null)return". . . . .";var u="";return i.shipmentType=="SP"?(u='<div style="display: flex;">',u=i.carrierName.length<1?u+'<div><a href="#" onclick="tracking(\''+i.shipmentId+"','"+r.row+'\')"><i class="carrier-select unknown"><\/i><\/a><\/div>':u+'<div><a href="#" onclick="tracking(\''+i.shipmentId+"','"+r.row+'\')"><i class="carrier-select '+i.carrierName.toLowerCase()+'"><\/i><\/a><\/div>',trackingmodalLoaded[r.row]=!1,trackingModalBody[r.row]=""):u=i.isPartnered?'<div style="display: flex;"><div style="margin-left: 10px;"><i class="zmdi zmdi-amazon zmdi-hc-1x><\/i><\/div>':'<div style="display: flex;"><div style="margin-left: 10px;"><a href="https://www.freightcenter.com/shipment-tracking/results?tn='+i.trackingId+'" target="_blank">Track PRO Number<\/a><\/div>',n=="SHIPPED"?u=u+'<div><i class="zmdi zmdi-hourglass-alt zmdi-hc-2x"><\/i><\/div>':n=="IN_TRANSIT"?u=u+'<div  class="carrier-select2-pos"><i class="carrier-select2 intransit"><\/i><\/div>':n=="CHECKED_IN"?u=u+'<div class="carrier-select2-pos"><i class="carrier-select2 checkedin"><\/i><\/div>':n=="RECEIVING"?u=u+'<div class="carrier-select2-pos"><i class="carrier-select2 receiving"><\/i><\/div>':n=="DELIVERED"&&(u=u+'<div class="carrier-select2-pos"><i class="zmdi zmdi-badge-check zmdi-hc-2x mdc-text-light-green"><\/i><\/div>'),u=u+'<div><div class="carrier-select3-pos1"><i class="carrier-select3 calender-passed"><\/i><\/div><div class="carrier-select3-pos2">'+i.daysPassedSinceCheckedIn+"<\/div><\/div>",u+"<\/div>"}},{data:"destinationFulfillmentCenterId",title:"Warehouse",className:"carrier-truncate",orderable:!1,render:function(n,t,i){return'<div style="display: flex;"><div style="opacity: 0.4;"><a href="'+i.trackUri+'" target="_blank"><i class="country-select-flag '+i.destinationCountryCode.toLowerCase()+'flag" style="cursor: pointer;"><\/i><\/a><\/div><div class="carrier-wh">'+n+"<\/div><\/div>"}}],inboundFBAcolumnDefs=[{data:"shipFromAddressCountryCode",title:"From",className:"carrier-truncate",orderable:!1,render:function(n,t,i){return'<div><div style="text-align: center;"><i class="country-select-flag '+n.toLowerCase()+'flag"><\/i><\/div><div class="carrier-from">'+i.shipmentId+'<\/div><div style="font-size: xx-small;white-space: pre-wrap;">'+i.shipmentName+"<\/div><\/div>"}},{data:"numberOfBoxesSent",title:"Cases",className:"carrier-truncate-sm",orderable:!1,render:function(n,t,i){var r,u;if(i.shipmentType==null)return". . . . .";if(r='<div style="display: flex;"><div><div style="display: flex;"><div><i class="zmdi zmdi-long-arrow-right mdc-text-green zmdi-hc-2x"><\/i><\/div><div class="carrier-sent">'+n+"<\/div><\/div><\/div>",i.isPartnered&&(r=r+'<div style="margin-left: -43px;margin-top: 50px;"><i class="zmdi zmdi-amazon zmdi-hc-1x><\/i><\/div>'),i.shipmentType=="SP")r=r+'<div style="margin-left: -43px;margin-top: 50px;"><i class="carrier-select smallparcel"><\/i><\/div>';else if(i.shipmentType=="LTL"&&(r=r+'<div style="margin-left: -43px;margin-top: 50px;"><i class="carrier-select ltl"><\/i><\/div>',u='<div style="margin-left: -43px;margin-top: 50px;"><i class="carrier-select ltl"><\/i><\/div>',!i.ispartnered))return u;return r+"<\/div>"}},{data:"totalWeight",title:"Weight",orderable:!1,className:"carrier-truncate",render:function(t,i,r){if(localStorage.getItem("Metricsystem")=="true"){unit=1;var u=Math.round(t/2.20462),f=n(r.totalCFT*.0283168,2);return t!=0?'<div class="container"> <div class="row mx-auto"><div class="col"><div style="opacity: 0.3;"><i class="carrier-select weight"><\/i><\/div><div class="carrier-weight">'+u+'<\/div><\/div><div class="col"><div style="opacity: 0.3;"><i class="carrier-select cubic"><\/i><\/div><div class="carrier-size">'+f+"<\/div><\/div><\/div><\/div>":'<div class="container"> <div class="row mx-auto"><div class="col"><div style="opacity: 0.3;"><i class="carrier-select weight"><\/i><\/div><div class="carrier-weight">'+u+'<\/div><\/div><div class="col"><div style="opacity: 0.3;"><i class="carrier-select cubic"><\/i><\/div><div class="carrier-size">'+f+"<\/div><\/div><\/div><\/div>"}return t!=0?'<div class="container"> <div class="row mx-auto"><div class="col"><div style="opacity: 0.3;"><i class="carrier-select weight"><\/i><\/div><div class="carrier-weight">'+t+'<\/div><\/div><div class="col"><div style="opacity: 0.3;"><i class="carrier-select cubic"><\/i><\/div><div class="carrier-size">'+r.totalCFT+"<\/div><\/div><\/div><\/div>":'<div class="container"> <div class="row mx-auto"><div class="col"><div style="opacity: 0.3;"><i class="carrier-select weight"><\/i><\/div><div class="carrier-weight">'+t+'<\/div><\/div><div class="col"><div style="opacity: 0.3;"><i class="carrier-select cubic"><\/i><\/div><div class="carrier-size">'+r.totalCFT+"<\/div><\/div><\/div><\/div>"}},{data:"fbaItems",title:"Items",orderable:!1,render:function(n,t,i,r){var u="",f="",e=0;return u=u+'<div class="container"><div class="row mx-auto">',n.forEach(function(n){f=n.imageLink;var t="";f[0]=="d"&&(t="width:75px;");u=f.length<1?u+'<div id="'+n.fbaItemsId+"-"+e+'"><a href="#" onclick="itemasin(\''+n.fbaItemsId+"','"+r.row+"','"+n.fbaItemsId+"-"+e+'\' )"><i class="carrier-select unknown"><\/i><\/a><\/div><div><div style="display: flex;justify-content: space-evenly;"><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-up mdc-text-green"><\/i><\/div><div class="carrier-items">'+n.quantityShipped+'<\/div><\/div><\/div><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-down mdc-text-blue"><\/i><\/div><div class="carrier-items">'+n.quantityReceived+'<\/div><\/div><\/div><\/div><div><div style="display: flex;justify-content: center;"><div><i class="zmdi zmdi-codepen"><\/i><\/div><div class="carrier-items">&nbsp;'+n.quantityInCase+"<\/div><\/div><\/div><\/div><\/div>":n.canModifyASIN&&f.length>0?u+'<div style="width: 100px;" class="col-sm-3" id="'+n.fbaItemsId+"-"+e+'x"><a href="#" onclick="itemasin(\''+n.fbaItemsId+"','"+r.row+"','"+n.fbaItemsId+"-"+e+'x\' )"><img src="'+f+'"><\/a><\/div><div><div style="display: flex;justify-content: space-evenly;"><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-up mdc-text-green"><\/i><\/div><div class="carrier-items">'+n.quantityShipped+'<\/div><\/div><\/div><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-down mdc-text-blue"><\/i><\/div><div class="carrier-items">'+n.quantityReceived+'<\/div><\/div><\/div><\/div><div><div style="display: flex;justify-content: center;"><div><i class="zmdi zmdi-codepen"><\/i><\/div><div class="carrier-items">&nbsp;'+n.quantityInCase+"<\/div><\/div><\/div><\/div><\/div>":u+'<div style="width: 100px;" class="col-sm-3"><img style="'+t+'" src="'+f+'"><div><div style="display: flex;justify-content: space-evenly;"><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-up mdc-text-green"><\/i><\/div><div class="carrier-items">'+n.quantityShipped+'<\/div><\/div><\/div><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-down mdc-text-blue"><\/i><\/div><div class="carrier-items">'+n.quantityReceived+'<\/div><\/div><\/div><\/div><div><div style="display: flex;justify-content: center;"><div><i class="zmdi zmdi-codepen"><\/i><\/div><div class="carrier-items">&nbsp;'+n.quantityInCase+"<\/div><\/div><\/div><\/div><\/div>";e++}),u=u+"<\/div><\/div>"}},{data:"shipmentStatus",title:"Status",className:"carrier-truncate",render:function(n,t,i,r){if(i.shipmentType==null)return". . . . .";var u="";return i.shipmentType=="SP"?(u='<div style="display: flex;">',u=i.carrierName.length<1?u+'<div><a href="#" onclick="tracking(\''+i.shipmentId+"','"+r.row+'\')"><i class="carrier-select unknown"><\/i><\/a><\/div>':u+'<div><a href="#" onclick="tracking(\''+i.shipmentId+"','"+r.row+'\')"><i class="carrier-select '+i.carrierName.toLowerCase()+'"><\/i><\/a><\/div>',trackingmodalLoaded[r.row]=!1,trackingModalBody[r.row]=""):u=i.isPartnered?'<div style="display: flex;"><div style="margin-left: 10px;"><i class="zmdi zmdi-amazon zmdi-hc-1x><\/i><\/div>':'<div style="display: flex;"><div style="margin-left: 10px;"><a href="https://www.freightcenter.com/shipment-tracking/results?tn='+i.trackingId+'" target="_blank">Track PRO Number<\/a><\/div>',n=="SHIPPED"?u=u+'<div><i class="zmdi zmdi-hourglass-alt zmdi-hc-2x"><\/i><\/div>':n=="IN_TRANSIT"?u=u+'<div  class="carrier-select2-pos"><i class="carrier-select2 intransit"><\/i><\/div>':n=="CHECKED_IN"?u=u+'<div class="carrier-select2-pos"><i class="carrier-select2 checkedin"><\/i><\/div>':n=="RECEIVING"?u=u+'<div class="carrier-select2-pos"><i class="carrier-select2 receiving"><\/i><\/div>':n=="DELIVERED"&&(u=u+'<div class="carrier-select2-pos"><i class="zmdi zmdi-badge-check zmdi-hc-2x mdc-text-light-green"><\/i><\/div>'),u=u+'<div><div class="carrier-select3-pos1"><i class="carrier-select3 calender-passed"><\/i><\/div><div class="carrier-select3-pos2">'+i.daysPassedSince+"<\/div><\/div>",u+"<\/div>"}},{data:"destinationFulfillmentCenterId",title:"Warehouse",className:"carrier-truncate",orderable:!1,render:function(n,t,i){return'<div style="display: flex;"><div style="opacity: 0.4;"><a href="'+i.trackUri+'" target="_blank"><i class="country-select-flag '+i.destinationCountryCode.toLowerCase()+'flag" style="cursor: pointer;"><\/i><\/a><\/div><div class="carrier-wh">'+n+"<\/div><\/div>"}},{data:"estDeliveryDate",title:"Arrives On",className:"carrier-truncate",render:function(n,t,i,r){var e;const o=new Date;let s=o.getUTCDate();var f=n.split("T")[0],h=Date.parse(n.split("T")[0]),c=Date.parse(s),u=new Date(h);return u.setDate(u.getDate()-5),e=!1,c>u.setUTCDate(u.getUTCDate())&&(e=!0),i.isPartnered&&i.shipmentType=="LTL"?'<div class="carrier-at-'+i.dateStatusClass+'">'+f+"<\/div>":'<div style="display: flex;"><div class="carrier-at-'+i.dateStatusClass+" shipmentdat-"+i.shipmentId+'">'+f+'<\/div><div style="margin-left: 10px;"><a href="#" onclick="EditComponent(\''+i.shipmentId+"',"+r.row+')"><div style="display:flex;"><i class="zmdi zmdi-calendar mdc-text-red"><\/i><\/a><\/div><\/div><\/div>'}},],workingFBAcolumnDefs=[{data:"shipFromAddressCountryCode",title:"From",className:"carrier-truncate",orderable:!1,render:function(n,t,i){return'<div><div style="text-align: center;"><i class="country-select-flag '+n.toLowerCase()+'flag"><\/i><\/div><div class="carrier-from">'+i.shipmentId+'<\/div><div style="font-size: xx-small;white-space: pre-wrap;">'+i.shipmentName+"<\/div><\/div>"}},{data:"numberOfBoxesSent",title:"Cases",className:"carrier-truncate-sm",orderable:!1,render:function(n,t,i){var r,u;if(i.shipmentType==null)return". . . . .";if(r='<div style="display: flex;"><div><div style="display: flex;"><div><i class="zmdi zmdi-long-arrow-right mdc-text-green zmdi-hc-2x"><\/i><\/div><div class="carrier-sent">'+n+"<\/div><\/div><\/div>",i.isPartnered&&(r=r+'<div style="margin-left: -43px;margin-top: 50px;"><i class="zmdi zmdi-amazon zmdi-hc-1x><\/i><\/div>'),i.shipmentType=="SP")r=r+'<div style="margin-left: -43px;margin-top: 50px;"><i class="carrier-select smallparcel"><\/i><\/div>';else if(i.shipmentType=="LTL"&&(r=r+'<div style="margin-left: -43px;margin-top: 50px;"><i class="carrier-select ltl"><\/i><\/div>',u='<div style="margin-left: -43px;margin-top: 50px;"><i class="carrier-select ltl"><\/i><\/div>',!i.ispartnered))return u;return r+"<\/div>"}},{data:"totalWeight",title:"Weight",orderable:!1,className:"carrier-truncate",render:function(t,i,r){if(localStorage.getItem("Metricsystem")=="true"){unit=1;var u=Math.round(t/2.20462),f=n(r.totalCFT*.0283168,2);return t!=0?'<div class="container"> <div class="row mx-auto"><div class="col"><div style="opacity: 0.3;"><i class="carrier-select weight"><\/i><\/div><div class="carrier-weight">'+u+'<\/div><\/div><div class="col"><div style="opacity: 0.3;"><i class="carrier-select cubic"><\/i><\/div><div class="carrier-size">'+f+"<\/div><\/div><\/div><\/div>":'<div class="container"> <div class="row mx-auto"><div class="col"><div style="opacity: 0.3;"><i class="carrier-select weight"><\/i><\/div><div class="carrier-weight">'+u+'<\/div><\/div><div class="col"><div style="opacity: 0.3;"><i class="carrier-select cubic"><\/i><\/div><div class="carrier-size">'+f+"<\/div><\/div><\/div><\/div>"}return t!=0?'<div class="container"> <div class="row mx-auto"><div class="col"><div style="opacity: 0.3;"><i class="carrier-select weight"><\/i><\/div><div class="carrier-weight">'+t+'<\/div><\/div><div class="col"><div style="opacity: 0.3;"><i class="carrier-select cubic"><\/i><\/div><div class="carrier-size">'+r.totalCFT+"<\/div><\/div><\/div><\/div>":'<div class="container"> <div class="row mx-auto"><div class="col"><div style="opacity: 0.3;"><i class="carrier-select weight"><\/i><\/div><div class="carrier-weight">'+t+'<\/div><\/div><div class="col"><div style="opacity: 0.3;"><i class="carrier-select cubic"><\/i><\/div><div class="carrier-size">'+r.totalCFT+"<\/div><\/div><\/div><\/div>"}},{data:"fbaItems",title:"Items",orderable:!1,render:function(n,t,i,r){var u="",f="",e=0;return u=u+'<div class="container"><div class="row mx-auto">',n.forEach(function(n){f=n.imageLink;var t="";f[0]=="d"&&(t="width:75px;");u=f.length<1?u+'<div id="'+n.fbaItemsId+"-"+e+'"><a href="#" onclick="itemasin(\''+n.fbaItemsId+"','"+r.row+"','"+n.fbaItemsId+"-"+e+'\' )"><i class="carrier-select unknown"><\/i><\/a><\/div><div><div style="display: flex;justify-content: space-evenly;"><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-up mdc-text-green"><\/i><\/div><div class="carrier-items">'+n.quantityShipped+'<\/div><\/div><\/div><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-down mdc-text-blue"><\/i><\/div><div class="carrier-items">'+n.quantityReceived+'<\/div><\/div><\/div><\/div><div><div style="display: flex;justify-content: center;"><div><i class="zmdi zmdi-codepen"><\/i><\/div><div class="carrier-items">&nbsp;'+n.quantityInCase+"<\/div><\/div><\/div><\/div><\/div>":n.canModifyASIN&&f.length>0?u+'<div style="width: 100px;" class="col-sm-3" id="'+n.fbaItemsId+"-"+e+'x"><a href="#" onclick="itemasin(\''+n.fbaItemsId+"','"+r.row+"','"+n.fbaItemsId+"-"+e+'x\' )"><img src="'+f+'"><\/a><\/div><div><div style="display: flex;justify-content: space-evenly;"><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-up mdc-text-green"><\/i><\/div><div class="carrier-items">'+n.quantityShipped+'<\/div><\/div><\/div><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-down mdc-text-blue"><\/i><\/div><div class="carrier-items">'+n.quantityReceived+'<\/div><\/div><\/div><\/div><div><div style="display: flex;justify-content: center;"><div><i class="zmdi zmdi-codepen"><\/i><\/div><div class="carrier-items">&nbsp;'+n.quantityInCase+"<\/div><\/div><\/div><\/div><\/div>":u+'<div style="width: 100px;" class="col-sm-3"><img style="'+t+'" src="'+f+'"><div><div style="display: flex;justify-content: space-evenly;"><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-up mdc-text-green"><\/i><\/div><div class="carrier-items">'+n.quantityShipped+'<\/div><\/div><\/div><div><div style="display: flex"><div><i class="zmdi zmdi-long-arrow-down mdc-text-blue"><\/i><\/div><div class="carrier-items">'+n.quantityReceived+'<\/div><\/div><\/div><\/div><div><div style="display: flex;justify-content: center;"><div><i class="zmdi zmdi-codepen"><\/i><\/div><div class="carrier-items">&nbsp;'+n.quantityInCase+"<\/div><\/div><\/div><\/div><\/div>";e++}),u=u+"<\/div><\/div>"}},{data:"destinationFulfillmentCenterId",title:"Warehouse",className:"carrier-truncate",orderable:!1,render:function(n,t,i){return'<div style="display: flex;"><div style="opacity: 0.4;"><i class="country-select-flag '+i.destinationCountryCode.toLowerCase()+'flag"><\/i><\/div><div class="carrier-wh">'+n+"<\/div><\/div>"}},{data:"shipmentId",title:"ship",className:"carrier-truncate",orderable:!1,render:function(n,t,i){return!i.localyCLOSED&&i.shipmentStatus!="RECEIVING"?'<div class="btn-group-vertical"><a class="btn btn-outline-primary btn-sm" href="'+i.trackUri+'" role="button" target="_blank">Ship<\/a><a class="btn btn-outline-primary btn-sm" href="/FBAInboundShipments/Invoice?shipmentId='+n+'" role="button" target="_blank">Invoice<\/a><a class="btn btn-outline-primary btn-sm" href="/FBAInboundShipments/PackingList?shipmentId='+n+"&unit="+unit+'" role="button" target="_blank" onclick="checkUnit()">Packing List<\/a><\/div>':""}},],loaded;$(document).ready(function(){var n;$.ajax({url:"/FBAInboundShipments/GetFBAInboundShipments/",type:"GET",data:n,success:function(n){n.success&&(fbaInbounds=$.grep(n.data,function(n){return!n.arrived&&!n.problem&&!n.working}),fbaClosing=$.grep(n.data,function(n){return n.arrived&&!n.problem&&!n.working}),fbaProblem=$.grep(n.data,function(n){return n.problem}),fbaWorking=$.grep(n.data,function(n){return n.working}),fbaProblemLength=fbaProblem.length,i(fbaInbounds,fbaInbounds.length,fbaWorking.length,fbaClosing.length,fbaProblem.length),loaded=!0)}})});pending_fbainbounds=!1;$(document).ready(function(){$('a[data-bs-toggle="tab"]').on("shown.bs.tab",function(n){var i=$(n.target).attr("href");i=="#pending-fbainbounds"?pending_fbainbounds||(pending_fbainbounds=!0):i=="#closing-fbainbounds"?loaded?closing_fbainbounds||(r(fbaClosing,fbaClosing.length),closing_fbainbounds=!0):$('[href="#pending-fbainbounds"]').tab("show"):i=="#problem-fbainbounds"?loaded?problem_fbainbounds||(u(fbaProblem,fbaProblem.length),problem_fbainbounds=!0):$('[href="#pending-fbainbounds"]').tab("show"):i=="#working-fbainbounds"&&(loaded?working_fbainbounds||(t(fbaWorking,fbaWorking.length),working_fbainbounds=!0):$('[href="#pending-fbainbounds"]').tab("show"))})});function t(n,t){fbaWorkingtable=$("#workingfbain").DataTable({data:n,columns:workingFBAcolumnDefs,responsive:!0,rowCallback:function(){$("#working-fbain").text("Working ("+t+")")}})}function i(n,t,i,r,u){fbaInboundstable=$("#inboundfba").DataTable({data:n,columns:inboundFBAcolumnDefs,responsive:!0,createdRow:function(n,t){var i=t.arrived;i&&$(n).addClass("carrier-finished")},rowCallback:function(n,i,r){i.arrived&&rtable.push(r);$("#pending-fbain").text("Shipped ("+t+")")},initComplete:function(){showOpacity("inboundfba","tableskeleton",fbaInbounds);$("#working-fbain").text("Working ("+i+")");$("#closing-fbain").text("Arrived ("+r+")");$("#problem-fbain").text("Problem ("+u+")")}})}function r(n,t){fbainClosingTable=$("#closingfbain").DataTable({data:n,columns:closingFBAcolumnDefs,responsive:!0,createdRow:function(n,t){var i=t.arrived;i&&$(n).addClass("carrier-finished")},rowCallback:function(){$("#closing-fbain").text("Arrived ("+t+")")}})}function u(n,t){fbainProblemTable=$("#problemfbain").DataTable({data:n,columns:problemFBAcolumnDefs,responsive:!0,createdRow:function(n){$(n).addClass("carrier-finished")},rowCallback:function(){$("#problem-fbain").text("Problem ("+t+")")},initComplete:function(){}})}function f(n){var r=new Set(rtable),u=new Set(rfbainClosingTable),f=n.oInstance.api(),t=0,i=0;for(let n of r)table.row(n-t).remove().draw(),t++;for(let n of u)f.row(n-i).remove().draw(),i++}EditComponent=function(n,t){$("#EditModal").modal("show");fbaInboundstable.data().each(function(i){i.counter++;i.shipmentId==n&&($("#estDeliveryDate").val(i.estDeliveryDate.split("T")[0]),$("#shipmentId").val(i.shipmentId),$("#cellrow").attr("title",t),shipmentId=i.shipmentId,estDeliveryDate=i.estDeliveryDate.split("T")[0])})};$("#EditModal").on("click","#EditBtn",function(){if(newestDeliveryDate=$("#EditModal #estDeliveryDate").val(),newestDeliveryDate!=estDeliveryDate){if(formEditChanged=!0,$("#formEdit").validate(),$("#formEdit").valid()){var n=$("#EditModal #shipmentId").val(),t=$("#EditModal #formEdit").serialize();addWaitingDotsToButton("EditBtn","EditModalFooter");setTimeout(function(){$("#EditModal").modal("hide")},2e3);$.ajax({url:"/FBAInboundShipments/Edit/"+n,type:"POST",data:t,success:function(n){n.success?(createMiniAlert("Ok","","","success"),$("#EditModal").modal("hide"),fbaInboundstable.cell($("#EditModal #cellrow").attr("title"),6).data(newestDeliveryDate).draw()):createAlert(n.responseTitle,n.responseSummary,n.responseText);removeWaitingDotsToButton("EditBtn","EditModalFooter")}})}}else $("#EditModal").modal("hide")});tracking=function(n,t){if(trackingmodalLoaded[t])$("#tracking").modal("show"),$("#tracking-body").html(trackingModalBody[t]);else{var i="/FBAInboundShipments/Tracking/?shipmentId="+n;$.get(i,function(n){trackingModalBody[t]=n;$("#tracking-body").html(trackingModalBody[t]);$("#tracking").modal("show");trackingmodalLoaded[t]=!0})}};$("#tracking").on("click",".tracking-result",function(){var n=$(this).attr("id"),t=$("#tracking #tracking-await-"+n).prop("disabled");t||($("#tracking #tracking-await-"+n).prop("disabled",!0),$("#tracking #tracking-await-"+n).css("pointer-events","none"),$("#tracking #tracking-await-"+n).css("cursor","wait"),$("#tracking #tracking-await-"+n+" span i").addClass("zmdi zmdi-rotate-right zmdi-hc-spin"),$.ajax({url:"/FBAInboundShipments/GetTrackingResult/?trackingNumber="+n,type:"GET",success:function(t){t.success?(createMiniAlert("Ok","","","success"),t.code==0?($("#"+n).css("background-color","darkgreen"),$("#"+n).html('<i class="zmdi zmdi-info-outline mdc-text-light-green zmdi-hc-1x"><\/i>DELIVERED').show(),$("#tracking #trackingDeliveryDate-"+n).html(t.date),$("#tracking #tackingService-"+n).html(t.serviceType),$("#tracking #trackingPickupDate-"+n).html("")):t.code==1?($("#"+n).css("background-color","darkslategray"),$("#"+n).html('<i class="zmdi zmdi-info-outline mdc-text-light-green zmdi-hc-1x"><\/i>'+t.status).show(),$("#tracking #trackingDeliveryDate-"+n).html(t.scheduledDeliveryDate),$("#tracking #tackingService-"+n).html(t.serviceType),$("#tracking #trackingPickupDate-"+n).html(t.pickUpDate)):t.code==2&&($("#"+n).html('<i class="zmdi zmdi-info-outline mdc-text-light-green zmdi-hc-1x"><\/i>'+t.status).show(),$("#tracking #trackingDeliveryDate-"+n).html("-"),$("#tracking #tackingService-"+n).html(t.serviceType),$("#tracking #trackingPickupDate-"+n).html("Pickedup on: "+t.pickUpDate))):createAlert(t.responseTitle,t.responseSummary,t.responseText);$("#tracking #tracking-await").css("cursor","default");$("#tracking #tracking-await span i").removeClass("zmdi zmdi-rotate-right zmdi-hc-spin")}}))});$(function(){$("#azs0weight").change(function(){initUnit||$("#azs0weight").click()})});function n(n,t){var r=!1,i;return t===undefined&&(t=0),n<0&&(r=!0,n=n*-1),i=Math.pow(10,t),n=parseFloat((n*i).toFixed(11)),n=(Math.round(n)/i).toFixed(2),r&&(n=(n*-1).toFixed(2)),n}closeFBA=function(n,t){$("#CloseModal").modal("show");$("#fbashipmentId").val(n);$("#fbashipmentId").text(n);$("#closefbacellrow").attr("title",t)};$("#CloseBtn").on("click",function(){var n=$("#CloseModal #fbashipmentId").val();addWaitingDotsToButton("CloseBtn","CloseModalFooter");setTimeout(function(){$("#CloseModal").modal("hide")},2e3);$.ajax({url:"/FBAInboundShipments/CloseFBAShipment/?id="+n,type:"POST",data:null,success:function(n){if(n.success){createMiniAlert("Ok","","","success");fbaProblemLength--;$("#problem-fbain").text("Problem ("+fbaProblemLength+")");var t=parseInt($("#CloseModal #closefbacellrow").attr("title"));fbainProblemTable.row(t).remove().draw();$("#CloseModal").modal("hide")}else createAlert(n.responseTitle,n.responseSummary,n.responseText);removeWaitingDotsToButton("CloseBtn","CloseModalFooter")}})});itemasin=function(n,t,i){$("#ASINModal").modal("show");$("#fbashipmentItemId").val(n);$("#itemclass").val(i);$("#asincellrow").attr("title",t)};$("#ASINBtn").on("click",function(){var n=$("#ASINModal #fbashipmentItemId").val(),t=$("#ASINModal #newasin").val();addWaitingDotsToButton("ASINBtn","ASINModalFooter");setTimeout(function(){$("#ASINModal").modal("hide")},2e3);$.ajax({url:"/FBAInboundShipments/UpdateASIN/?id="+n+"&asin="+t,type:"POST",data:null,success:function(t){if(t.success){createMiniAlert("Ok","","","success");var r=$("#ASINModal #asincellrow").attr("title"),i=$("#ASINModal #itemclass").val(),u='<a href="#" onclick="itemasin(\''+n+"','"+r+"','"+i+'\' )"><img src="'+t.img+'"><\/a>';$("#"+i).html(u);$("#ASINModal").modal("hide")}else createAlert(t.responseTitle,t.responseSummary,t.responseText);removeWaitingDotsToButton("ASINBtn","ASINModalFooter")}})})}if($("#"+Homepage+pagevar).length>0){$(document).ready(function(){function t(){$.ajax({url:"/Home/GetSalesData/",type:"GET","async":!0,success:function(t){t.success&&am4core.ready(function(){var i,e;if(am4core.ready(function(){todayTopAsinSaleschart=null;dailychart=null;todayTopAsinSaleschart=am4core.create("todayTopAsinSaleschartdiv",am4charts.XYChart);dailychart=am4core.create("dailychartdiv",am4charts.XYChart)}),t.updatedOn){for(h(t.todayTopAsinSaleschart.reverse(),t.updatedOn),c(t.overallSalesData),$("#homemarkets").html(""),i=0;i<t.activatedMarketPlaces.length;i++)$("#homemarkets").append('<span data-toggle="tooltip" data-placement="bottom" title="'+t.activatedMarketPlaces[i]+'"><i class="flag-small '+t.activatedMarketPlaces[i].toLocaleLowerCase()+'flag" style="cursor: auto;"><\/i><\/span>');var u=new Date(t.updatedOn),o=u.toDateString(),s=u.toLocaleTimeString(),l=o+"  "+s;$("#updatedOn").text(t.updatedOn+" "+$("#minutesagotext").text());clearInterval(n);n=setInterval(r,6e4);r();$("#hp-todayorders").html(t.storestats.todayorders);$("#hp-ydorders").html(t.storestats.ydorders);$("#hp-todaysales").html(t.storestats.todaysales);$("#hp-ydsales").html(t.storestats.ydsales);$("#hp-todayrevenue").html(t.storestats.todayrevenue);$("#hp-ydrevenue").html(t.storestats.ydrevenue);$("#hp-todayprofit").html(t.storestats.todayprofit);$("#hp-ydprofit").html(t.storestats.ydprofit);$("#hp-canceled").html(t.storestats.canceled);$("#hp-canceledpct").html(t.storestats.canceledpct+"%");$("#hp-refunded").html(t.storestats.refunded);$("#hp-refundedpct").html(t.storestats.refundedpct+"%");$("#hp-dayskept").html(t.storestats.dayskept+'<span style="font-size: xx-small;"> Day<\/span>');$("#hp-reordered").html(t.storestats.reordered);$("#hp-reorderedpct").html(t.storestats.reorderedpct+"%");$("#hp-multiItem").html(t.storestats.multiItem);$("#hp-multiItempct").html(t.storestats.multiItempct+"%");$("#salesCurrency").html(t.storestats.localCurrency);$("#profitCurrency").html(t.storestats.localCurrency);$("#customerpayedCurrency").html(t.storestats.localCurrency);e=document.querySelectorAll(".countup");e.forEach(f)}})}})}var n;t();setInterval(t,3e5);$.ajax({url:"/Home/Getcards/",type:"GET","async":!0,success:function(n){var t,r;if(n.success){for(i=0;i<n.cardsHeadders.length;i++)t=s(n.cardsHeadders[i].headderId,n.cardsHeadders[i].cardId,n.cardsHeadders[i].headderTitle,n.cardsHeadders[i].headderCount,n.cardsHeadders[i].headderColor,n.cardsHeadders[i].headderIcon),$("#cardssection").append(t);for(i=0;i<n.cards.length;i++)r=o(n.cards[i].cardId,n.cards[i].cardtitle,n.cards[i].cardtitleicon,n.cards[i].cardbgicon,n.cards[i].cardsubtitle,n.cards[i].cardcolor,n.cards[i].cardvalue,n.cards[i].link),$("#"+n.cards[i].cardId).append(r)}}})});const n=1e3/60,t=Math.round(500/n),u=n=>n*(2-n),f=i=>{let r=0;var f=!1;const o=parseInt(i.innerHTML,10);i.innerHTML.includes("%")&&(f=!0);const s=setInterval(()=>{r++;const h=u(r/t),n=Math.round(o*h);parseInt(i.innerHTML,10)!==n&&(i.innerHTML=f?n+"%":e(n));r===t&&clearInterval(s)},n)};function e(n){while(/(\d+)(\d{3})/.test(n.toString()))n=n.toString().replace(/(\d+)(\d{3})/,"$1,$2");return n}function r(){var n=parseInt($("#updatedOn").text());n++;$("#updatedOn").text(n+" "+$("#minutesagotext").text())}function o(n,t,i,r,u,f,e,o){var s="dark";return f=="danger"&&(s="white"),'<div class="col-sm-12 col-md-6 col-xl-4 col-xxl-3"><a href="'+o+'" class="text-'+s+'" style="text-decoration: none;"><div class="card dbcards border rounded-3 bg-'+f+' bg-gradient"><div class="card-body"><div class="row"><div class="text-dark"><p class="overlay-content cardbgtitle text-'+s+'">'+t+'<\/p><span class="cardbgico zmdi-hc-stack zmdi-hc-lg"><i class="zmdi zmdi-circle zmdi-hc-stack-2x"><\/i><i class="zmdi zmdi-'+i+' zmdi-hc-stack-1x zmdi-hc-inverse"><\/i><\/span><\/div><div><div>'+u+'<\/div><div><h1 class="card-title ">'+e+'<\/h1><\/div><\/div><\/div><\/div><div class = "ico-card"><i class="zmdi zmdi-'+r+'"> <\/i><\/div><\/div><\/a><\/div>'}function s(n,t,i,r,u,f){var e="show";return n=="infocardsheadder"&&(e=""),'<div id="'+n+'" class="row border rounded"><a class="btn text-start p-0" data-bs-toggle="collapse" href="#'+t+'" role="button" aria-expanded="false" aria-controls="'+t+'"><div class="bg-'+u+' bg-gradient" style="display: flex; align-self: center;"><div class="col-sm-1 text-center"><span class="zmdi-hc-stack zmdi-hc-lg"><i class="zmdi zmdi-circle zmdi-hc-stack-2x"><\/i><i class="zmdi zmdi-'+f+' zmdi-hc-stack-1x zmdi-hc-inverse"><\/i><\/span><\/div><div class="col-sm-9"><button type="button" class="btn position-relative"><h3>'+i+'<\/h3> <span class="position-absolute start-100 translate-middle badge rounded-pill bg-secondary" style="top: 10px;">'+r+'<\/span><\/button><\/div><\/div><\/a><div id="'+t+'" class="collapse '+e+' row text-center "><\/div><\/div>'}function h(n){function ct(){if(!o){o=todayTopAsinSaleschart.tooltipContainer.createChild(am4core.Container);o.background.fill=am4core.color("#fff");o.width=am4core.percent(100);o.height=am4core.percent(100);var n=o.createChild(am4core.Label);n.text="Loading ...";n.align="center";n.valign="middle";n.dy=50;hourglass=o.createChild(am4core.Image);hourglass.href="https://s3-us-west-2.amazonaws.com/s.cdpn.io/t-160/hourglass.svg";hourglass.align="center";hourglass.valign="middle";hourglass.horizontalCenter="middle";hourglass.verticalCenter="middle";hourglass.scale=.7}o.hide(0);o.show();clearInterval(rt);rt=setInterval(function(){hourglass.animate([{from:0,to:360,property:"rotation"}],2e3)},3e3)}function lt(){o.hide();clearInterval(rt)}var p=50,a=75,ut=25,v=40,ft=30,et=25,ot=-70,w=-10,b=60,k=-50,d=130,g=-50,nt=47,tt=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),c,e,y,u,f,t,l,i,st,h,s,r,ht,it;tt<600?(p=33,a=50,ut=12,v=20,ft=15,et=10,ot=-90,w=-70,b=90,k=-30,d=90,g=-40,nt=30):tt>=600&&tt<1024&&(p=40,a=60,ut=19,v=30,ft=20,et=15,ot=-80,w=-50,b=75,k=-40,d=110,g=-75,nt=45);todayTopAsinSaleschart.data=n;todayTopAsinSaleschart.responsive.enabled=!0;todayTopAsinSaleschart.maskBullets=!1;todayTopAsinSaleschart.hiddenState.properties.opacity=0;todayTopAsinSaleschart.paddingLeft=b;todayTopAsinSaleschart.paddingTop=60;todayTopAsinSaleschart.tooltip.getFillFromObject=!0;todayTopAsinSaleschart.tooltip.background.fill=am4core.color("#67b7dc");todayTopAsinSaleschart.tooltip.opacity=.1;c=todayTopAsinSaleschart.yAxes.push(new am4charts.CategoryAxis);c.dataFields.category="id";c.renderer.minGridDistance=40;c.renderer.labels.template.disabled=!0;c.renderer.opposite=!0;e=todayTopAsinSaleschart.xAxes.push(new am4charts.ValueAxis);e.min=0;e.renderer.minGridDistance=1;e.labelsEnabled=!0;e.maxPrecision=0;e.renderer.labels.template.disabled=!0;e.strictMinMax=!0;e.max=Math.max.apply(Math,n.map(function(n){return n.sales}));e.max==0&&(e.max=1);y=todayTopAsinSaleschart.xAxes.push(new am4charts.ValueAxis);y.min=0;y.labelsEnabled=!0;y.renderer.minGridDistance=30;u=todayTopAsinSaleschart.series.push(new am4charts.ColumnSeries);u.dataFields.valueX="sales";u.dataFields.categoryY="id";u.dataFields.categoryX="marketPlace";u.sequencedInterpolation=!0;u.defaultState.transitionDuration=3e3;f=todayTopAsinSaleschart.series.push(new am4charts.StepLineSeries);f.dataFields.valueX="orders";f.dataFields.categoryY="id";f.dataFields.categoryX="marketPlace";f.sequencedInterpolation=!0;f.defaultState.transitionDuration=3e3;f.opacity=.25;f.strokeWidth=5;f.noRisers=!0;f.startLocation=.15;f.endLocation=.85;f.stroke=am4core.color("red");t=u.columns.template;t.width=am4core.percent(10);t.maxWidth=50;t.column.cornerRadius(10,10,10,10);t.strokeOpacity=10;t.strokeWidth=2;t.strokeOpacity=1;t.stroke=am4core.color("#ffffff");t.tooltipText="Orders: {orders}\nSales: {sales}";t.tooltipText.opacity=.5;u.heatRules.push({target:u.columns.template,property:"fill",dataField:"valueX",min:am4core.color("#95c8d8"),max:am4core.color("#111e6c")});u.mainContainer.mask=undefined;l=u.columns.template.states.create("hover");l.properties.scale=1.05;l.properties.fillOpacity=.5;l.properties.cornerRadiusTopLeft=35;l.properties.cornerRadiusTopRight=35;l.properties.cursorOverStyle=am4core.MouseCursorStyle.pointer;i=t.createChild(am4charts.CircleBullet);i.circle.radius=p;i.valign="bottom";i.properties.dy=k;i.horizontalCenter="left";i.isMeasured=!0;i.mouseEnabled=!1;i.verticalCenter="bottom";i.interactionsEnabled=!1;i.dx=w;i.cursorOverStyle=am4core.MouseCursorStyle.pointer;st=i.createChild(am4core.Circle);st.adapter.add("radius",function(n,t){var i=t.parent;return i.circle.pixelRadius+1});h=i.createChild(am4core.Image);h.width=a;h.height=a;h.horizontalCenter="middle";h.verticalCenter="middle";h.propertyFields.href="productimage";h.adapter.add("mask",function(n,t){var i=t.parent;return i.circle});s=t.createChild(am4core.Image);s.width=v;s.height=v;s.properties.dy=nt;s.properties.dx=g;s.properties.opacity=.75;s.propertyFields.href="marketPlace";s.adapter.add("href",function(n,t){var i=t.dataItem;if(i)return"https://cdn.azszero.com/flags/flags/4x3/"+i.categoryX.toLowerCase()+".svg"});r=u.bullets.push(new am4charts.LabelBullet);r.label.text="{sales}";r.label.fontSize=20;r.label.fill=am4core.color("#bbb").brighten(.25);r.locationY=.5;r.zIndex=2;r.label.background=new am4core.RoundedRectangle;r.label.background.cornerRadius(5,5,5,5);r.label.background.fill=am4core.color("#eee");r.label.background.stroke=am4core.color("#555");r.label.background.strokeOpacity=1;r.label.padding(4,8,4,8);r.locationY=.5;t.events.on("hit",function(){window.location.href="/ProductSales/Index/"},this);ht=todayTopAsinSaleschart.data.length*d-c.pixelHeight;it=todayTopAsinSaleschart.pixelHeight+ht;todayTopAsinSaleschart.svgContainer.htmlElement.style.height=it+"px";dailychart.svgContainer.htmlElement.style.height=it+"px";todayTopAsinSaleschart.events.on("datavalidated",function(){lt()});let o,rt;ct()}function c(n){am4core.ready(function(){function e(){if(!t){t=dailychart.tooltipContainer.createChild(am4core.Container);t.background.fill=am4core.color("#fff");t.width=am4core.percent(100);t.height=am4core.percent(100);var n=t.createChild(am4core.Label);n.text="Loading ...";n.align="center";n.valign="middle";n.dy=50;let i=t.createChild(am4core.Image);i.href="https://s3-us-west-2.amazonaws.com/s.cdpn.io/t-160/hourglass.svg";i.align="center";i.valign="middle";i.horizontalCenter="middle";i.verticalCenter="middle";i.scale=.7}t.hide(0);t.show();clearInterval(u);u=setInterval(function(){hourglass.animate([{from:0,to:360,property:"rotation"}],2e3)},3e3)}function o(){t.hide();clearInterval(u)}var r,f,i;dailychart.numberFormatter.numberFormat={precision:-1,decimalSeparator:",",thousandsSeparator:"####"};dailychart.data=n;dailychart.cursor=new am4charts.XYCursor;dailychart.cursor.behavior="none";dailychart.maxZoomLevel=1;dailychart.zoomOutButton.disabled=!0;r=dailychart.xAxes.push(new am4charts.CategoryAxis);r.dataFields.category="date";r.renderer.grid.template.location=0;r.renderer.minGridDistance=30;f=dailychart.yAxes.push(new am4charts.ValueAxis);i=dailychart.series.push(new am4charts.ColumnSeries);i.dataFields.valueY="sales";i.dataFields.categoryX="date";i.name="Sales";i.tooltipText="{categoryX}: [bold]{valueY}";i.strokeWidth=3;i.yAxis=f;dailychart.events.on("datavalidated",function(){o()});let t,u;e()})}}if($("#"+InventoryManagementspage+pagevar).length>0){$("#"+InventoryManagementspage+sidevar).addClass(activeclass);var table2,table3,table4,tableOverStock,cdata=[],vcdata=[],cdataread=!1,delrow=!1,activetab=0,initUnit=!0,delstockrow=!1,shippingPlanstbl,vendorsOrderstbl,outofstockTable,shipImmediatlyTable,shipnowTable,planningTable,preplanningTable,overstockedTable,outofstocknosalesTable,overstockednosalesTable,stuckInboundTable,lateInbondTable,outofstockTableData,shipImmediatlyTableData,shipnowTableData,planningTableData,preplanningTableData,overstockedTableData,outofstocknosalesTableData,overstockednosalesTableData,stuckInboundTableData,lateInbondTableData,inventorySettingsTable,inventorySettingsTableData,inventorysettingstab=!1,globalInventorySettingsTab=!1,shipImmediatlyColumnDefs=[{data:"productCountry",title:"From",orderable:!0,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"marketplaceId",title:"To",orderable:!0,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"recommendedShippedQty",title:"Send",type:"num",render:function(n,t,i){if(t==="sort")return parseInt(n);var r=i.weight,u=i.volumeWeight139,f=(Math.ceil(i.volumeWeight139*139/166*10)/10).toFixed(1),h=i.cft;r=Math.ceil(r);u=Math.ceil(u);f=Math.ceil(f);var e=(Math.ceil(i.weight*.45359237*10)/10).toFixed(1),o=(Math.ceil(i.volumeWeight139*.45359237*10)/10).toFixed(1),s=(Math.ceil(i.volumeWeight139*139/166*.45359237*10)/10).toFixed(1),c=(Math.ceil(i.cft/35.315*10)/10).toFixed(1);return e=Math.ceil(e),o=Math.ceil(o),s=Math.ceil(s),i.totalBoxes!=0?localStorage.getItem("Metricsystem")=="true"?'<div style="display:flex"><div style="font-size: x-large;"><div>'+n+'<\/div><div><i class="carrier-select smallparcel">'+i.totalBoxes+'<\/i><\/div><\/div><div style="font-size: small;align-self: center;"><div><span data-toggle="tooltip" data-placement="top" title="The Total Weight" class="leftspan" style="cursor: context-menu;">'+e+'&nbsp;kg<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 5000" class="leftspan" style="cursor: context-menu;">'+o+'&nbsp;kg<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 6000" class="leftspan" style="cursor: context-menu;">'+s+'&nbsp;kg<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Cubic Meter" class="leftspan" style="cursor: context-menu;">'+c+"&nbsp;m³<\/span><\/div><\/div><\/div>":'<div style="display:flex"><div style="font-size: x-large;"><div>'+n+'<\/div><div><i class="carrier-select smallparcel">'+i.totalBoxes+'<\/i><\/div><\/div><div style="font-size: small;align-self: center;"><div><span data-toggle="tooltip" data-placement="top" title="The Total Weight" class="leftspan" style="cursor: context-menu;">'+r+'&nbsp;lb<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 139" class="leftspan" style="cursor: context-menu;">'+u+'&nbsp;lb<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 166" class="leftspan" style="cursor: context-menu;">'+f+'&nbsp;lb<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Cubic Feet" class="leftspan" style="cursor: context-menu;">'+h+"&nbsp;ft³<\/span><\/div><\/div><\/div>":'<div style="font-size: x-large;"><div>'+n+"<\/div><\/div>"}},{data:"avgDailyOrderItems",title:"Daily Sales",render:function(n,i,r){var u=Math.ceil(r.steadySalesIndex/10),o,f,e;for(u<0&&(u=0),u>10&&(u=10),o=t(r.steadySalesIndex),f="",e=0;e<u;e++)f=f+'<i class="zmdi zmdi-stop zmdi-hc-2x" style="color:'+o+'"><\/i>';return u!=0?"<div><div>"+n+"<\/div><div>"+f+"<\/div><\/div>":"<div><div>"+n+'<\/div><div><i class="zmdi zmdi-close zmdi-hc-3x mdc-text-red"><\/i><\/div><\/div>'}},{data:"totalSupplyQuantity",title:"FBA Qty",type:"num",render:function(n,t,i){if(t==="sort")return parseInt(n);var u=r(i.alertType,i.supplyDays);return'<div><div class="row"><div style="width: 50%;"><i class="zmdi zmdi-circle zmdi-hc-2x" style="color:'+u+'; "><\/i><\/div><div style="width: 50%;font-weight: bold;font-size: larger;">'+n+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">inbound:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.inbound+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">Supply Days:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.supplyDays+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">FF Dayss:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.totalFulfillmentDays+"<\/div><\/div><\/div>"}},{data:"defaultShippingMethod",title:"Ship By",type:"num",render:function(t,i,r){if(i==="sort")return parseInt(r.supplyDays);var u=n(t);return"<div>"+u+'<div class="tdshipb4date" style="font-size: x-large;font-weight: bold;color: red;">NOW<\/div><div style="font-size: xx-small;font-weight: 500;"><div>OOS Date: '+r.dateOutOfStock+'<\/div><\/div><div class="daysleftnum" style="color: red;font-weight: bold;">'+r.daysLateToShip+" Days Late<\/div><\/div>"}},{data:"notes",title:"Notes"},],shipnowColumnDefs=[{data:"productCountry",title:"From",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"marketplaceId",title:"To",orderable:!0,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"recommendedShippedQty",title:"Send",type:"num",render:function(n,t,i){if(t==="sort")return parseInt(n);var r=i.weight,u=i.volumeWeight139,f=(Math.ceil(i.volumeWeight139*139/166*10)/10).toFixed(1),h=i.cft;r=Math.ceil(r);u=Math.ceil(u);f=Math.ceil(f);var e=(Math.ceil(i.weight*.45359237*10)/10).toFixed(1),o=(Math.ceil(i.volumeWeight139*.45359237*10)/10).toFixed(1),s=(Math.ceil(i.volumeWeight139*139/166*.45359237*10)/10).toFixed(1),c=(Math.ceil(i.cft/35.315*10)/10).toFixed(1);return e=Math.ceil(e),o=Math.ceil(o),s=Math.ceil(s),i.totalBoxes!=0?localStorage.getItem("Metricsystem")=="true"?'<div style="display:flex"><div style="font-size: x-large;"><div>'+n+'<\/div><div><i class="carrier-select smallparcel">'+i.totalBoxes+'<\/i><\/div><\/div><div style="font-size: small;align-self: center;"><div><span data-toggle="tooltip" data-placement="top" title="The Total Weight" class="leftspan" style="cursor: context-menu;">'+e+'&nbsp;kg<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 5000" class="leftspan" style="cursor: context-menu;">'+o+'&nbsp;kg<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 6000" class="leftspan" style="cursor: context-menu;">'+s+'&nbsp;kg<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Cubic Meter" class="leftspan" style="cursor: context-menu;">'+c+"&nbsp;m³<\/span><\/div><\/div><\/div>":'<div style="display:flex"><div style="font-size: x-large;"><div>'+n+'<\/div><div><i class="carrier-select smallparcel">'+i.totalBoxes+'<\/i><\/div><\/div><div style="font-size: small;align-self: center;"><div><span data-toggle="tooltip" data-placement="top" title="The Total Weight" class="leftspan" style="cursor: context-menu;">'+r+'&nbsp;lb<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 139" class="leftspan" style="cursor: context-menu;">'+u+'&nbsp;lb<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 166" class="leftspan" style="cursor: context-menu;">'+f+'&nbsp;lb<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Cubic Feet" class="leftspan" style="cursor: context-menu;">'+h+"&nbsp;ft³<\/span><\/div><\/div><\/div>":'<div style="font-size: x-large;"><div>'+n+"<\/div><\/div>"}},{data:"avgDailyOrderItems",title:"Daily Sales",render:function(n,i,r){var u=Math.ceil(r.steadySalesIndex/10),o,f,e;for(u<0&&(u=0),u>10&&(u=10),o=t(r.steadySalesIndex),f="",e=0;e<u;e++)f=f+'<i class="zmdi zmdi-stop zmdi-hc-2x" style="color:'+o+'"><\/i>';return u!=0?"<div><div>"+n+"<\/div><div>"+f+"<\/div><\/div>":"<div><div>"+n+'<\/div><div><i class="zmdi zmdi-close zmdi-hc-3x mdc-text-red"><\/i><\/div><\/div>'}},{data:"totalSupplyQuantity",title:"FBA Qty",type:"num",render:function(n,t,i){if(t==="sort")return parseInt(n);var u=r(i.alertType,i.supplyDays);return'<div><div class="row"><div style="width: 50%;"><i class="zmdi zmdi-circle zmdi-hc-2x" style="color:'+u+'; "><\/i><\/div><div style="width: 50%;font-weight: bold;font-size: larger;">'+n+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">inbound:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.inbound+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">Supply Days:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.supplyDays+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">FF Dayss:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.totalFulfillmentDays+"<\/div><\/div><\/div>"}},{data:"defaultShippingMethod",title:"Ship By",type:"num",render:function(t,i,r){if(i==="sort")return parseInt(r.deadline);var f=n(t),u=o(r.daysLeftToShip);return"<div>"+f+'<div class="tdshipb4date" style="font-size: x-large;font-weight: bold;color: '+u+';">NOW<\/div><div style="font-size: xx-small;font-weight: 500;"><div>OOS Date: '+r.dateOutOfStock+'<\/div><div class="daysleftnum" style="color: '+u+';font-weight: bold;">'+r.deadline+" Days Deadline<\/div><\/div>"}},{data:"notes",title:"Notes"},],planningColumnDefs=[{data:"productCountry",title:"From",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"marketplaceId",title:"To",orderable:!0,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"recommendedShippedQty",title:"Send",type:"num",render:function(n,t,i){if(t==="sort")return parseInt(n);var r=i.weight,u=i.volumeWeight139,f=(Math.ceil(i.volumeWeight139*139/166*10)/10).toFixed(1),h=i.cft;r=Math.ceil(r);u=Math.ceil(u);f=Math.ceil(f);var e=(Math.ceil(i.weight*.45359237*10)/10).toFixed(1),o=(Math.ceil(i.volumeWeight139*.45359237*10)/10).toFixed(1),s=(Math.ceil(i.volumeWeight139*139/166*.45359237*10)/10).toFixed(1),c=(Math.ceil(i.cft/35.315*10)/10).toFixed(1);return e=Math.ceil(e),o=Math.ceil(o),s=Math.ceil(s),i.totalBoxes!=0?localStorage.getItem("Metricsystem")=="true"?'<div style="display:flex"><div style="font-size: x-large;"><div>'+n+'<\/div><div><i class="carrier-select smallparcel">'+i.totalBoxes+'<\/i><\/div><\/div><div style="font-size: small;align-self: center;"><div><span data-toggle="tooltip" data-placement="top" title="The Total Weight" class="leftspan" style="cursor: context-menu;">'+e+'&nbsp;kg<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 5000" class="leftspan" style="cursor: context-menu;">'+o+'&nbsp;kg<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 6000" class="leftspan" style="cursor: context-menu;">'+s+'&nbsp;kg<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Cubic Meter" class="leftspan" style="cursor: context-menu;">'+c+"&nbsp;m³<\/span><\/div><\/div><\/div>":'<div style="display:flex"><div style="font-size: x-large;"><div>'+n+'<\/div><div><i class="carrier-select smallparcel">'+i.totalBoxes+'<\/i><\/div><\/div><div style="font-size: small;align-self: center;"><div><span data-toggle="tooltip" data-placement="top" title="The Total Weight" class="leftspan" style="cursor: context-menu;">'+r+'&nbsp;lb<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 139" class="leftspan" style="cursor: context-menu;">'+u+'&nbsp;lb<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 166" class="leftspan" style="cursor: context-menu;">'+f+'&nbsp;lb<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Cubic Feet" class="leftspan" style="cursor: context-menu;">'+h+"&nbsp;ft³<\/span><\/div><\/div><\/div>":'<div style="font-size: x-large;"><div>'+n+"<\/div><\/div>"}},{data:"avgDailyOrderItems",title:"Daily Sales",render:function(n,i,r){var u=Math.ceil(r.steadySalesIndex/10),o,f,e;for(u<0&&(u=0),u>10&&(u=10),o=t(r.steadySalesIndex),f="",e=0;e<u;e++)f=f+'<i class="zmdi zmdi-stop zmdi-hc-2x" style="color:'+o+'"><\/i>';return u!=0?"<div><div>"+n+"<\/div><div>"+f+"<\/div><\/div>":"<div><div>"+n+'<\/div><div><i class="zmdi zmdi-close zmdi-hc-3x mdc-text-red"><\/i><\/div><\/div>'}},{data:"totalSupplyQuantity",title:"FBA Qty",type:"num",render:function(n,t,i){if(t==="sort")return parseInt(n);var u=r(i.alertType,i.supplyDays);return'<div><div class="row"><div style="width: 50%;"><i class="zmdi zmdi-circle zmdi-hc-2x" style="color:'+u+'; "><\/i><\/div><div style="width: 50%;font-weight: bold;font-size: larger;">'+n+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">inbound:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.inbound+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">Supply Days:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.supplyDays+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">FF Dayss:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.totalFulfillmentDays+"<\/div><\/div><\/div>"}},{data:"defaultShippingMethod",title:"Ship By",type:"num",render:function(t,i,r){if(i==="sort")return parseInt(r.dayslefttoship);var f=n(t),u=o(r.daysLeftToShip);return"<div>"+f+'<div class="tdshipb4date" style="font-size: x-large;font-weight: bold;color: '+u+';">'+r.dayLeftToShipDate+'<\/div><div style="font-size: xx-small;font-weight: 500;"><div>OOS Date: '+r.dateOutOfStock+'<\/div><div class="daysleftnum" style="color: '+u+';font-weight: bold;">'+r.daysLeftToShip+" Days Left<\/div><\/div>"}},{data:"notes",title:"Notes"},],preplanningColumnDefs=[{data:"productCountry",title:"From",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"marketplaceId",title:"To",orderable:!0,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"recommendedShippedQty",title:"Send",type:"num",render:function(n,t,i){if(t==="sort")return parseInt(n);var r=i.weight,u=i.volumeWeight139,f=(Math.ceil(i.volumeWeight139*139/166*10)/10).toFixed(1),h=i.cft;r=Math.ceil(r);u=Math.ceil(u);f=Math.ceil(f);var e=(Math.ceil(i.weight*.45359237*10)/10).toFixed(1),o=(Math.ceil(i.volumeWeight139*.45359237*10)/10).toFixed(1),s=(Math.ceil(i.volumeWeight139*139/166*.45359237*10)/10).toFixed(1),c=(Math.ceil(i.cft/35.315*10)/10).toFixed(1);return e=Math.ceil(e),o=Math.ceil(o),s=Math.ceil(s),i.totalBoxes!=0?localStorage.getItem("Metricsystem")=="true"?'<div style="display:flex"><div style="font-size: x-large;"><div>'+n+'<\/div><div><i class="carrier-select smallparcel">'+i.totalBoxes+'<\/i><\/div><\/div><div style="font-size: small;align-self: center;"><div><span data-toggle="tooltip" data-placement="top" title="The Total Weight" class="leftspan" style="cursor: context-menu;">'+e+'&nbsp;kg<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 5000" class="leftspan" style="cursor: context-menu;">'+o+'&nbsp;kg<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 6000" class="leftspan" style="cursor: context-menu;">'+s+'&nbsp;kg<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Cubic Meter" class="leftspan" style="cursor: context-menu;">'+c+"&nbsp;m³<\/span><\/div><\/div><\/div>":'<div style="display:flex"><div style="font-size: x-large;"><div>'+n+'<\/div><div><i class="carrier-select smallparcel">'+i.totalBoxes+'<\/i><\/div><\/div><div style="font-size: small;align-self: center;"><div><span data-toggle="tooltip" data-placement="top" title="The Total Weight" class="leftspan" style="cursor: context-menu;">'+r+'&nbsp;lb<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 139" class="leftspan" style="cursor: context-menu;">'+u+'&nbsp;lb<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Shipping Weight Based on 166" class="leftspan" style="cursor: context-menu;">'+f+'&nbsp;lb<\/span><\/div><div><span data-toggle="tooltip" data-placement="top" title="Cubic Feet" class="leftspan" style="cursor: context-menu;">'+h+"&nbsp;ft³<\/span><\/div><\/div><\/div>":'<div style="font-size: x-large;"><div>'+n+"<\/div><\/div>"}},{data:"avgDailyOrderItems",title:"Daily Sales",render:function(n,i,r){var u=Math.ceil(r.steadySalesIndex/10),o,f,e;for(u<0&&(u=0),u>10&&(u=10),o=t(r.steadySalesIndex),f="",e=0;e<u;e++)f=f+'<i class="zmdi zmdi-stop zmdi-hc-2x" style="color:'+o+'"><\/i>';return u!=0?"<div><div>"+n+"<\/div><div>"+f+"<\/div><\/div>":"<div><div>"+n+'<\/div><div><i class="zmdi zmdi-close zmdi-hc-3x mdc-text-red"><\/i><\/div><\/div>'}},{data:"totalSupplyQuantity",title:"FBA Qty",type:"num",render:function(n,t,i){if(t==="sort")return parseInt(n);var u=r(i.alertType,i.supplyDays);return'<div><div class="row"><div style="width: 50%;"><i class="zmdi zmdi-circle zmdi-hc-2x" style="color:'+u+'; "><\/i><\/div><div style="width: 50%;font-weight: bold;font-size: larger;">'+n+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">inbound:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.inbound+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">Supply Days:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.supplyDays+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">FF Dayss:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.totalFulfillmentDays+"<\/div><\/div><\/div>"}},{data:"defaultShippingMethod",title:"Plan By",type:"num",render:function(t,i,r){if(i==="sort")return parseInt(r.daysLeftToPrepare);var f=n(t),u=o(r.daysLeftToShip);return"<div>"+f+'<div class="tdshipb4date" style="font-size: x-large;font-weight: bold;color: '+u+';">'+r.daysLeftToPrepareDate+'<\/div><div style="font-size: xx-small;font-weight: 500;"><div>OOS Date: '+r.dateOutOfStock+'<\/div><div class="daysleftnum" style="color: '+u+';font-weight: bold;">'+r.daysLeftToPrepare+" Days Left<\/div><\/div>"}},{data:"notes",title:"Notes"},],outofstocknosalesColumnDefs=[{data:"productCountry",title:"From",orderable:!0,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"marketplaceId",title:"To",orderable:!0,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"notes",title:"Notes"},],overstockednosalesColumnDefs=[{data:"productCountry",title:"From",orderable:!0,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"marketplaceId",title:"To",orderable:!0,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"totalSupplyQuantity",title:"FBA Qty",type:"num",render:function(n,t,i){if(t==="sort")return parseInt(n);var u=r(i.alertType,i.supplyDays);return'<div><div class="row"><div style="width: 50%;"><i class="zmdi zmdi-circle zmdi-hc-2x" style="color:'+u+'; "><\/i><\/div><div style="width: 50%;font-weight: bold;font-size: larger;">'+n+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">inbound:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.inbound+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">Supply Days:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.supplyDays+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">FF Dayss:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.totalFulfillmentDays+"<\/div><\/div><\/div>"}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"notes",title:"Notes"},],overstockedColumnDefs=[{data:"productCountry",title:"From",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"marketplaceId",title:"To",orderable:!0,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"overstockDays",title:"Overstock Until",type:"num",render:function(n,t,i){if(t==="sort")return parseInt(n);return'<div><div class="tdshipb4date" style="font-size: medium;font-weight: bold;color: #DCDCDC;"><div>'+i.overstockDaysDate+"<\/div><div>"+i.overstockDays+" Days<\/div><div>"+i.overstockQty+" Pcs<\/div><\/div><\/div>"}},{data:"avgDailyOrderItems",title:"Daily Sales",render:function(n,i,r){var u=Math.ceil(r.steadySalesIndex/10),o,f,e;for(u<0&&(u=0),u>10&&(u=10),o=t(r.steadySalesIndex),f="",e=0;e<u;e++)f=f+'<i class="zmdi zmdi-stop zmdi-hc-2x" style="color:'+o+'"><\/i>';return u!=0?"<div><div>"+n+"<\/div><div>"+f+"<\/div><\/div>":"<div><div>"+n+'<\/div><div><i class="zmdi zmdi-close zmdi-hc-3x mdc-text-red"><\/i><\/div><\/div>'}},{data:"totalSupplyQuantity",title:"FBA Qty",type:"num",render:function(n,t,i){if(t==="sort")return parseInt(n);var u=r(i.alertType,i.supplyDays);return'<div><div class="row"><div style="width: 50%;"><i class="zmdi zmdi-circle zmdi-hc-2x" style="color:'+u+'; "><\/i><\/div><div style="width: 50%;font-weight: bold;font-size: larger;">'+n+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">inbound:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.inbound+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">Supply Days:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.supplyDays+'<\/div><\/div><div class="row innerFont10"><div style="width: 90px;">FF Dayss:<\/div><div style="width: 30px;text-align: center;font-weight: bold;">'+i.totalFulfillmentDays+"<\/div><\/div><\/div>"}},{data:"defaultShippingMethod",title:"Out of Stock ON",type:"num",render:function(t,i,r){if(i==="sort")return parseInt(r.supplyDays);var u=n(t);return"<div>"+u+'<div class="tdshipb4date" style="font-size: x-large;font-weight: bold;color: red;"><div>'+r.dateOutOfStock+"<\/div><div>"+r.supplyDays+" Days<\/div><\/div><\/div>"}},{data:"notes",title:"Notes"},],outofstockColumnDefs=[{data:"productCountry",title:"From",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"marketplaceId",title:"To",orderable:!0,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"recommendedShippedQty",title:"Send",type:"num",render:function(n){return parseInt(n)}},{data:"avgDailyOrderItems",title:"Daily Sales",render:function(n,i,r){var u=Math.ceil(r.steadySalesIndex/10),o,f,e;for(u<0&&(u=0),u>10&&(u=10),o=t(r.steadySalesIndex),f="",e=0;e<u;e++)f=f+'<i class="zmdi zmdi-stop zmdi-hc-2x" style="color:'+o+'"><\/i>';return u!=0?"<div><div>"+n+"<\/div><div>"+f+"<\/div><\/div>":"<div><div>"+n+'<\/div><div><i class="zmdi zmdi-close zmdi-hc-3x mdc-text-red"><\/i><\/div><\/div>'}},{data:"defaultShippingMethod",title:"Ship By",render:function(t){var i=n(t);return"<div>"+i+"<\/div>"}},{data:"notes",title:"Notes"},],stuckInboundColumnDefs=[{data:"marketplaceId",title:"To",orderable:!0,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"avgDailyOrderItems",title:"Daily Sales",render:function(n,i,r){var u=Math.ceil(r.steadySalesIndex/10),o,f,e;for(u<0&&(u=0),u>10&&(u=10),o=t(r.steadySalesIndex),f="",e=0;e<u;e++)f=f+'<i class="zmdi zmdi-stop zmdi-hc-2x" style="color:'+o+'"><\/i>';return u!=0?"<div><div>"+n+"<\/div><div>"+f+"<\/div><\/div>":"<div><div>"+n+'<\/div><div><i class="zmdi zmdi-close zmdi-hc-3x mdc-text-red"><\/i><\/div><\/div>'}},{data:"defaultShippingMethod",title:"Ship By",render:function(t){var i=n(t);return"<div>"+i+"<\/div>"}},{data:"notes",title:"Notes"},],lateInbondColumnDefs=[{data:"marketplaceId",title:"To",orderable:!0,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return'<img data-src="'+n+'" class="lazyload">'}},{data:"avgDailyOrderItems",title:"Daily Sales",render:function(n,i,r){var u=Math.ceil(r.steadySalesIndex/10),o,f,e;for(u<0&&(u=0),u>10&&(u=10),o=t(r.steadySalesIndex),f="",e=0;e<u;e++)f=f+'<i class="zmdi zmdi-stop zmdi-hc-2x" style="color:'+o+'"><\/i>';return u!=0?"<div><div>"+n+"<\/div><div>"+f+"<\/div><\/div>":"<div><div>"+n+'<\/div><div><i class="zmdi zmdi-close zmdi-hc-3x mdc-text-red"><\/i><\/div><\/div>'}},{data:"defaultShippingMethod",title:"Ship By",render:function(t){var i=n(t);return"<div>"+i+"<\/div>"}},{data:"notes",title:"Notes"},];function r(n,t){var i;return n<0&&(i="#FFFFFF"),n<0&&t==999?i="#DCDCDC":n==0?i="#0000FF":n==1?i="#ADFF2F":n==2?i="#FFFF00":n==3?i="#FFA500":n==4?i="#ff1919":n==5&&(i="#ff0000"),i}function n(n){var t="";return n==0?t='<i class="tdshippingline zmdi zmdi-amazon zmdi-hc-2x" style="width: 20px;"><\/i>':n==1?t='<i class="tdshippingline zmdi zmdi-boat zmdi-hc-2x" style="width: 20px;"><\/i><i class="tdshippingline2 zmdi zmdi-hourglass-alt" style="width: 25px;"><\/i>':n==2?t='<i class="tdshippingline zmdi zmdi-boat zmdi-hc-2x" style="width: 20px;"><\/i><i class="tdshippingline2 zmdi zmdi-fast-forward" style="width: 25px;"><\/i>':n==3?t='<i class="tdshippingline zmdi zmdi-truck zmdi-hc-2x" style="width: 20px;"><\/i><i class="tdshippingline2 zmdi zmdi-hourglass-alt" style="width: 25px;"><\/i>':n==4?t='<i class="tdshippingline zmdi zmdi-truck zmdi-hc-2x" style="width: 20px;"><\/i><i class="tdshippingline2 zmdi zmdi-play" style="width: 25px;"><\/i>':n==5?t='<i class="tdshippingline zmdi zmdi-truck zmdi-hc-2x" style="width: 20px;"><\/i><i class="tdshippingline2 zmdi zmdi-fast-forward" style="width: 25px;"><\/i>':n==6?t='<i class="tdshippingline zmdi zmdi-airplane zmdi-hc-2x" style="width: 20px;"><\/i><i class="tdshippingline2 zmdi zmdi-hourglass-alt" style="width: 25px;"><\/i>':n==7?t='<i class="tdshippingline zmdi zmdi-airplane zmdi-hc-2x" style="width: 20px;"><\/i><i class="tdshippingline2 zmdi zmdi-play" style="width: 25px;"><\/i>':n==8?t='<i class="tdshippingline zmdi zmdi-airplane zmdi-hc-2x" style="width: 20px;"><\/i><i class="tdshippingline2 zmdi zmdi-fast-forward" style="width: 25px;">':n==9?t='<i class="tdshippingline zmdi zmdi-email zmdi-hc-2x" style="width: 20px;"><\/i>':n==10&&(t='<i class="tdshippingline zmdi zmdi-railway zmdi-hc-2x" style="width: 20px;"><\/i>'),t}function o(n){var t;return n>=0&&n<5?t="#800000":n>=5&&n<10?t="#FFA500":n>=10&&n<20?t="#FFFF80":n>20&&n<30?t="#32CD32":n>30&&n<=35?t="#008000":n>35&&n<=40&&(t="#006400"),t}function t(n){var t;return n>0&&n<=10?t="#800000":n>10&&n<=20?t="#FF0000":n>20&&n<=30?t="#FFA500":n>30&&n<40?t="#FFD200":n>40&&n<50?t="#FFFF00":n>50&&n<=60?t="#FFFF40":n>60&&n<=70?t="#FFFF80":n>70&&n<=80?t="#32CD32":n>80&&n<=90?t="#008000":n>90&&n<=100&&(t="#006400"),t}loaded=!1;$(document).ready(function(){function l(n,t,i){$("#"+n).text(t+" ("+i+")")}function a(n,t,i,r,u,f,e,o,s,h,c){outofstockTable=$("#datatableoutofstock").DataTable({data:n,columns:outofstockColumnDefs,responsive:!0,initComplete:function(){showOpacity("datatableoutofstock","tableskeleton1",n)}});$("#outofstock-tab").text("Out of Stock ("+n.length+")");$("#shipImmediatly-tab").text("Ship immediately ("+t+")");$("#shipnow-tab").text("Ship Now ("+i+")");$("#planning-tab").text("Planning ("+r+")");$("#preplanning-tab").text("Pre-Planning ("+u+")");$("#overstocked-tab").text("OverStocked ("+e+")");$("#outofstocknosales-tab").text("Out of Stock (No Sales) ("+o+")");$("#overstockednosales-tab").text("OverStocked (No Sales) ("+s+")");$("#stuckInbound-tab").text("Stuck Inbounds ("+h+")");$("#lateInbond-tab").text("Late Inbounds ("+c+")")}function v(n){stuckInboundTable=$("#datatablestuckInbound").DataTable({data:n,columns:stuckInboundColumnDefs,responsive:!0});$("#stuckInbound-tab").text("Stuck Inbounds ("+n.length+")")}function y(n){lateInbondTable=$("#datatablelateInbond").DataTable({data:n,columns:lateInbondColumnDefs,responsive:!0});$("#lateInbond-tab").text("Late Inbounds ("+n.length+")")}function p(n){outofstockTable=$("#datatableshipImmediatly").DataTable({data:n,columns:shipImmediatlyColumnDefs,responsive:!0});$("#shipImmediatly-tab").text("Ship immediately ("+n.length+")")}function w(n){outofstockTable=$("#datatableshipnow").DataTable({data:n,columns:shipnowColumnDefs,responsive:!0});$("#shipnow-tab").text("Ship Now ("+n.length+")")}function b(n){planningTable=$("#datatableplanning").DataTable({data:n,columns:planningColumnDefs,responsive:!0});$("#planning-tab").text("Planning ("+n.length+")")}function k(n){planningTable=$("#datatablepreplanning").DataTable({data:n,columns:preplanningColumnDefs,responsive:!0});$("#preplanning-tab").text("Pre-Planning ("+n.length+")")}function d(n){planningTable=$("#datatableoverstocked").DataTable({data:n,columns:overstockedColumnDefs,responsive:!0});$("#overstocked-tab").text("Over Stocked ("+n.length+")")}function g(n){outofstocknosalesTable=$("#datatableoutofstocknosales").DataTable({data:n,columns:outofstocknosalesColumnDefs,responsive:!0});$("#outofstocknosales-tab").text("Out of Stock (No Sales) ("+n.length+")")}function nt(n){planningTable=$("#datatableoverstockednosales").DataTable({data:n,columns:overstockednosalesColumnDefs,responsive:!0});$("#overstockednosales-tab").text("Over Stocked (No Sales) ("+n.length+")")}var c;$.ajax({url:"/InventoryManagements/GetInventory/",type:"GET",data:c,success:function(n){n.success?($("#inv-ajax-wait").hide(),shippingPlanstbl=n.shippingPlans,vendorsOrderstbl=n.vendorsOrders,shipImmediatlyTableData=n.shipImmediatly,shipnowTableData=n.shipNow,planningTableData=n.planning,preplanningTableData=n.preplanning,outofstockTableData=n.outOfStockWithSales,overstockedTableData=n.overstocked,outofstocknosalesTableData=n.outofstocknosales,overstockednosalesTableData=n.overstockednosales,stuckInboundTableData=n.stuckInbound,lateInbondTableData=n.lateInbound,a(outofstockTableData,n.shipImmediatly.length,n.shipNow.length,n.planning.length,n.preplanning.length,n.outOfStockWithSales.length,n.overstocked.length,n.outofstocknosales.length,n.overstockednosales.length,n.stuckInbound.length,n.lateInbound.length),l("requiresattention-tab","Requires your Attention",stuckInboundTableData.length+lateInbondTableData.length),loaded=!0,$("#settings-tab").removeClass("visually-hidden"),$("#requiresattention-tab").removeClass("visually-hidden")):createAlert(n.responseTitle,n.responseSummary,n.responseText)}});var n=!1,t=!1,i=!1,r=!1,u=!1,f=!1,e=!1,o=!1,s=!1,h=!1;$(document).ready(function(){$('a[data-bs-toggle="tab"]').on("shown.bs.tab",function(c){var l=$(c.target).attr("href");l=="#outofstock"?f||(f=!0):l=="#shipImmediatly"?loaded?n||(p(shipImmediatlyTableData),n=!0):$('[href="#outofstock"]').tab("show"):l=="#shipnow"?loaded?t||(w(shipnowTableData),t=!0):$('[href="#outofstock"]').tab("show"):l=="#planning"?loaded?i||(b(planningTableData),i=!0):$('[href="#outofstock"]').tab("show"):l=="#preplanning"?loaded?r||(k(preplanningTableData),r=!0):$('[href="#outofstock"]').tab("show"):l=="#overstocked"?loaded?u||(d(overstockedTableData),u=!0):$('[href="#outofstock"]').tab("show"):l=="#overstockednosales"?loaded?o||(nt(overstockednosalesTableData),o=!0):$('[href="#outofstock"]').tab("show"):l=="#outofstocknosales"?loaded?e||(g(outofstocknosalesTableData),e=!0):$('[href="#outofstock"]').tab("show"):l=="#stuckInbound"?loaded?s||(v(stuckInboundTableData),s=!0):$('[href="#outofstock"]').tab("show"):l=="#requiresattention"&&(loaded?h||(y(lateInbondTableData),h=!0):$('[href="#outofstock"]').tab("show"))})})});mainAutoconfig=!1;$(document).ready(function(){function r(r,o,s){var h=parseInt($("#main-minimuminventoryageslider").val()),c=parseInt($("#main-amazonmaxinventoryageslider").val()),a=100,v=c-h-n,l=Math.ceil(v*a/100),y;a=100;v=c-h;l=Math.ceil((v-n)*a/100);c=h+l+n;r!=0&&o!=0&&(h=o,c=r,a=s);c<n+t&&(c=n+t);h<t&&(h=t);$("#main-minimuminventoryageslider").attr("max",(c-n).toString());$("#main-minimuminventoryageslider").attr("min",t.toString());$("#main-amazonmaxinventoryageslider").attr("min",(n+t).toString());$("#main-amazonmaxinventoryageslider").val(c);$("#main-minimuminventoryageslider").val(h);$("#main-minimuminventoryageslider").attr("value",h.toString());$("#main-amazonmaxinventoryageslider").attr("value",c.toString());$("#main-amazonmaxinventoryage").text(c.toString());$("#main-minimuminventoryage").text(h.toString());i=u(l+h);f(i,"main-amazonipi");$("#main-amazonipi").text(i);y=h+l;$("#main-physicalinventory").text(y.toString());e(y,"main-physicalinventory");$("#main-shipQty").text(l.toString()+" Days")}function o(n){var h=n.shippingMethodId,t=n.shippingMethod,r=n.fulfillmentTime,u=n.icon1,f=n.icon2,e=h+"-"+t.replace(/\s/g,""),i,o,s;i=f.length!=0?'<i class="zmdi zmdi-'+u+' zmdi-hc-3x"><\/i><i class="zmdi zmdi-'+f+'" style="position: absolute;"><\/i>':'<i class="zmdi zmdi-'+u+' zmdi-hc-3x"><\/i>';o='<div id="'+e+'" class="col"  style="cursor: pointer;" onclick="selectedShippingBox(this)" data-bs-toggle="tooltip" data-bs-placement="top" title="'+t+'"><div class="visually-hidden">'+n.amazonMaximumInventoryAge+'<\/div><div class="visually-hidden">'+n.minInventoryAge+"<\/div><div>"+i+'<\/div><div style="font-size: small;border-bottom: inset; ">'+r+" days<\/div><\/div>";s='<div id="s'+e+'" class="col"  style="cursor: pointer;" onclick="selectedShippingBoxSingle(this)" data-bs-toggle="tooltip" data-bs-placement="top" title="'+t+'"><div class="visually-hidden">'+n.amazonMaximumInventoryAge+'<\/div><div class="visually-hidden">'+n.minInventoryAge+"<\/div><div>"+i+'<\/div><div style="font-size: x-small;border-bottom: inset; ">'+r+" days<\/div><\/div>";$("#allshippingMethods").append(o);$("#allshippingMethodsSingleASIN").append(s)}function s(n,t){n==0?$("#sellerMarketPlaces").append('<option value="'+t.marketPlaceId+'" selected>'+t.marketPlacNamed+"<\/option>"):$("#sellerMarketPlaces").append('<option value="'+t.marketPlaceId+'">'+t.marketPlacNamed+"<\/option>")}var t=10,i=550,n;selectedShippingBox=function(t){var a,h,c;if($(t).hasClass("selected"))$(t).removeClass("selected"),$(t).css("background-color","ghostwhite"),$(t).css("border",""),$("#main-default-settings").addClass("visually-hidden"),n=0,$("#main-idforMinInv").prop("disabled",!0),$("#main-manualconfig").addClass("visually-hidden"),$("#main-autoconfig").addClass("visually-hidden");else{$(t).addClass("selected").siblings().removeClass("selected");$(t).css("background-color","lightgray").siblings().css("background-color","ghostwhite");$(t).css("border","groove").siblings().css("border","");$("#main-default-settings").removeClass("visually-hidden");$("#main-manualconfig").removeClass("visually-hidden");$("#main-autoconfig").removeClass("visually-hidden");$("#main-idforMinInv").prop("disabled",!1);n=parseInt($(t).children(":last").text());var o=parseInt($(t).children(":first").text()),s=parseInt($(t).children(":first").next().text()),l=100;r(o,s,l);a=o-s-n;h=Math.ceil(a*l/100);i=u(o-n);f(i,"main-amazonipi");$("#main-amazonipi").text(i);c=s+h;$("#main-physicalinventory").text(c.toString());$("#main-shipQty").text(h.toString()+" Days");e(c,"main-physicalinventory")}};$("#main-manualconfig").click(function(){mainAutoconfig=!mainAutoconfig;mainAutoconfig?($("#main-default-settings").removeClass("hide"),$("#main-idforMinInv").prop("disabled",!1),$("#main-autoconfig").fadeTo("slow",.25),$("#main-manualconfig").fadeTo("slow",1),$("#main-idforMinInv").fadeTo("slow",1)):($("#main-default-settings").addClass("hide"),$("#main-autoconfig").fadeTo("slow",1),$("#main-manualconfig").fadeTo("slow",.25))});$(".main-amazonmaxinventoryagesContainer").click(function(){$(".main-minimuminventoryagesContainer").fadeTo("slow",.4);$(".main-amazonmaxinventoryagesContainer").fadeTo("slow",1)});$(".main-minimuminventoryagesContainer").click(function(){$(".main-amazonmaxinventoryagesContainer").fadeTo("slow",.4);$(".main-minimuminventoryagesContainer").fadeTo("slow",1)});$("#main-amazonmaxinventoryageslider").mousemove(function(){r(0,0,0)});$("#main-minimuminventoryageslider").mousemove(function(){r(0,0,0)});$("#main-amazonmaxinventoryageslider").change(function(){r(999,0,0)});$("#main-minimuminventoryageslider").change(function(){r(0,999,0)});$('a[data-bs-toggle="tab"]').on("shown.bs.tab",function(n){var t,i;globalInventorySettingsTab||(t=$(n.target).attr("href"),t=="#settings"&&(globalInventorySettingsTab=!0,$.ajax({url:"/InventoryManagements/GetShippingMethods/",type:"GET",data:i,success:function(n){if(n.success){createMiniAlert("Ok","","","success");for(var t=0;t<n.shippingMethods.length;t++)o(n.shippingMethods[t]);$('[data-bs-toggle="tooltip"]').tooltip()}else createAlert(n.responseTitle,n.responseSummary,n.responseText)}}),$.ajax({url:"/InventoryManagements/GetMarketPlaces/",type:"GET",data:i,success:function(n){if(n.success){createMiniAlert("Ok","","","success");for(var t=0;t<n.sellerMarketPlaces.length;t++)s(t,n.sellerMarketPlaces[t]);$("#allshippingMethods").removeClass("visually-hidden")}else createAlert(n.responseTitle,n.responseSummary,n.responseText)}})))});$("#main-idforMinInv").click(function(){var n=parseInt($("#main-amazonmaxinventoryage").text()),t=parseInt($("#main-minimuminventoryage").text()),i=parseInt($(".selected").attr("id").charAt(0)),r=$("#sellerMarketPlaces").find(":selected").val(),u;n>0&&t>0&&i>=0&&r!=null&&($("#main-idforMinInv").attr("disabled",!0),$.ajax({url:"/InventoryManagements/InventoryManagementsGlobalSettings/?AmazonMaxInventoryAge="+n+"&MinimumInventoryAge="+t+"&shippingId="+i+"&marketId="+r+"&mainAutoconfig="+mainAutoconfig,type:"GET",data:u,success:function(n){n.success?(createMiniAlert("Ok","","","success"),inventorysettingstab=!1):createAlert(n.responseTitle,n.responseSummary,n.responseText);$("#main-idforMinInv").attr("disabled",!1)}}))})});var AmazonFullfilmentDays=10,MinShipmentUnitsAge=14,IPI=550,IPIConst=5,shippingTime,MinInventoryAge,CurentInventoryAge,fulfillmentDays,unitsSoldPerDay,AmazonMaximumInventoryAge,MaxInventoryAge,StartPlaning,StartShipping,Deadline,MaxShipmentUnitsAge,sendqty,avgsales,shipmentUnitsAgeFactor,defaultShippingMethodDivId,selectedShippingBoxSingle,asinAutoconfig,selectedASINDate,singleAsinIcon,inventorysettingsTableColumnDefs=[{data:"marketplaceId",title:"Country",orderable:!0,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!0,render:function(n){return'<img data-src="'+n+'" class="lazyload">'}},{data:"icon1",title:"Shipping",orderable:!0,width:"65px",render:function(n,t,i){var r=i.marketplaceId+i.asin+"singleAsinIcon";return t==="sort"?n:i.icon2!=""?'<div id="'+r+'" style="text-align: center;"><i class="zmdi zmdi-'+n+' zmdi-hc-2x" style="color: steelblue;"><\/i><i class="position-absolute zmdi zmdi-'+i.icon2+'"><\/i><\/div>':'<div id="'+r+'" style="text-align: center;"><i class="zmdi zmdi-'+n+' zmdi-hc-2x" style="color: steelblue;"><\/i><\/div>'}},{data:"edited",title:"Configure",orderable:!0,render:function(n,t,i){var e=i.marketplaceId+i.asin+"asinAutoconfig",s=i.marketplaceId+i.asin+"edited",o="",r,u,f;return n&&(o="checked"),r="",asinAutoconfig=n,u=1,asinAutoconfig&&(u=0),f='<div id="'+e+'" class="d-none">'+u+"<\/div>",r=n?'<i class="zmdi zmdi-wrench zmdi-hc-2x"><\/i>':'<i class="zmdi zmdi-brightness-auto zmdi-hc-2x mdc-text-red"><\/i>',r+f}},{data:"shipInventory",title:"Ship Inventory",orderable:!0,render:function(n,t,i){var u=i.marketplaceId+i.asin,f=i.marketplaceId+i.asin+"shipInventory",r="";return n&&(r="checked"),'<div class="form-check form-switch"style = "font-size: x-large;"><input onclick="changeshipInventorystatus(\''+u+'\')" class="form-check-input " type="checkbox" id="'+f+'"'+r+' style="cursor: pointer;"><\/div>'}},{data:"minInventoryAge",title:"Min. Inventory Age",orderable:!0,render:function(n,t,i){var a=i.marketplaceId+i.asin,r=i.marketplaceId+i.asin+"minInventoryAge",e=i.marketplaceId+i.asin+"curentInventoryAge",o=i.marketplaceId+i.asin+"fulfillmentDays",s=i.marketplaceId+i.asin+"shippingTime",h=i.marketplaceId+i.asin+"avgDailyOrderItems",v=i.marketplaceId+i.asin+"amazonMaximumInventoryAge",c=i.marketplaceId+i.asin+"sqft",l=i.marketplaceId+i.asin+"divId",u="",f;return u=i.edited?'<div id="'+r+'">'+n+"<\/div>":'<div id="'+r+'">'+n+"<\/div>",f='<div id="'+e+'" class="d-none">'+i.curentInventoryAge+'<\/div><div id="'+o+'" class="d-none">'+i.fulfillmentDays+'<\/div><div id="'+s+'" class="d-none">'+i.shippingTime+'<\/div><div id="'+h+'" class="d-none">'+i.avgDailyOrderItems+'<\/div><div id="'+c+'" class="d-none">'+i.sqft+'<\/div><div id="'+l+'" class="d-none">'+i.divId+"<\/div>",u+f}},{data:"shipQty",title:"Ship Qty",orderable:!0,render:function(n,t,i){var r=i.marketplaceId+i.asin+"shipQty";return'<div id="'+r+'">'+parseInt(n)+"<\/div>"}},{data:"amazonMaximumInventoryAge",title:"Inventory Limit",orderable:!0,render:function(n,t,i){var r=i.marketplaceId+i.asin+"amazonMaximumInventoryAge";return'<div id="'+r+'">'+n+"<\/div>"}},{data:"autoDetectRemoteFulfillment",title:"NARF",orderable:!0,render:function(n,t,i){return i.marketplaceId.toLowerCase()=="mx"||i.marketplaceId.toLowerCase()=="ca"?n?'<i class="zmdi zmdi-badge-check zmdi-hc-3x mdc-text-red"><\/i>':'<i class="zmdi zmdi-close-circle zmdi-hc-3x mdc-text-blue"><\/i>':""}}],changeshipInventorystatus=function(n){var t=$("#"+n+"shipInventory").prop("checked");$("#"+n+"shipInventory").css("cursor","wait");$.ajax({url:"/InventoryManagements/SetInventorySettingsShipInventory/?Id="+n+"&shipInventory="+t,type:"GET","async":!0,success:function(t){t.success?(createMiniAlert("Ok","","","success"),$("#"+n+"shipInventory").prop("checked",t.shipInventory),$("#"+n+"shipInventory").removeAttr("style")):createAlert(t.responseTitle,t.responseSummary,t.responseText)}})};function h(n){var h,r,o,c;MinInventoryAge=parseInt($("#"+n+"minInventoryAge").text());CurentInventoryAge=parseInt($("#"+n+"curentInventoryAge").text());fulfillmentDays=parseInt($("#"+n+"fulfillmentDays").text());shippingTime=parseInt($("#"+n+"shippingTime").text());unitsSoldPerDay=parseFloat($("#"+n+"avgDailyOrderItems").text());AmazonMaximumInventoryAge=parseInt($("#"+n+"amazonMaximumInventoryAge").text());sqft=parseFloat($("#"+n+"sqft").text());defaultShippingMethodDivId=$("#"+n+"divId").text();h=$("#"+n+"asinAutoconfig").text();asinAutoconfig=h=="1"?!0:!1;$("#"+defaultShippingMethodDivId).addClass("singleselected").siblings().removeClass("singleselected");$("#"+defaultShippingMethodDivId).css("background-color","lightgray").siblings().css("background-color","ghostwhite");$("#"+defaultShippingMethodDivId).css("border","groove").siblings().css("border","");$("#idforasinInv").text(n);$("#minimuminventoryageslider").val(MinInventoryAge);$("#amazonmaxinventoryageslider").val(AmazonMaximumInventoryAge);$("#amazonmaxinventoryageslider").val(AmazonMaximumInventoryAge);$("#minimuminventoryageslider").val(MinInventoryAge);$("#amazonmaxinventoryageslider").attr("value",AmazonMaximumInventoryAge.toString());$("#minimuminventoryageslider").attr("value",MinInventoryAge.toString());$("#amazonmaxinventoryage").text(AmazonMaximumInventoryAge.toString());$("#minimuminventoryage").text(MinInventoryAge.toString());setTimeout(()=>{i(0,0)},500);var l=AmazonMaximumInventoryAge-MinInventoryAge-shippingTime,t=Math.ceil(l/1);IPI=u(AmazonMaximumInventoryAge-shippingTime);f(IPI,"amazonipi");$("#amazonipi").text(IPI);r=MinInventoryAge+t;sendqty=unitsSoldPerDay*t;$("#physicalinventory").text(r.toString());$("#shipQty").text(t.toString()+" Days");$("#sendqty").text(parseInt(sendqty)+" Pcs");e(r,"main-physicalinventory");t>0?(o=s(t,MinInventoryAge,unitsSoldPerDay,sqft),$("#amazoninventoryfees").text(o),$("#amazoninventoryfeesexp").text(Math.ceil(o*3.2))):($("#amazoninventoryfees").text("0"),$("#amazoninventoryfeesexp").text("0"));asinAutoconfig?(c=$("#asin-manualconfig").css("opacity"),c=="1"&&($("#asin-default-settings").addClass("visually-hidden"),$("#asin-autoconfig").fadeTo("slow",1),$("#asin-manualconfig").fadeTo("slow",.25))):($("#asin-default-settings").removeClass("visually-hidden"),$("#asin-autoconfig").fadeTo("slow",.25),$("#asin-manualconfig").fadeTo("slow",1));$("#EditMinInvModal").modal("show")}function c(){$("#datatableinventorysettings tbody").on("click","tr",function(){var n=inventorySettingsTable.row(this).data(),t;selectedASINDate=n;t=n.marketplaceId+n.asin;h(t);$("#modaldimiss").attr("id",t)})}function v(n){$("."+n).prop("disabled",!0)}function y(n){$("."+n).prop("disabled",!1)}selectedShippingBoxSingle=function(n){var o,t,h,c;if($(n).hasClass("singleselected"))$(n).removeClass("singleselected"),$(n).css("background-color","ghostwhite"),$(n).css("border",""),$("#shippingSettingsSingle").addClass("visually-hidden"),shippingTime=0,$("#asin-default-settings").addClass("visually-hidden"),$("#idforMinInv").prop("disabled",!0),$("#asin-manualconfig").addClass("visually-hidden"),$("#asin-autoconfig").addClass("visually-hidden");else{$(n).addClass("singleselected").siblings().removeClass("singleselected");$(n).css("background-color","lightgray").siblings().css("background-color","ghostwhite");$(n).css("border","groove").siblings().css("border","");singleAsinIcon=$(n).children().next().next().html();$("#shippingSettingsSingle").removeClass("visually-hidden");shippingTime=parseInt($(n).children(":last").text());o=parseInt($(n).children(":first").text());t=parseInt($(n).children(":first").next().text());i(o,t);$("#idforMinInv").prop("disabled",!1);selectedASINDate.edited?($("#asin-default-settings").removeClass("visually-hidden"),$("#asin-manualconfig").removeClass("visually-hidden"),$("#asin-autoconfig").removeClass("visually-hidden"),asinAutoconfig=!1):($("#asin-default-settings").addClass("visually-hidden"),$("#asin-manualconfig").removeClass("visually-hidden"),$("#asin-autoconfig").removeClass("visually-hidden"),$("#asin-autoconfig").fadeTo("slow",1),$("#asin-manualconfig").fadeTo("slow",.25),asinAutoconfig=!0);var l=o-t-shippingTime,r=Math.ceil(l/1);IPI=u(o-shippingTime);f(IPI,"amazonipi");$("#amazonipi").text(IPI);h=t+r;sendqty=unitsSoldPerDay*r;$("#physicalinventory").text(h.toString());$("#sendqty").text(parseInt(sendqty)+" Pcs");$("#sendqtydays").text(parseInt(r)+" Days");e(h,"physicalinventory");r>0?(c=s(r,t,unitsSoldPerDay,sqft),$("#amazoninventoryfees").text(c),$("#amazoninventoryfeesexp").text(Math.ceil(c*3.2))):($("#amazoninventoryfees").text("0"),$("#amazoninventoryfeesexp").text("0"))}};$("#asin-manualconfig").click(function(){var n=$("#asin-manualconfig").css("opacity");n!="1"?(i(0,0),$("#asin-default-settings").removeClass("visually-hidden"),$("#asin-autoconfig").fadeTo("slow",.25),$("#asin-manualconfig").fadeTo("slow",1),asinAutoconfig=!asinAutoconfig):($("#asin-default-settings").addClass("visually-hidden"),$("#asin-autoconfig").fadeTo("slow",1),$("#asin-manualconfig").fadeTo("slow",.25),asinAutoconfig=!asinAutoconfig)});$("#amazonmaxinventoryageslider").mousemove(function(){i(0,0)});$("#minimuminventoryageslider").mousemove(function(){i(0,0)});$("#shipmentunitsagefactorslider").mousemove(function(){i(0,0)});$("#amazonmaxinventoryageslider").change(function(){i(0,0)});function i(n,t){var c=parseInt($("#amazonmaxinventoryageslider").val())-parseInt($("#minimuminventoryageslider").val()),r,i,o,h;MinInventoryAge=parseInt($("#minimuminventoryageslider").val());AmazonMaximumInventoryAge=parseInt($("#amazonmaxinventoryageslider").val());shipmentUnitsAgeFactor=100;r=AmazonMaximumInventoryAge-MinInventoryAge-shippingTime;i=Math.ceil(r*shipmentUnitsAgeFactor/100);r=AmazonMaximumInventoryAge-MinInventoryAge;i=Math.ceil((r-shippingTime)*shipmentUnitsAgeFactor/100);AmazonMaximumInventoryAge=MinInventoryAge+i+shippingTime;n!=0&&t!=0&&(MinInventoryAge=t,AmazonMaximumInventoryAge=n);AmazonMaximumInventoryAge<shippingTime+AmazonFullfilmentDays&&(AmazonMaximumInventoryAge=shippingTime+AmazonFullfilmentDays);MinInventoryAge<AmazonFullfilmentDays&&(MinInventoryAge=AmazonFullfilmentDays);r=AmazonMaximumInventoryAge-MinInventoryAge;$("#minimuminventoryageslider").attr("max",(AmazonMaximumInventoryAge-shippingTime).toString());$("#minimuminventoryageslider").attr("min",AmazonFullfilmentDays.toString());$("#amazonmaxinventoryageslider").attr("min",(shippingTime+AmazonFullfilmentDays).toString());$("#amazonmaxinventoryageslider").val(AmazonMaximumInventoryAge);$("#minimuminventoryageslider").val(MinInventoryAge);$("#amazonmaxinventoryageslider").attr("value",AmazonMaximumInventoryAge.toString());$("#minimuminventoryageslider").attr("value",MinInventoryAge.toString());$("#amazonmaxinventoryage").text(AmazonMaximumInventoryAge.toString());$("#minimuminventoryage").text(MinInventoryAge.toString());StartPlaning=MinInventoryAge+shippingTime+fulfillmentDays;StartShipping=MinInventoryAge+shippingTime;Deadline=CurentInventoryAge-shippingTime-AmazonFullfilmentDays;$("#startplanningslider").val(StartPlaning);$("#startplanning").text(StartPlaning);$("#shartshippingslider").val(StartShipping);$("#shartshipping").text(StartShipping);$("#deadlineslider").val(Deadline);$("#deadline").text(Deadline);IPI=u(i+MinInventoryAge);$("#amazonipi").text(IPI);f(IPI,"amazonipi");o=MinInventoryAge+i;$("#physicalinventory").text(o.toString());e(o,"physicalinventory");i>0?(h=s(i,MinInventoryAge,unitsSoldPerDay,sqft),$("#amazoninventoryfees").text(h),$("#amazoninventoryfeesexp").text(Math.ceil(h*3.2))):($("#amazoninventoryfees").text("0"),$("#amazoninventoryfeesexp").text("0"));sendqty=unitsSoldPerDay*i;$("#sendqty").text(parseInt(sendqty)+" Pcs");$("#sendqtydays").text(parseInt(i)+" Days")}function u(n){var t=-1*5.87*n+1008.75;return Math.ceil(t)}function f(n,t){n<=450?($("#"+t).css("background-color","darkred"),$("#"+t).css("color","antiquewhite")):n>450&&n<=500?($("#"+t).css("background-color","red"),$("#"+t).css("color","antiquewhite")):n>501&&n<=550?($("#"+t).css("background-color","lightpink"),$("#"+t).css("color","black")):n>551&&n<600?($("#"+t).css("background-color","yellow"),$("#"+t).css("color","black")):n>601&&n<700?($("#"+t).css("background-color","lightgreen"),$("#"+t).css("color","black")):n>701&&n<800?($("#"+t).css("background-color","green"),$("#"+t).css("color","antiquewhite")):n>8001&&($("#"+t).css("background-color","darkgreen"),$("#"+t).css("color","antiquewhite"))}function e(n,t){n>75?($("#"+t).css("background-color","darkred"),$("#"+t).css("color","antiquewhite")):($("#"+t).css("background-color","unset"),$("#"+t).css("color","black"))}function s(n,t,i,r){var u=0,e,o,f;if(i!=0){for(e=.75/30*r,o=i,f=0;f<n;f++)u=u+o*f*e;u=u/n;u=u*30+t*e*o*30}return Math.ceil(u)}$("#idforMinInv").click(function(){var n,t;$(".singleselected").length>0?(n=$("#idforasinInv").text(),$("#idforMinInv").attr("disabled",!0),$("#idforMinInv").html('<i class="zmdi zmdi-rotate-right zmdi-hc-spin"><\/i>'),shippingId=$(".singleselected").attr("id"),shippingId=shippingId.substring(1),shippingId=shippingId.split("-")[0],t=$("#allshippingMethodsSingleASIN").children().eq(shippingId),$.ajax({url:"/InventoryManagements/UpdateInventorySettingsMinInvAge/?Id="+n+"&MinInventoryAge="+MinInventoryAge+"&AmazonMaximumInventoryAge="+AmazonMaximumInventoryAge+"&shippingId="+shippingId+"&asinAutoconfig="+asinAutoconfig,type:"POST","async":!0,success:function(i){if(i.success){createMiniAlert("Ok","","","success");var r;asinAutoconfig?($("#"+n+"asinAutoconfig").text("1"),r='<i class="zmdi zmdi-brightness-auto zmdi-hc-2x mdc-text-red"><\/i>',$("#"+n+"asinAutoconfig").prev().replaceWith(r),selectedASINDate.edited=!1,$("#"+n+"minInventoryAge").text(""),$("#"+n+"amazonMaximumInventoryAge").text(""),$("#"+n+"shipQty").text(""),$("#"+n+"singleAsinIcon").html(singleAsinIcon),$("#"+n+"divId").text(t.attr("id"))):($("#"+n+"asinAutoconfig").text("0"),r='<i class="zmdi zmdi-wrench zmdi-hc-2x"><\/i>',$("#"+n+"asinAutoconfig").prev().replaceWith(r),selectedASINDate.edited=!0,$("#"+n+"minInventoryAge").text(MinInventoryAge),$("#"+n+"amazonMaximumInventoryAge").text(AmazonMaximumInventoryAge),$("#"+n+"shipQty").text(parseInt(sendqty)),$("#"+n+"singleAsinIcon").html(singleAsinIcon),$("#"+n+"divId").text(t.attr("id")));selectedASINDate.shipQty=sendqty;selectedASINDate.amazonMaximumInventoryAge=AmazonMaximumInventoryAge;selectedASINDate.minInventoryAge=MinInventoryAge;$("#idforMinInv").attr("disabled",!1);$("#idforMinInv").text("Submit");$("#EditMinInvModal").modal("hide")}else $("#idforMinInv").text("ERROR"),createAlert(i.responseTitle,i.responseSummary,i.responseText),setTimeout(()=>{$("#idforMinInv").attr("disabled",!1),$("#idforMinInv").text("Submit")},5e3);setTimeout(()=>{$("#EditMinInvModal").modal("hide")},2e3)}})):($("#selectshippingmethod").text("Shipping Method NOT selected"),$("#selectshippingmethod").css({backgroundColor:"red",color:"white"}));setTimeout(()=>{$("#selectshippingmethod").css("all","unset"),$("#selectshippingmethod").text("Shipping Method")},5e3)});$('a[data-bs-toggle="tab"]').on("shown.bs.tab",function(n){var t,i;inventorysettingstab||(t=$(n.target).attr("href"),t=="#indiv-settings"&&(inventorysettingstab=!0,$.ajax({url:"/InventoryManagements/GetInventorySettings/",type:"GET",data:i,success:function(n){n.success?(inventorySettingsTableData=n.inventoryManagementSettings,l(inventorySettingsTableData)):createAlert(n.responseTitle,n.responseSummary,n.responseText)}})))});function l(n){inventorySettingsTable==undefined?inventorySettingsTable=$("#datatableinventorysettings").DataTable({data:n,columns:inventorysettingsTableColumnDefs,responsive:!0,initComplete:function(){showOpacity("datatableinventorysettings","tableskeleton2",n);c()}}):a(n);$("#settings-tab").text("Settings ("+n.length+")")}function a(n){inventorySettingsTable.clear();inventorySettingsTable.rows.add(n);inventorySettingsTable.draw()}}if($("#"+Marketplacespage+pagevar).length>0&&$(document).ready(function(){function i(){$.ajax({url:"/MarketPlaceSettings/GetDeactivatedMarkets/",type:"GET",success:function(n){var t,i;if(n.success)for(t=0;t<n.deactivated.length;t++)i='<div class="card col border rounded-3 text-light mx-auto pl-2 pr-2" style = "max-width: 250px;background-image: linear-gradient(180deg, #ff7b7b21 0%,#ff0000 100%);"><i class="flag '+n.deactivated[t]+'flag m-1" style="cursor: auto;align-self: center;opacity: 1;"><\/i><div class="card-body"><div class="col-12 mb-2" style="text-align:center"> <button id="deactivatedmp-'+n.deactivated[t]+'" type="submit" class="btn btn-danger deactivatedmp" value="Submit">Reactivate<\/button><\/div><div class="col-12" style="text-align:center"> <button id="deactivatedmpreauth-'+n.deactivated[t]+'" type="submit" class="btn btn-danger deactivatedmpreauth" value="Submit">Reauthorize<\/button><\/div><\/div>',$("#deactivated").append(i),$("#deactivatedh2").removeClass("d-none"),r(n.deactivated[t]),u(n.deactivated[t]);else createAlert(n.responseTitle,n.responseSummary,n.responseText)}})}function r(n){$(".deactivatedmp").click(function(){$this=this;var t=$($this).attr("id").replace("deactivatedmp-","");$.ajax({url:"/MarketPlaceSettings/ReactivateMarketPlace/?market="+n,type:"GET",success:function(n){n.success?(createMiniAlert("Ok","","","success"),$(this).parent().parent().parent().remove()):createAlert(n.responseTitle,n.responseSummary,n.responseText)}})})}function u(n){$(".deactivatedmpreauth").click(function(){$this=this;var t=$($this).attr("id").replace("deactivatedmpreauth-","");$.ajax({url:"/MarketPlaceSettings/ReuthenticateMarketPlace/?market="+n,type:"GET",success:function(n){n.success?window.location.href=n.url:createAlert(n.responseTitle,n.responseSummary,n.responseText)}})})}function f(n){return navigator.clipboard?(navigator.clipboard.writeText(n).then(function(){},function(){return!1}),!0):e(n)}function e(n){var t=document.createElement("textarea"),i;t.value=n;t.style.top="0";t.style.left="0";t.style.position="fixed";document.body.appendChild(t);t.focus();t.select();try{return i=document.execCommand("copy"),document.body.removeChild(t),i}catch(r){return document.body.removeChild(t),!1}}var n,t=["#4354a9","#029000","#ff0000","","","","","","","",""];$("#mws input").prop("disabled",!0);$("#marketplacecredentials").removeClass("show");$.ajax({url:"/MarketPlaceSettings/getMarketPlaces/",type:"GET",success:function(r){var e,f,o,u;if(r.success){for(i(),n=r.partiallyUnActivatedMarketPlacesRegions,createMiniAlert("Ok","","","success"),u=0;u<1;u++){for(e='<option id="'+r.partiallyUnActivatedMarketPlacesRegions[u].developerId+'" value="0">-- Choose--<\/option>',f=0;f<r.partiallyUnActivatedMarketPlacesRegions[u].markerPlaces.length;f++)e=e+'<option id="'+r.partiallyUnActivatedMarketPlacesRegions[u].markerPlaces[f].markerPlaceCode+'" value="'+r.partiallyUnActivatedMarketPlacesRegions[u].markerPlaces[f].markerPlaceName+'">'+r.partiallyUnActivatedMarketPlacesRegions[u].markerPlaces[f].markerPlaceName+"<\/option>";o='<div class="card col-xs-12 col-sm-4 border rounded-3 text-light" style="background-image: linear-gradient(180deg, '+t[u]+' 0%,#303138 100%);"><div class="card-header">'+r.partiallyUnActivatedMarketPlacesRegions[u].regionName+'<\/div><div class="card-body"><select id="marketplaceregion-'+r.partiallyUnActivatedMarketPlacesRegions[u].id+'" class="marketplaceregion" style="width: 100%;">'+e+"<\/select><\/div><\/div>";$("#addMarketPlaces").append(o)}for(u=0;u<r.partiallyUnActivatedMarketPlacesRegions.length;u++)$("#marketplaceregion-"+r.partiallyUnActivatedMarketPlacesRegions[u].id).val($("#target option:first").val());for(u=0;u<r.activatedMarketPlaces.length;u++)$("#homemarkets").append('<span data-toggle="tooltip" data-placement="bottom" title="'+r.activatedMarketPlaces[u]+'"><i class="flag-med '+r.activatedMarketPlaces[u].toLocaleLowerCase()+'flag m-1" style="cursor: auto;"><\/i><\/span>')}else createAlert(r.responseTitle,r.responseSummary,r.responseText);$("#mwsSubmit").prop("disabled",!1);$("#mwsSubmit").val("Submit");$("mwsSubmit").css("pointer-events","auto")}});$(document).on("change",".marketplaceregion",function(){var t;opt=$(this).val();var r=this.id.slice(-1),u=$("#marketplaceregion-"+r+" option:eq(0)").prop("id"),i=$(this).children(":selected").attr("id");for(t=0;t<n.length;t++)t!=parseInt(r)&&$("#marketplaceregion-"+t).val($("#target option:first").val());i.length==2?($("#marketplacecredentials").addClass("show"),$("#mws :input").prop("disabled",!1),$("#mwsMarketPlace").val(i.toLowerCase()),$("#marketflag").removeClass(),$("#marketflag").addClass("flag "+i.toLowerCase()+"flag m-1")):($("#marketplacecredentials").removeClass("show"),$("#mws :input").prop("disabled",!0))});$("#mwsSubmit").on("click",function(){if($("#mws").validate(),$("#mws").valid()){$(".card").css("opacity","0.5");$("#mwsSubmit").prop("disabled",!0);$("#mwsSubmit").text("Please Wait");$("mwsSubmit").css("pointer-events","none");var n=$("#mws").serialize();$.ajax({url:"/MarketPlaceSettings/authorize",type:"POST",data:n,success:function(n){n.success?window.location.href=n.url:createMiniAlert(n.message,"","","");$("#mwsSubmit").prop("disabled",!1);$("#mwsSubmit").text("Activate")}})}});$("#dev-copy").click(function(){var n=$("#developerId").val(),t=f(n);t&&($("#developerId").val("Copied!"),setTimeout(()=>{$("#developerId").val(n)},2500))})}),$("#"+Performancepage+pagevar).length>0){$("#"+Performancepage+sidevar).addClass(activeclass);var performancedata,performancemarkets,performancetable,performanceChart=[],performanceChartCurrentSet=[],performanceChartIndex=0,performanceDataAlls=[[,],[,]],overallPerformanceData=[],overallperformanceChart,salesRankProblem,overPerforming,underPerforming,salesRankProblemtable,overPerformingtable,underPerformingtable,salesRankProblemDefs=[{data:"marketplaceId",title:"Market Place",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n,t,i){return n.length<10?'<a href="'+i.asinLink+'" target="_blank"><i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;" data-bs-toggle="tooltip" data-bs-placement="top" title="'+i.title+'"><\/i><\/a>':'<a href="'+i.asinLink+'" target="_blank"><img data-src="'+n+'" data-bs-toggle="tooltip" data-bs-placement="top" title="'+i.title+'" class="lazyload"><\/a>'}}],overPerformingDefs=[{data:"marketplaceId",title:"Market Place",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n,t,i){return'<a href="'+i.asinLink+'" target="_blank"><img src="'+n+'"><\/a>'}}],underPerformingDefs=[{data:"marketplaceId",title:"Market Place",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n,t,i){return'<a href="'+i.asinLink+'" target="_blank"><img src="'+n+'"><\/a>'}}],performancecolumnDefs=[{data:"marketplaceId",title:"Market Place",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return'<img src="'+n+'">'}},{data:"trend",title:"Trend",orderable:!0,className:"dt-body-center",render:function(t){var i=[];return i=n(t),'<i class="zmdi zmdi-hc-3x '+i[0]+" "+i[1]+'"><\/i><span style="visibility: hidden;">'+t+"<\/span>"}},{data:"dailySalesRank",title:"Daily Rank",orderable:!0,className:"dt-body-center",render:function(t,i,r){var u=[],f=[],e=[],o=[];return u=n(r.dailySalesRankUp[0]),f=n(r.dailySalesRankUp[1]),e=n(r.dailySalesRankUp[2]),o=n(r.dailySalesRankUp[3]),'<i class="zmdi zmdi-hc-1x '+o[0]+" "+o[1]+'"><\/i><i class="zmdi zmdi-hc-1x '+e[0]+" "+e[1]+'"><\/i><i class="zmdi zmdi-hc-1x '+f[0]+" "+f[1]+'"><\/i><i class="zmdi zmdi-hc-1x '+u[0]+" "+u[1]+'"><\/i>  '+t}},{data:"weeklySalesRank",title:"Weekly Rank",orderable:!0,className:"dt-body-center",render:function(t,i,r){var u=[],f=[],e=[],o=[];return u=n(r.weeklySalesRankUp[0]),f=n(r.weeklySalesRankUp[1]),e=n(r.weeklySalesRankUp[2]),o=n(r.weeklySalesRankUp[3]),'<i class="zmdi zmdi-hc-1x '+o[0]+" "+o[1]+'"><\/i><i class="zmdi zmdi-hc-1x '+e[0]+" "+e[1]+'"><\/i><i class="zmdi zmdi-hc-1x '+f[0]+" "+f[1]+'"><\/i><i class="zmdi zmdi-hc-1x '+u[0]+" "+u[1]+'"><\/i>  '+t}},{data:"monthlySalesRank",title:"Monthly Rank",orderable:!0,className:"dt-body-center",render:function(t,i,r){var u=[],f=[],e=[],o=[];return u=n(r.monthlySalesRankUp[0]),f=n(r.monthlySalesRankUp[1]),e=n(r.monthlySalesRankUp[2]),o=n(r.monthlySalesRankUp[3]),'<i class="zmdi zmdi-hc-1x '+o[0]+" "+o[1]+'"><\/i><i class="zmdi zmdi-hc-1x '+e[0]+" "+e[1]+'"><\/i><i class="zmdi zmdi-hc-1x '+f[0]+" "+f[1]+'"><\/i><i class="zmdi zmdi-hc-1x '+u[0]+" "+u[1]+'"><\/i>  '+t}},{data:"yearlySalesRank",title:"Yearly Rank",orderable:!0,className:"dt-body-center",render:function(t,i,r){var u=[],f=[],e=[],o=[];return u=n(r.yearlySalesRankUp[0]),f=n(r.yearlySalesRankUp[1]),e=n(r.yearlySalesRankUp[2]),o=n(r.yearlySalesRankUp[3]),'<i class="zmdi zmdi-hc-1x '+o[0]+" "+o[1]+'"><\/i><i class="zmdi zmdi-hc-1x '+e[0]+" "+e[1]+'"><\/i><i class="zmdi zmdi-hc-1x '+f[0]+" "+f[1]+'"><\/i><i class="zmdi zmdi-hc-1x '+u[0]+" "+u[1]+'"><\/i>  '+t}},],salesmarkets;$(document).ready(function(){am4core.ready(function(){overallperformanceChart=am4core.create("overallPerformanceChart",am4charts.XYChart)});const n=new URLSearchParams(window.location.search),t=n.get("currentMarket"),i=n.get("salesmarkets");var s={marketCode:t,salesmarkets:i},c=s;$.ajax({url:"/Performance/PeriodPerformance/",type:"POST",data:c,success:function(n){if(n.success){salesRankProblem=$.grep(n.data,function(n){return n.salesRankProblem});overPerforming=$.grep(n.data,function(n){return n.performing==1});underPerforming=$.grep(n.data,function(n){return n.performing==-1});performancedata=n.data;performancemarkets=n.marketPlaces;u(performancedata,performancedata.length);f(salesRankProblem,salesRankProblem.length);e(overPerforming,overPerforming.length);o(underPerforming,underPerforming.length);overallPerformanceData=n.overallPerformanceData;h();$("#dailyperformance").text(n.dailyPerformance+" %");$("#weeklyperformance").text(n.weeklyPerformance+" %");$("#monthlyperformance").text(n.monthlyPerformance+" %");$("#yearlyperformance").text(n.yearlyPerformance+" %");var t=n.currentMarket;$("#mainmarketselector").html('<i class="country-select-flag '+t+'flag rotate" style="cursor: pointer; "><\/i>');salesmarkets=n.allMarketPlaces;r(salesmarkets,"marktplaces-rows","new",t)}else createAlert(n.responseTitle,n.responseSummary,n.responseText)}})});function r(n,t,i,r){var u;if(i=="new"){if(r=="globe")for($("#showmarkets").removeClass("d-none"),u=0;u<n.length;u++)$("#"+t).append('<div class="col-sm-6 col-md-4 col-lg-3 mb-2 text-center"><div class="market-cards p-1" onclick="newMarketPerformance(\''+n[u]+'\')"><i class="country-select-flag '+n[u].toLowerCase()+'flag" data-toggle="tooltipglobal" data-placement="top" style="cursor: pointer;" title='+n[u].toUpperCase()+"><\/i><\/div><\/div>");else for($("#showmarkets").addClass("d-none"),$("#"+t).append('<div class="col-sm-6 col-md-4 col-lg-3 mb-2 text-center"><div class="market-cards p-1" onclick="newMarketPerformance(\'globe\')"><i class="country-select-flag globeflag" data-toggle="tooltipglobal" data-placement="top" style="cursor: pointer;" title=Globe><\/i><\/div><\/div>'),u=0;u<n.length;u++)r!=n[u].toLowerCase()&&$("#"+t).append('<div class="col-sm-6 col-md-4 col-lg-3 mb-2 text-center"><div class="market-cards p-1" onclick="newMarketPerformance(\''+n[u]+'\')"><i class="country-select-flag '+n[u].toLowerCase()+'flag" data-toggle="tooltipglobal" data-placement="top" style="cursor: pointer;" title='+n[u].toUpperCase()+"><\/i><\/div><\/div>");$('[data-toggle="tooltipglobal"]').tooltip()}}newMarketPerformance=function(n){location.href=n=="globe"?"/Performance/":"/Performance/Index?currentMarket="+n+"&salesmarkets="+btoa(salesmarkets.toString())};function u(n,i){performancetable=$("#performancedatatable").DataTable({data:n,columns:performancecolumnDefs,responsive:!0,initComplete:function(){t(1);showOpacity("performancedatatable","tableskeleton",performancetable)}});i>0?$("#performance-tab").text("Ranks ("+i+")"):$("#performance-tab").hide()}function f(n,i){salesRankProblemtable=$("#salesRankProblemtable").DataTable({data:n,columns:salesRankProblemDefs,responsive:!0,createdRow:function(){},rowCallback:function(){},initComplete:function(){t(2)}});i>0?$("#salesRankProblem-tab").text("Problems ("+i+")"):$("#salesRankProblem-tab").hide()}function e(n,i){overPerformingtable=$("#overPerformingtable").DataTable({data:n,columns:overPerformingDefs,responsive:!0,createdRow:function(){},rowCallback:function(){},initComplete:function(){t(3)}});i>0?$("#overPerforming-tab").text("Over Performing ("+i+")"):$("#overPerforming-tab").hide()}function o(n,i){underPerformingtable=$("#underPerformingtable").DataTable({data:n,columns:underPerformingDefs,responsive:!0,createdRow:function(){},rowCallback:function(){},initComplete:function(){t(4)}});i>0?$("#underPerforming-tab").text("Under Performing ("+i+")"):$("#underPerforming-tab").hide()}function t(n){if(n==1)$("#performancedatatable tbody").on("click","tr",function(){var n=performancetable.row(this).data();i(n)});if(n==2)$("#salesRankProblemtable tbody").on("click","tr",function(){var n=salesRankProblemtable.row(this).data();i(n)});if(n==3)$("#overPerformingtable tbody").on("click","tr",function(){var n=overPerformingtable.row(this).data();i(n)});if(n==4)$("#underPerformingtable tbody").on("click","tr",function(){var n=underPerformingtable.row(this).data();i(n)})}function i(n){$("#performance_"+n.marketplaceId+n.asin).length==0?$.ajax({url:"/Performance/GetPerformanceDetails/?marketplaceId="+n.marketplaceId+"&asin="+n.asin,type:"GET",data:n,beforeSend:function(){},complete:function(){},success:function(t){if(t.success){createMiniAlert("Ok","","","success");performanceDataAlls[performanceChartIndex]=t.performanceData;$('a[href="#performance-details"]').tab("show");var i=n.marketplaceId+n.asin;$(".performance-asintabs .nav-tabs").append('<li class="nav-item"><a class="nav-link" href="#performance_'+i+'" title="'+t.fullname+'">'+t.name+'<\/a><span id="'+performanceChartIndex+'">x<\/span><\/li>');$(".performance-asintabs .tab-content").append('<div class="tab-pane" id="performance_'+i+'"><div class="container-fluid row"><div class="col-2"><i class="country-select-flag '+t.marketplaceId.toLowerCase()+'flag"><\/i><\/div>        <div class="col-2"><img src="'+t.imageLink+'">        <\/div>        <div class="col-8"><p>'+t.fullname+'<\/p>        <\/div>    <\/div><hr style="width:50%;margin: auto;"><div id="chartdiv'+performanceChartIndex+n.marketplaceId+n.asin+'" style="width: 100%;height: 500px;"><\/div><div class="container-fluid font-weight-bold mt-3 pb-5"><div class="row"><div class="col-3" style="text-align: end;"><a id="daily-'+performanceChartIndex+"-"+n.marketplaceId+"-"+n.asin+'" class="btn btn-primary daily" onclick="selectDataset('+performanceChartIndex+",'daily','"+n.marketplaceId+"','"+n.asin+'\')" role="button" style="width:120px;color:white;cursor:pointer;">Daily<\/a><\/div><div class="col-3" style="text-align-last: center;"><a id="weekly-'+performanceChartIndex+"-"+n.marketplaceId+"-"+n.asin+'" class="btn btn-primary weekly" onclick="selectDataset('+performanceChartIndex+",'weekly','"+n.marketplaceId+"','"+n.asin+'\')" role="button" style="width:120px;color:white;cursor:pointer;">Weekly<\/a><\/div><div class="col-3" style="text-align-last: center;"><a id="monthly-'+performanceChartIndex+"-"+n.marketplaceId+"-"+n.asin+'" class="btn btn-primary monthly" onclick="selectDataset('+performanceChartIndex+",'monthly','"+n.marketplaceId+"','"+n.asin+'\')" role="button" style="width:120px;color:white;cursor:pointer;">Monthly<\/a><\/div><div class="col-3"><a id="yearly-'+performanceChartIndex+"-"+n.marketplaceId+"-"+n.asin+'" class="btn btn-primary yearly" onclick="selectDataset('+performanceChartIndex+",'yearly','"+n.marketplaceId+"','"+n.asin+'\')" role="button" style="width:120px;color:white;cursor:pointer;">Yearly<\/a><\/div><\/div><\/div><\/div>');s(performanceChartIndex++,n.marketplaceId,n.asin)}else createAlert(t.responseTitle,t.responseSummary,t.responseText)}}):($('a[href="#performance-details"]').tab("show"),$('a[href="#performance_'+n.marketplaceId+n.asin+'"]').tab("show"))}$(".nav-tabs").on("click","a",function(n){n.preventDefault();$(this).tab("show")}).on("click","span",function(){var n=$(this).siblings("a"),t;$(n.attr("href")).remove();$(this).parent().remove();t=parseInt($(this).attr("id"));performanceDataAlls[t]=null;n[0].classList.contains("active")&&$(".performance-asintabs .nav-tabs li").children("a").first().click()});function s(n,t,i){am4core.ready(function(){var e="chartdiv"+n+t+i,u,f,r;performanceChart[n]=am4core.create(e,am4charts.XYChart);performanceChart[n].numberFormatter.numberFormat={precision:-1,decimalSeparator:",",thousandsSeparator:"####"};performanceChart[n].data=performanceDataAlls[n].daily;u=performanceChart[n].xAxes.push(new am4charts.CategoryAxis);u.dataFields.category="date";u.renderer.grid.template.location=0;u.renderer.minGridDistance=30;f=performanceChart[n].yAxes.push(new am4charts.ValueAxis);r=performanceChart[n].series.push(new am4charts.LineSeries);r.dataFields.valueY="rank";r.dataFields.categoryX="date";r.name="Rank";r.tooltipText="{categoryX}: [bold]{valueY}[/]";r.strokeWidth=3;r.yAxis=f;performanceChart[n].legend=new am4charts.Legend;performanceChart[n].cursor=new am4charts.XYCursor;performanceChart[n].cursor.behavior="none";performanceChart[n].maxZoomLevel=1;performanceChart[n].zoomOutButton.disabled=!0;$(".performance-asintabs .nav-tabs li").children("a").last().click()})}selectDataset=function(n,t){performanceChartCurrentSet[n]!=t&&(performanceChart[n].data=performanceDataAlls[n][t],performanceChartCurrentSet[n]=t)};function n(n){var t=[];return n==1?(t[0]="zmdi-long-arrow-up",t[1]="mdc-text-green"):n==-1?(t[0]="zmdi-long-arrow-down",t[1]="mdc-text-red"):(t[0]="zmdi-swap-vertical",t[1]="mdc-text-white"),t}function h(){am4core.ready(function(){var t,i,n;overallperformanceChart.numberFormatter.numberFormat={precision:-1,decimalSeparator:",",thousandsSeparator:"####"};overallperformanceChart.data=overallPerformanceData.weekly;t=overallperformanceChart.xAxes.push(new am4charts.CategoryAxis);t.dataFields.category="date";t.renderer.grid.template.location=0;t.renderer.minGridDistance=30;i=overallperformanceChart.yAxes.push(new am4charts.ValueAxis);n=overallperformanceChart.series.push(new am4charts.LineSeries);n.dataFields.valueY="rank";n.dataFields.categoryX="date";n.name="Rank";n.tooltipText="{categoryX}: [bold]{valueY}";n.strokeWidth=3;n.yAxis=i;overallperformanceChart.legend=new am4charts.Legend;overallperformanceChart.cursor=new am4charts.XYCursor;overallperformanceChart.cursor.behavior="none";overallperformanceChart.maxZoomLevel=1;overallperformanceChart.zoomOutButton.disabled=!0})}selectMainDataset=function(n){n=="daily"&&(overallperformanceChart.data=overallPerformanceData.daily);n=="weekly"&&(overallperformanceChart.data=overallPerformanceData.weekly);n=="monthly"&&(overallperformanceChart.data=overallPerformanceData.monthly);n=="yearly"&&(overallperformanceChart.data=overallPerformanceData.yearly)};$("a[data-toggle=tab]").click(function(){this.id=="performance-tab"?$("#performancestats").show():$("#performancestats").hide()})}if($("#"+Productpage+pagevar).length>0){$("#"+Productpage+sidevar).addClass(activeclass);$(document).ready(function(){function i(n){productstable=$("#productstable").DataTable({data:n,columns:t,responsive:!0,initComplete:function(){showOpacity("productstable","tableskeleton",productstable)}})}var t=[{data:"marketplaceId",title:"Market Place",orderable:!0,width:"60px",render:function(n,t){return t==="sort"?n:'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,width:"60px",className:"dt-body-center",render:function(n,t,i){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;" data-bs-toggle="tooltip" data-bs-placement="top" title="'+i.productVendorTitle+'"><\/i>':'<img data-src="'+n+'" data-bs-toggle="tooltip" data-bs-placement="top" title="'+i.productVendorTitle+'" class="lazyload">'}},{data:"fbaStock",title:"FBA Quantity",orderable:!0,width:"100px",type:"num",render:function(n,t,i){return t==="sort"?parseInt(n):'<div class="row"><div style="text-align: center;font-weight: bold;color: darkgreen;"> '+n+' <\/div><div class="col" style="font-size: xx-small;text-align: right;">Inbound<\/div><div class="col" style="font-size: x-small;font-weight: bold;color: red;">'+i.inbound+"<\/div><\/div>"}},{data:"profit",title:"Profit",orderable:!0,width:"40px",type:"num",render:function(n,t,i){return t==="sort"?parseFloat(n):'<div><div style="text-align: center;font-weight: bold;color: darkblue;">'+i.profitCurrencyCode+"&nbsp;"+n+'<\/div>    <div class="row row-cols-2">        <div class="col" style="font-size: xx-small;text-align: right;">Cost<\/div>        <div class="col" style="font-size: x-small;font-weight: bold;color: orangered;">'+i.itemCost+'<\/div>        <div class="col" style="font-size: xx-small;text-align: right;">Price<\/div>        <div class="col" style="font-size: x-small;font-weight: bold;color: seagreen;">'+i.itemPrice+'<\/div>        <div class="col" style="font-size: xx-small;text-align: right;">Fees<\/div>        <div class="col" style="font-size: x-small;font-weight: bold;color: red;">'+i.feesEstimate+"<\/div><\/div><\/div>"}},{data:"profitPct",title:"profitPct",orderable:!0,width:"65px",type:"num",render:function(n,t){return t==="sort"?parseFloat(n):'<div style="text-align: center;font-weight: bold;color: darkblue;">'+n+"%<\/div>"}},{data:"measurementSystem",title:"size",orderable:!0,width:"60px",type:"num",render:function(n,t,i){if(t==="sort")return parseFloat(i.packageLength*i.packageWidth*i.packageHeight);return'<div class="row row-cols-2"><div class="col" style="font-size: xx-small; text-align: right;">L:<\/div><div class="col" style="font-size: x-small;font-weight: bold;color: coral;">'+i.packageLength+'<\/div><div class="col" style="font-size: xx-small; text-align: right;">W:<\/div><div class="col" style="font-size: x-small;font-weight: bold;color: coral;">'+i.packageWidth+'<\/div><div class="col" style="font-size: xx-small; text-align: right;">H:<\/div><div class="col" style="font-size: x-small;font-weight: bold;color: coral;">'+i.packageHeight+'<\/div>    <div class="col" style="font-size: x-small;font-weight: bold;lightcoral: red;text-align: right;">'+i.packageWeight+'<\/div>    <div class="col" style="font-size: xx-small;">'+i.weightUnit+"<\/div><\/div>"}},{data:"icon1",title:"Shipping",orderable:!0,width:"65px",render:function(n,t,i){return t==="sort"?n:i.icon2!=""?'<div style="text-align: center;"><i class="zmdi zmdi-'+n+' zmdi-hc-2x" style="color: steelblue;"><\/i><i class="position-absolute zmdi zmdi-'+i.icon2+'"><\/i><\/div>':'<div style="text-align: center;"><i class="zmdi zmdi-'+n+' zmdi-hc-2x" style="color: steelblue;"><\/i><\/div>'}},{data:"fulfillmentDays",title:"Fulfillment Days",orderable:!0,width:"105px",type:"num",render:function(n,t){return t==="sort"?parseInt(n):'<div style="text-align: center;font-weight: bold;color: slategrey;">'+n+"<\/div>"}},{data:"minOrderQty",title:"MOQ",orderable:!0,width:"40px",type:"num",render:function(n,t){return t==="sort"?parseInt(n):'<div style="text-align: center;font-weight: bold;color: darkred;">'+n+"<\/div>"}},{data:"vendorName",title:"Vendor",orderable:!0},{data:"brand",title:"Brand",orderable:!0},{data:"productType",title:"Category",orderable:!0},{data:"sellerIdASIN",title:"More",orderable:!1,render:function(n,t,i){var r="";return i.vendorId==50&&(r='<li style="display: flex;margin-left: 5px;"><a class="dropdown-item" href="#" onclick="EditComponent(\''+n+'\')"><span style="font-size: large;">Add Vendor<\/span><i class="zmdi zmdi-edit mdc-text-light-blue  zmdi-hc-2x" style="float: left;margin-right: 15px;"><\/i><\/a><\/li>'),'<div class="dropdown"><i class="zmdi zmdi-more-vert btn-lg btn-secondary " type="button" role="button" id="more" data-bs-toggle="dropdown" aria-expanded="false"><\/i><ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="more" style="min-width: 195px;"><li style="display: flex;margin-left: 5px;"><a class="dropdown-item" href="#" onclick="EditComponent(\''+n+'\')"><span style="font-size: large;">Edit<\/span><i class="zmdi zmdi-edit mdc-text-light-blue  zmdi-hc-2x" style="float: left;margin-right: 15px;"><\/i><\/a><\/li><li style="display: flex;margin-left: 5px;"><a class="dropdown-item"  href="/ProductComponents/asincomponent?id='+n+'"><span style="font-size: large;">Components<\/span><i class="zmdi zmdi-edit mdc-text-light-blue  zmdi-hc-2x" style="float: left;margin-right: 15px;"><\/i><\/a><\/li>'+r+"<\/ul><\/div>"}}];$.ajax({url:"/Product/GetProducts",type:"GET",success:function(t){t.success&&(productstableData=t.data,i(t.data),currentMarket="globe",$("#mainmarketselector").html('<i class="country-select-flag '+currentMarket+'flag rotate" style="cursor: pointer; "><\/i>'),salesmarkets=t.allMarketPlaces,n(salesmarkets,"marktplaces-rows","new",currentMarket))}});$("#productstable").on("draw.dt",function(){var n=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')),t=n.map(function(n){return new bootstrap.Tooltip(n)})})});function n(n,t,i,r){var u;if(i=="new"){if(r=="globe")for($("#showmarkets").removeClass("d-none"),u=0;u<n.length;u++)$("#"+t).append('<div class="col-sm-6 col-md-4 col-lg-3 mb-2 text-center"><div class="market-cards p-1" onclick="newMarketProducts(\''+n[u]+'\')"><i class="country-select-flag '+n[u].toLowerCase()+'flag" data-toggle="tooltipglobal" data-placement="top" style="cursor: pointer;" title='+n[u].toUpperCase()+"><\/i><\/div><\/div>");else for($("#showmarkets").addClass("d-none"),$("#"+t).append('<div class="col-sm-6 col-md-4 col-lg-3 mb-2 text-center"><div class="market-cards p-1" onclick="newMarketProducts(\'globe\')"><i class="country-select-flag globeflag" data-toggle="tooltipglobal" data-placement="top" style="cursor: pointer;" title=Globe><\/i><\/div><\/div>'),u=0;u<n.length;u++)r!=n[u].toLowerCase()&&$("#"+t).append('<div class="col-sm-6 col-md-4 col-lg-3 mb-2 text-center"><div class="market-cards p-1" onclick="newMarketProducts(\''+n[u]+'\')"><i class="country-select-flag '+n[u].toLowerCase()+'flag" data-toggle="tooltipglobal" data-placement="top" style="cursor: pointer;" title='+n[u].toUpperCase()+"><\/i><\/div><\/div>");$('[data-toggle="tooltipglobal"]').tooltip()}}newMarketProducts=function(t){$('[data-toggle="tooltipglobal"]').tooltip("dispose");$("#mainmarketselector").empty();$("#marktplaces-rows").empty();var i='<i class="country-select-flag '+t.toLowerCase()+'flag rotate" style="cursor: pointer; "><\/i>';$("#mainmarketselector").append(i);t=="globe"?(n(salesmarkets,"marktplaces-rows","new",t),productstable.clear().rows.add(productstableData).draw()):(n(salesmarkets,"marktplaces-rows","new",t),marketProducts=$.grep(productstableData,function(n){return n.marketplaceId==t}),productstable.clear().rows.add(marketProducts).draw());$("#markets-collapse-panel").removeClass("show")};EditComponent=function(n){$("#EditModal").modal("show");productstableData.forEach(function(t){t.counter++;t.sellerIdASIN==n&&($("#itemCost").val(t.itemCost),$("#productVendorTitle").val(t.productVendorTitle),$("#itemsInOneBox").val(t.itemsInOneBox),$("#fulfillmentDays").val(t.fulfillmentDays),$("#defaultShippingMethod").val(t.defaultShippingMethodId),$("#minOrderQty").val(t.minOrderQty),$("#sellerIdASIN").val(t.sellerIdASIN),productId=t.sellerIdASIN)})};$("#EditBtn").on("click",function(){if($("#formEdit").validate(),$("#formEdit").valid()){var n=$("#EditModal #sellerIdASIN").val(),t=$("#formEdit").serialize();addWaitingDotsToButton("EditBtn","EditModalFooter");setTimeout(function(){$("#EditModal").modal("hide")},2e3);$.ajax({url:"/Product/Edit/"+productId,type:"POST",data:t,success:function(t){if(t.success){createMiniAlert("Ok","","","success");var i=productstableData.filter(t=>t.sellerIdASIN==n);i[0].itemCost=$("#itemCost").val();i[0].productVendorTitle=$("#productVendorTitle").val();i[0].itemsInOneBox=$("#itemsInOneBox").val();i[0].fulfillmentDays=$("#fulfillmentDays").val();i[0].defaultShippingMethod=$("#defaultShippingMethod").val();i[0].minOrderQty=$("#minOrderQty").val();i[0].vendorId=$("#vendorId").val();i[0].vendorName=$("#vendorId").find(":selected").text();productstable.clear().rows.add(productstableData).draw();$("#EditModal").modal("hide")}else createAlert(t.responseTitle,t.responseSummary,t.responseText);removeWaitingDotsToButton("EditBtn","EditModalFooter")}})}});$("#defaultShippingMethod").change(function(){var n=$("#defaultShippingMethod :selected").val(),t="/Product/GetShippingMethod/"+n;$.ajax({url:t,type:"GET","async":!0,dataType:"json",beforeSend:function(){},complete:function(){},success:function(n){n.success&&($("#fulfillmentTime").html('<i class="zmdi zmdi-time mdc-text-light-green zmdi-hc-1x zmdi-hc-border pull-left"><\/i>Fulfillment Time: '+n.fulfillmentTime+" Days").show(),$("#shippingPricePerKG").html('<i class="zmdi zmdi-money mdc-text-light-green zmdi-hc-1x zmdi-hc-border pull-left"><\/i>Shipping Price Per KG: US$ '+n.shippingPricePerKG).show())}})});$("form button").on("click",function(n){n.preventDefault()})}if($("#"+ProductComponentspage+pagevar).length>0){$("#"+ProductComponentspage+sidevar).addClass(activeclass);$(document).ready(function(){function n(n,t,i,r){$.ajax({url:"/ProductComponents/GetImageLink/"+n,"async":!0,data:n,type:"GET",success:function(n){var e;if(n.success){var u=n.data.imageLink,o=n.data.asin,s=n.data.market,f=s.toLowerCase()+"flag";$("#s2marketflag").removeClass();$("#s2marketflag").addClass("country-select-flag");$("#s2marketflag").addClass(f);u!=""&&u!=null?($(t).fadeOut(),$(t).attr("src",u).fadeIn()):$(t).attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==");$(i).val(o+"-");e=getComputedStyle(document.querySelector("."+f)).backgroundImage.substring(5).substring(0,getComputedStyle(document.querySelector("."+f)).backgroundImage.length-7);$(r+"1").attr("src",e)}else createAlert(n.responseTitle,n.responseSummary,n.responseText)}})}var i=$("#ProductAddSelect"),r=$("#EditModal #ProductEditSelect"),t;i.on("change",function(t){var i=t.currentTarget.value;n(i,"#pAddImg","#pAddsku","#pAddmarketflag");addpSelect=$("#ProductAddSelect").val()});$("#VendorAddSelect").on("change",function(){addvSelect=$("#VendorAddSelect").val()});$(document).on("show.bs.modal","#AddModal",function(){addpSelect!=null?($("#ProductAddSelect").val(addpSelect).change(),n(addpSelect,"#pAddImg","#pAddsku","#pAddmarketflag")):n($('#ProductAddSelect option[value!=""]').first().val(),"#pAddImg","#pAddsku","#pAddmarketflag");addvSelect!=null&&$("#VendorAddSelect").val(addvSelect).change()});$("#EditModal").on("change","#ProductEditSelect",function(t){var i=t.currentTarget.value;n(i,"#pEditImg","#pEditsku","#pEditmarketflag")});$("#ProductAddSelect").select2({dropdownParent:$("#AddModal"),dropdownAutoWidth:!0});$("#VendorAddSelect").select2({dropdownParent:$("#AddModal"),dropdownAutoWidth:!0});t=[{data:"componentName",title:"Componenet Name"},{data:"componentPrice",title:"Price"},{data:"componentQty",title:"Quantity Needed"},{data:"minQty",title:"Minimum Quantity"},{data:"vendorName",title:"Component Vendor"},{data:"productTitle",title:"Component Product"},{data:"componentId",title:"Edit/Delete",orderable:!1,render:function(n){return'<a href="#" onclick="EditComponent(\''+n+'\')"><div style="display:flex "><i class="zmdi zmdi-edit mdc-text-light-blue  zmdi-hc-2x"><\/i><\/a><a href="#" onclick="DeleteComponent(\''+n+'\')"><i class="zmdi zmdi-delete mdc-text-light-red  zmdi-hc-2x" style="padding-left: 20px;"><\/i><\/a><\/div>'}}];componentstable=$("#componentstable").DataTable({ajax:"/ProductComponents/GetProductComponents/",columns:t,responsive:!0,initComplete:function(){showOpacity("componentstable","tableskeleton",componentstable)}})});AddComponent=function(){$("#AddModal").modal("show")};$("#AddBtn").on("click",function(){if($("#formCreate").validate(),$("#formCreate").valid()){addWaitingDotsToButton("AddBtn","AddModalFooter");setTimeout(function(){$("#AddModal").modal("hide")},2e3);var t=$("#formCreate").serialize();$.ajax({url:"/ProductComponents/Create/",type:"POST",data:t,success:function(t){t.success?(createMiniAlert("Ok","","","success"),componentstable.ajax.reload(null,!1),$("#AddModal").modal("hide"),n("formCreate")):createAlert(t.responseTitle,t.responseSummary,t.responseText);removeWaitingDotsToButton("AddBtn","AddModalFooter")}})}});DeleteComponent=function(n){var t="/ProductComponents/Delete/"+n;$("#DeleteModalBodyDiv").load(t,function(){$("#DeleteModal").modal("show")})};$("#DeleteModal").on("click","#DeleteBtn",function(){var n=$("#DeleteModal #componentId").val(),t=$("#DeleteModal #formDelete").serialize(),i;addWaitingDotsToButton("DeleteBtn","DeleteModalFooter");setTimeout(function(){$("#DeleteModal").modal("hide")},2e3);i=0;$.ajax({url:"/ProductComponents/Delete/"+n,type:"POST",data:t,beforeSend:function(){},complete:function(){},success:function(n){n.success?(createMiniAlert("Ok","","","success"),componentstable.ajax.reload(null,!1),$("#DeleteModal").modal("hide"),$("#DeleteModalBodyDiv").empty()):createAlert(n.responseTitle,n.responseSummary,n.responseText);removeWaitingDotsToButton("DeleteBtn","DeleteModalFooter")}})});EditComponent=function(n){var t="/ProductComponents/Edit/"+n;$("#EditModalBodyDiv").load(t,function(){$("#EditModal").modal("show");$.validator.unobtrusive.parse("#formEdit");$("#ProductEditSelect").select2({dropdownParent:$("#EditModal"),dropdownAutoWidth:!0});$("#VendorEditSelect").select2({dropdownParent:$("#EditModal"),dropdownAutoWidth:!0})})};$("#EditModal").on("click","#EditBtn",function(){var n,t,i;$("#formEdit").validate();$("#formEdit").valid()&&(n=$("#EditModal #componentId").val(),t=$("#EditModal #formEdit").serialize(),addWaitingDotsToButton("EditBtn","EditModalFooter"),setTimeout(function(){$("#EditModal").modal("hide")},2e3),i=0,$.ajax({url:"/ProductComponents/Edit/"+n,type:"POST",data:t,beforeSend:function(){},complete:function(){},success:function(n){n.success?(createMiniAlert("Ok","","","success"),componentstable.ajax.reload(null,!1),$("#EditModal").modal("hide"),$("#EditModalBodyDiv").empty()):createAlert(n.responseTitle,n.responseSummary,n.responseText);removeWaitingDotsToButton("EditBtn","EditModalFooter")}}))});function n(n){document.getElementById(n).reset()}}if($("#"+ProductSalespage+pagevar).length>0){$("#"+ProductSalespage+sidevar).addClass(activeclass);var salesdata,salesmarkets,salestable,salesChart=[],marketsChart=[],salesChartCurrentSet=[],marketsChartCurrentSet=[],salesChartIndex=0,marketsChartIndex=0,salesDataAlls=[[,],[,]],marketsDataAlls=[],overallSalesData=[],overallsalesChart,todaysaleschart,todayASINsales,signleSales,spinner="M25,5A20.14,20.14,0,0,1,45,22.88a2.51,2.51,0,0,0,2.49,2.26h0A2.52,2.52,0,0,0,50,22.33a25.14,25.14,0,0,0-50,0,2.52,2.52,0,0,0,2.5,2.81h0A2.51,2.51,0,0,0,5,22.88,20.14,20.14,0,0,1,25,5Z",todaySalesIndicator,singleSalesIndicator,overallSalesIndicator,salesTable,nosalesTable,salesTableData=[],nosalesTableData=[],initSalesTable,initnoSalesTable=!1,initSingleSales=!1,asinssalespaginationCreated=!1,t1incrementBeforintervalId,t2incrementBeforintervalId,t3incrementBeforintervalId,t4incrementBeforintervalId,salescolumnDefs=[{data:"marketplaceId",title:"Market Place",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"marketShare",title:"Market Share",orderable:!0,className:"dt-body-center",render:function(n){return n+"%"}},{data:"ssIndex",title:"Stable Sales Index",orderable:!0,className:"dt-body-center",render:function(n){return n+"%"}},{data:"dailyRevenue",title:"Daily Revenues",orderable:!0,className:"dt-body-center",render:function(n){return"$"+n}},{data:"salesTrend",title:"Sales Trend",orderable:!0,className:"dt-body-center",render:function(n){return(n=0)?'<i class="zmdi zmdi-hc-1x zmdi-long-arrow-down mdc-text-red"><\/i>':(n=2)?'<i class="zmdi zmdi-hc-1x zmdi-long-arrow-up mdc-text-green"><\/i>':'<i class="zmdi zmdi-hc-1x zmdi-swap mdc-text-dark"><\/i>'}},{data:"noSalesDays",title:"No Sales Days",render:function(n){return n>=29?n+"+":n}},{data:"dailySales",title:"Daily Sales",orderable:!0,className:"dt-body-center"},{data:"weeklySales",title:"Weekly Sales",orderable:!0,className:"dt-body-center"},{data:"monthlySales",title:"Monthly Sales",orderable:!0,className:"dt-body-center"},{data:"yearlySales",title:"Yearly Sales",orderable:!0,className:"dt-body-center"},];function g(){$(".panel-collapse").on("show.bs.collapse",function(){$(this).siblings(".panel-heading").addClass("active")});$(".panel-collapse").on("hide.bs.collapse",function(){$(this).siblings(".panel-heading").removeClass("active")});$(".rotate").click(function(){$(this).toggleClass("down");$("#markets-collapse").css("border-style")=="hidden"?$("#markets-collapse").css("border-style","solid"):$("#markets-collapse").css("border-style","hidden")});$(".market-cards").hover(function(){jQuery("i",this).css("opacity","1")},function(){jQuery("i",this).css("opacity","0.5")})}var tbulletClicked=!1,columnTemplateClicked=!1,dailySalesPageNumber=1,dailySalesCurrentPage=1,totalSalesPages=0,updatedOn,itemsPerPage,currentMarket="globe",mainSalesinitalized=!1;am4core.ready(function(){overallsalesChart=am4core.create("overallSalesChart",am4charts.XYChart)});$(document).ready(function(){e();$('a[data-bs-toggle="tab"]').on("shown.bs.tab",function(n){var t=$(n.target).attr("href");t=="#sales"&&u(1)})});function e(){const n=new URLSearchParams(window.location.search),t=n.get("marketCode");$.ajax({url:"/ProductSales/GetAllSalesPageData/?marketCode="+t,type:"GET",success:function(n){var t,i;n.success?(nt(n),overallSalesData=n.overallSalesData,t=7,mainSalesinitalized&&(overallsalesChart.dispose(),i="overallSalesChart",overallsalesChart=am4core.create(i,am4charts.XYChart),t=1),rt(t),updatedOn=n.updated,$("#t1-lastsalestime").text(n.updated+" "+$("#minutesagotext").text()),mainSalesinitalized||(p(),clearInterval(t1incrementBeforintervalId),t1incrementBeforintervalId=setInterval(p,6e4),mainSalesinitalized=!0,currentMarket=n.currentMarket,$("#mainmarketselector").html('<i class="country-select-flag '+currentMarket+'flag rotate" style="cursor: pointer; "><\/i>'),salesmarkets=n.activatedMarketPlaces,l(salesmarkets,"marktplaces-rows","new",currentMarket),l(salesmarkets,"marktplacesstats-rows","switch",currentMarket),g(),a("sales-marketstabs",!1,marketsDataAlls,marketsChart,"sales-markets-tab","sales"),a("sales-asintabs",!0,salesDataAlls,salesChart,"sales-details-tab","sales-table"))):createAlert(n.responseTitle,n.responseSummary,n.responseText)}})}function nt(n){$("#dailysales").text(n.dailysales);$("#weeklysales").text(n.weeklysales);$("#monthlysales").text(n.monthlysales);$("#yearlysales").text(n.yearlysales);$("#todaysales").text(n.todaysales);$("#thisweeksales").text(n.thisweeksales);$("#thismonthsales").text(n.thismonthsales);$("#thisyearsales").text(n.thisyearsales);$("#yesterdaysales").text(n.yesterdaysales);$("#lastweeksales").text(n.lastweeksales);$("#lastmonthsales").text(n.lastmonthsales);$("#lastyearsales").text(n.lastyearsales);n.dailyPcyChange>=0?($("#dailysalesupdown").addClass("zmdi-long-arrow-up"),$("#dailysalesupdown").addClass("mdc-text-green")):($("#dailysalesupdown").addClass("zmdi-long-arrow-down"),$("#dailysalesupdown").addClass("mdc-text-red"));n.weeklyPcyChange>=0?($("#weeklysalesupdown").addClass("zmdi-long-arrow-up"),$("#weeklysalesupdown").addClass("mdc-text-green")):($("#weeklysalesupdown").addClass("zmdi-long-arrow-down"),$("#weeklysalesupdown").addClass("mdc-text-red"));n.monthlyPcyChange>=0?($("#monthlysalesupdown").addClass("zmdi-long-arrow-up"),$("#monthlysalesupdown").addClass("mdc-text-green")):($("#monthlysalesupdown").addClass("zmdi-long-arrow-down"),$("#monthlysalesupdown").addClass("mdc-text-red"));n.yearlyPcyChange>=0?($("#yearlysalesupdown").addClass("zmdi-long-arrow-up"),$("#yearlysalesupdown").addClass("mdc-text-green")):($("#yearlysalesupdown").addClass("zmdi-long-arrow-down"),$("#yearlysalesupdown").addClass("mdc-text-red"));$("#dailyPcyChange").text(n.dailyPcyChange+"%");$("#weeklyPcyChange").text(n.weeklyPcyChange+"%");$("#monthlyPcyChange").text(n.monthlyPcyChange+"%");$("#yearlyPcyChange").text(n.yearlyPcyChange+"%")}newMarket=function(n){location.href=n=="globe"?"/ProductSales/":"/ProductSales/Index?marketCode="+n};function l(n,t,i,r){var u;if(i=="new"){if(r=="globe")for($("#showmarkets").removeClass("d-none"),u=0;u<n.length;u++)$("#"+t).append('<div class="col-sm-6 col-md-4 col-lg-3 mb-2 text-center"><div class="market-cards p-1" onclick="newMarket(\''+n[u].marketPlaceId+'\')"><i class="country-select-flag '+n[u].marketPlaceId.toLowerCase()+'flag" data-toggle="tooltipglobal" data-placement="top" style="cursor: pointer;" title='+n[u].marketPlaceId.toUpperCase()+"><\/i><\/div><\/div>");else for($("#showmarkets").addClass("d-none"),u=0;u<n.length;u++)$("#"+t).append('<div class="col-sm-6 col-md-4 col-lg-3 mb-2 text-center"><div class="market-cards p-1" onclick="newMarket(\'globe\')"><i class="country-select-flag globeflag" data-toggle="tooltipglobal" data-placement="top" style="cursor: pointer;" title=Globe><\/i><\/div><\/div>'),r!=n[u].marketPlaceId.toLowerCase()&&$("#"+t).append('<div class="col-sm-6 col-md-4 col-lg-3 mb-2 text-center"><div class="market-cards p-1" onclick="newMarket(\''+n[u].marketPlaceId+'\')"><i class="country-select-flag '+n[u].marketPlaceId.toLowerCase()+'flag" data-toggle="tooltipglobal" data-placement="top" style="cursor: pointer;" title='+n[u].marketPlaceId.toUpperCase()+"><\/i><\/div><\/div>");$('[data-toggle="tooltipglobal"]').tooltip()}else if(i=="switch")for(u=0;u<n.length;u++)$("#"+t).append('<div class="col-sm-6 col-md-4 col-lg-3 mb-2 text-center"><div class="card market-cards" onclick="switchMarket(\''+n[u].marketPlaceId+'\')"><div class="card-header" style="align-self: center;"><div><i class="country-select-flag '+n[u].marketPlaceId.toLowerCase()+'flag" style="cursor: pointer;"><\/i><\/div><\/div><div class="row no-gutters market-cards-text"><div class="col-md-6"><div><p title="Sales Share">%'+n[u].marketShare+'<\/p><\/div><\/div><div class="col-md-6"><div><p title="Sales $$$">'+n[u].avarageDailySales+"<\/p><\/div><\/div><\/div><\/div><\/div>")}$(document).ready(function(){$('a[data-bs-toggle="tab"]').on("shown.bs.tab",function(n){var f=$(n.target).attr("href"),i,r;f=="#sales-asinscol"&&(initSingleSales?u(2):(initSingleSales=!0,todayASINsales=am4core.create("todaySaleschartdiv",am4charts.XYChart),i=0,r=1,t(currentMarket,r,i)))})});function t(n,t,i){$.ajax({url:"/ProductSales/GetTodayASINsSalesData/?marketCode="+n+"&day="+i+"&toPage="+t,type:"GET",success:function(n){n.success?(signleSales=n.signleSales,$("#t2-lastsalestime").text(n.updated+" "+$("#minutesagotext").text()),pages=n.pages,updated=n.LastBuildDate,itemsPerPage=n.itemsPerPage,it(signleSales,pages,updatedOn)):createAlert(n.responseTitle,n.responseSummary,n.responseText)}})}function tt(n){r();window.scrollTo(0,300);var i=0;$("#todayasinssales").prop("checked")&&(i=0);$("#ystasinssales").prop("checked")&&(i=1);$("#bystasinssales").prop("checked")&&(i=2);$.when(t(currentMarket,n,i)).then(todayASINsales=am4core.create("todaySaleschartdiv",am4charts.XYChart))}selectasinssales=function(n){r();window.scrollTo(0,220);asinssalespaginationCreated=!1;$.when(t(currentMarket,1,n)).then(todayASINsales=am4core.create("todaySaleschartdiv",am4charts.XYChart))};function r(){todayASINsales.data=null;todayASINsales.dispose();$("#todaySaleschartdiv").html('<div style="text-align: center;"><div class= "barchartloading loading-1" ><\/div><div class="barchartloading loading-2"><\/div><div class="barchartloading loading-3"><\/div><div class="barchartloading loading-4"><\/div><\/div >')}function it(n,t){function yt(){columnTemplateClicked=!1}function pt(){tbulletClicked=!1}function wt(){if(!h){h=todayASINsales.tooltipContainer.createChild(am4core.Container);h.background.fill=am4core.color("#fff");h.width=am4core.percent(100);h.height=am4core.percent(100);var n=h.createChild(am4core.Label);n.text="Loading ...";n.align="center";n.valign="middle";n.dy=50;hourglass=h.createChild(am4core.Image);hourglass.href="https://s3-us-west-2.amazonaws.com/s.cdpn.io/t-160/hourglass.svg";hourglass.align="center";hourglass.valign="middle";hourglass.horizontalCenter="middle";hourglass.verticalCenter="middle";hourglass.scale=.7}h.hide(0);h.show();clearInterval(et);et=setInterval(function(){hourglass.animate([{from:0,to:360,property:"rotation"}],1e3)},1e3)}function bt(){h.hide();clearInterval(et)}var k=45,y=75,ot=25,p=40,st=30,ht=25,ct=-70,d=-10,g=60,nt=-40,it=102,rt=-60,ut=45,ft=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),a,s,b,f,e,r,v,u,lt,c,l,i,at,vt;ft<600?(k=33,y=50,ot=12,p=20,st=15,ht=10,ct=20,d=-20,g=50,nt=-30,it=80,rt=-50,ut=42):ft>=600&&ft<1024&&(k=40,y=60,ot=19,p=30,st=20,ht=15,ct=-80,d=-50,g=75,nt=-40,it=110,rt=-75,ut=55);t>1&&(asinssalespaginationCreated||(w(),clearInterval(t2incrementBeforintervalId),t2incrementBeforintervalId=setInterval(w,6e4),asinssalespaginationCreated=!0,$("#asinssalespagination").pagination({items:t,displayedPages:5,currentPage:1,edges:0,cssStyle:"",prevText:'<span aria-hidden="true">&laquo;<\/span>',nextText:'<span aria-hidden="true">&raquo;<\/span>',onInit:function(){},onPageClick:function(n){tt(n)}})));todayASINsales.data=n;todayASINsales.responsive.enabled=!0;todayASINsales.maskBullets=!1;todayASINsales.hiddenState.properties.opacity=0;todayASINsales.paddingLeft=g;todayASINsales.paddingTop=60;todayASINsales.tooltip.getFillFromObject=!0;todayASINsales.tooltip.background.fill=am4core.color("#67b7dc");todayASINsales.tooltip.opacity=.1;a=todayASINsales.yAxes.push(new am4charts.CategoryAxis);a.dataFields.category="id";a.renderer.minGridDistance=40;a.renderer.labels.template.disabled=!0;a.renderer.opposite=!0;s=todayASINsales.xAxes.push(new am4charts.ValueAxis);s.min=0;s.renderer.minGridDistance=1;s.labelsEnabled=!0;s.maxPrecision=0;s.renderer.labels.template.disabled=!0;s.strictMinMax=!0;s.max=Math.max.apply(Math,n.map(function(n){return n.sales}));s.max==0&&(s.max=1);b=todayASINsales.xAxes.push(new am4charts.ValueAxis);b.min=0;b.labelsEnabled=!0;b.renderer.minGridDistance=30;f=todayASINsales.series.push(new am4charts.ColumnSeries);f.dataFields.valueX="sales";f.dataFields.categoryY="id";f.dataFields.categoryX="marketPlace";f.sequencedInterpolation=!0;f.defaultState.transitionDuration=3e3;e=todayASINsales.series.push(new am4charts.StepLineSeries);e.dataFields.valueX="orders";e.dataFields.categoryY="id";e.dataFields.categoryX="marketPlace";e.sequencedInterpolation=!0;e.defaultState.transitionDuration=3e3;e.opacity=.25;e.strokeWidth=5;e.noRisers=!0;e.startLocation=.15;e.endLocation=.85;e.stroke=am4core.color("red");r=f.columns.template;r.width=am4core.percent(10);r.maxWidth=50;r.column.cornerRadius(10,10,10,10);r.strokeOpacity=10;r.strokeWidth=2;r.strokeOpacity=1;r.stroke=am4core.color("#ffffff");r.tooltipText="Orders: {orders}\nSales: {sales}";r.tooltipText.opacity=.5;f.heatRules.push({target:f.columns.template,property:"fill",dataField:"valueX",min:am4core.color("#95c8d8"),max:am4core.color("#111e6c")});f.mainContainer.mask=undefined;v=f.columns.template.states.create("hover");v.properties.scale=1.05;v.properties.fillOpacity=.5;v.properties.cornerRadiusTopLeft=35;v.properties.cornerRadiusTopRight=35;v.properties.cursorOverStyle=am4core.MouseCursorStyle.pointer;u=r.createChild(am4charts.CircleBullet);u.circle.radius=k;u.valign="bottom";u.properties.dy=nt;u.horizontalCenter="left";u.isMeasured=!0;u.mouseEnabled=!1;u.verticalCenter="bottom";u.interactionsEnabled=!1;u.dx=d;u.cursorOverStyle=am4core.MouseCursorStyle.pointer;lt=u.createChild(am4core.Circle);lt.adapter.add("radius",function(n,t){var i=t.parent;return i.circle.pixelRadius+1});c=u.createChild(am4core.Image);c.width=y;c.height=y;c.horizontalCenter="middle";c.verticalCenter="middle";c.propertyFields.href="productimage";c.userClassName="lazyload";c.adapter.add("mask",function(n,t){var i=t.parent;return i.circle});l=r.createChild(am4core.Image);l.width=p;l.height=p;l.properties.dy=ut;l.properties.dx=rt;l.properties.opacity=.75;l.propertyFields.href="marketPlace";l.adapter.add("href",function(n,t){var i=t.dataItem;if(i)return"https://cdn.azszero.com/flags/flags/4x3/"+i.categoryX.toLowerCase()+".svg"});i=f.bullets.push(new am4charts.LabelBullet);i.label.text="{sales}";i.label.fontSize=20;i.label.fill=am4core.color("#bbb").brighten(.25);i.locationY=.5;i.zIndex=2;i.label.background=new am4core.RoundedRectangle;i.label.background.cornerRadius(5,5,5,5);i.label.background.fill=am4core.color("#eee");i.label.background.stroke=am4core.color("#555");i.label.background.strokeOpacity=1;i.label.padding(4,8,4,8);i.locationY=.5;r.events.on("hit",function(n){var t,r,i;tbulletClicked||(columnTemplateClicked=!0,t=n.target.dataItem.dataContext.id,t=t.substring(2),r=n.target.dataItem.dataContext.marketPlace,i=[],i.asin=t,i.marketplaceId=r,o(i),console.log(t+"yes"));window.setTimeout(yt,1e3)},this);i.events.on("hit",function(n){var t,r,i;columnTemplateClicked||(tbulletClicked=!0,t=n.target.dataItem.dataContext.id,t=t.substring(2),r=n.target.dataItem.dataContext.marketPlace,i=[],i.asin=t,i.marketplaceId=r,o(i),console.log(t+"no"));window.setTimeout(pt,1e3)},this);at=todayASINsales.data.length*it-a.pixelHeight;vt=todayASINsales.pixelHeight+at;todayASINsales.svgContainer.htmlElement.style.height=vt+"px";todayASINsales.events.on("datavalidated",function(){bt()});let h,et;wt()}function rt(n){am4core.ready(function(){var i,r,t;ft();overallsalesChart.numberFormatter.numberFormat={precision:-1,decimalSeparator:",",thousandsSeparator:"####"};n==7?overallsalesChart.data=overallSalesData.weekly:n==1&&(overallsalesChart.data=overallSalesData.daily);i=overallsalesChart.xAxes.push(new am4charts.CategoryAxis);i.dataFields.category="date";i.renderer.grid.template.location=0;i.renderer.minGridDistance=30;r=overallsalesChart.yAxes.push(new am4charts.ValueAxis);t=overallsalesChart.series.push(new am4charts.ColumnSeries);t.dataFields.valueY="sales";t.dataFields.categoryX="date";t.name="Sales";t.tooltipText="{categoryX}: [bold]{valueY}";t.strokeWidth=3;t.yAxis=r;overallsalesChart.legend=new am4charts.Legend;overallsalesChart.cursor=new am4charts.XYCursor;overallsalesChart.cursor.behavior="none";overallsalesChart.maxZoomLevel=1;overallsalesChart.zoomOutButton.disabled=!0;overallsalesChart.events.on("ready",function(){});overallsalesChart.events.on("datavalidated",function(){ut()})})}selectMainDataset=function(n){n=="daily"&&(overallSalesIndicator.show(),overallsalesChart.data=overallSalesData.daily);n=="weekly"&&(overallSalesIndicator.show(),overallsalesChart.data=overallSalesData.weekly);n=="monthly"&&(overallSalesIndicator.show(),overallsalesChart.data=overallSalesData.monthly);n=="yearly"&&(overallSalesIndicator.show(),overallsalesChart.data=overallSalesData.yearly)};function ut(){setTimeout(()=>{overallSalesIndicator.hide()},500)}function ft(){var t,n;overallSalesIndicator||(overallSalesIndicator=overallsalesChart.tooltipContainer.createChild(am4core.Container),overallSalesIndicator.background.fill=am4core.color("#fff"),overallSalesIndicator.width=am4core.percent(100),overallSalesIndicator.height=am4core.percent(100),t=overallSalesIndicator.createChild(am4core.Label),t.text="Loading ...",t.align="center",t.valign="middle",t.dy=50,n=overallSalesIndicator.createChild(am4core.Image),n.path=spinner,n.align="center",n.valign="middle",n.horizontalCenter="middle",n.verticalCenter="middle",n.scale=.7,setInterval(function(){n.animate([{from:0,to:360,property:"rotation"}],1e3)},1e3));overallSalesIndicator.hide(0);overallSalesIndicator.show()}function o(n){n&&($("#sales_"+n.marketplaceId+n.asin).length==0?($("#sales-details-tab").show(),$.ajax({url:"/ProductSales/GetSalesDetails/?marketplaceId="+n.marketplaceId+"&asin="+n.asin,type:"GET",success:function(t){if(t.success){salesDataAlls[salesChartIndex]=t.saleseData;$('a[href="#sales-details"]').tab("show");var i=n.marketplaceId+n.asin;$(".sales-asintabs .nav-tabs").append('<li class="nav-item"><a class="nav-link" href="#sales_'+i+'" title="'+t.fullname+'"  data-toggle="tooltipasin" data-placement="top" style="text-decoration: none;">'+t.name+'<\/a><span id="'+salesChartIndex+'">x<\/span><\/li>');$(".sales-asintabs .tab-content").append('<div class="tab-pane" id="sales_'+i+'"><div class="container-fluid row"><div class="col-2"><i class="country-select-flag '+t.marketplaceId.toLowerCase()+'flag"><\/i><\/div>        <div class="col-2"><img src="'+t.imageLink+'">        <\/div>        <div class="col-8"><p>'+t.fullname+'<\/p>        <\/div>    <\/div><hr style="width:50%;"><div id="chartdiv'+salesChartIndex+n.marketplaceId+n.asin+'" style="width: 100%;height: 500px;"><\/div><div class="container-fluid font-weight-bold mt-3"><div class="row">'+v(3,salesChartIndex,n.marketplaceId,n.asin,"daily","weekly","monthly","yearly")+'<\/div><hr class="mb-3" style="width:50%;margin: auto;"><\/div>');$(".sales-asintabs .tab-content").append("<\/div>");et(salesChartIndex++,n.marketplaceId,n.asin)}else createAlert(t.responseTitle,t.responseSummary,t.responseText)}})):($('a[href="#sales-details"]').tab("show"),$('a[href="#sales_'+n.marketplaceId+n.asin+'"]').tab("show")));window.scrollTo(0,180)}function et(n,t,i){am4core.ready(function(){var e="chartdiv"+n+t+i,u,f,r;salesChart[n]=am4core.create(e,am4charts.XYChart);salesChart[n].numberFormatter.numberFormat={precision:-1,decimalSeparator:",",thousandsSeparator:"####"};salesChart[n].data=salesDataAlls[n].monthly;u=salesChart[n].xAxes.push(new am4charts.CategoryAxis);u.dataFields.category="date";u.renderer.grid.template.location=0;u.renderer.minGridDistance=30;f=salesChart[n].yAxes.push(new am4charts.ValueAxis);r=salesChart[n].series.push(new am4charts.ColumnSeries);r.dataFields.valueY="sales";r.dataFields.categoryX="date";r.name="Sales";r.tooltipText="{categoryX}: [bold]{valueY}[/]";r.strokeWidth=3;r.yAxis=f;salesChart[n].legend=new am4charts.Legend;salesChart[n].cursor=new am4charts.XYCursor;salesChart[n].cursor.behavior="none";salesChart[n].maxZoomLevel=1;salesChart[n].zoomOutButton.disabled=!0;$(".sales-asintabs .nav-tabs li").children("a").last().click()})}selectDataset=function(n,t){salesChartCurrentSet[n]!=t&&(salesChart[n].data=salesDataAlls[n][t],salesChartCurrentSet[n]=t)};switchMarket=function(n){$("#sales_"+n).length==0?($("#sales-markets-tab").show(),$.ajax({url:"/ProductSales/GetMarketsDetails/?marketplaceId="+n,type:"GET",success:function(t){var i,r;if(t.success){for(marketsDataAlls=t.marketsData,i=0,r=0;r<salesmarkets.length;r++)salesmarkets[r].marketPlaceId==n&&(i=r);$('a[href="#sales-markets"]').tab("show");$(".sales-marketstabs .nav-tabs").append('<li class="text-center" style="background-color: lightslategray;"><a href="#sales_'+salesmarkets[i].marketPlaceId+'" title="'+t.fullname+'"  data-toggle="tooltipmarket" data-placement="top" style="text-decoration: none;">&nbsp;&nbsp;&nbsp;&nbsp;'+t.name+'&nbsp;&nbsp;&nbsp;&nbsp;<\/a><span id="'+marketsChartIndex+'">x<\/span><\/li>');$(".sales-marketstabs .tab-content").append('<div class="tab-pane" id="sales_'+salesmarkets[i].marketPlaceId+'"><div class="container-fluid row"><div class="col-2"><i class="country-select-flag '+salesmarkets[i].marketPlaceId.toLowerCase()+'flag"><\/i><\/div><h3>'+t.fullname+'<\/h3><\/div><hr class="mb-5" style="width:50%"><div class="row mx-auto"><div class="col-6 col-md-3 mb-1"><div class="card bg-primary text-white h-100" style="text-align:center;"><div class="card-header">Today Orders<\/div><div class="card-body"><h5 class="card-title" style="font-size: xx-large;font-weight: bold;">'+salesmarkets[i].todayOrderQty+'<\/h5><\/div><\/div><\/div><div class="col-6 col-md-3 mb-1"><div class="card bg-primary text-white h-100" style="text-align:center;"><div class="card-header">Daily Avarage Orders<\/div><div class="card-body"><h5 class="card-title" style="font-size: xx-large;font-weight: bold;">'+salesmarkets[i].avarageDailyOrderQty+'<\/h5><\/div><\/div><\/div><div class="col-6 col-md-3 mb-1"><div class="card bg-primary text-white h-100" style="text-align:center;"><div class="card-header">Market Share<\/div><div class="card-body"><h5 class="card-title" style="font-size: xx-large;font-weight: bold;">'+salesmarkets[i].marketShare+'%<\/h5><\/div><\/div><\/div><div class="col-6 col-md-3 mb-1"><div class="card bg-primary text-white h-100" style="text-align:center;"><div class="card-header">Avarage Daily Sales<\/div><div class="card-body"><h5 class="card-title" style="font-size: xx-large;font-weight: bold;">'+salesmarkets[i].avarageDailySales+'<\/h5><\/div><\/div><\/div><\/div><hr class="mb-3 mt-3" style="width:50%;margin: auto;"><div id="chartdiv'+marketsChartIndex+salesmarkets[i].marketPlaceId+'" style="width: 100%;height: 500px;"><\/div><div class="container-fluid font-weight-bold mt-3"><div class="row">'+v(2,marketsChartIndex,salesmarkets[i].marketPlaceId,"","daily","weekly","monthly","yearly")+'<\/div><hr class="mb-3" style="width:50%;margin: auto;"><\/div>');$(".sales-asintabs .tab-content").append("<\/div>");ot(marketsChartIndex++,salesmarkets[i].marketPlaceId)}else createAlert(t.responseTitle,t.responseSummary,t.responseText)}})):($('a[href="#sales-markets"]').tab("show"),$('a[href="#sales_'+salesmarkets[salesmarketsId].marketPlaceId+'"]').tab("show"));window.scrollTo(0,180)};function a(n,t,i,r,u,f){$("."+n+" .nav-tabs").on("click","a",function(n){n.preventDefault();$(this).tab("show")}).on("click","span",function(){var o=$(this).siblings("a"),e;$(o.attr("href")).remove();$(this).parent().remove();e=parseInt($(this).attr("id"));t?(i[e]=null,r[e].dispose()):(i=null,r[e].dispose());this.parentElement.classList.contains("active")&&$("."+n+" .nav-tabs li").children("a").first().click();$("."+n+" ul li").length==0&&($("#"+u).hide(),$('a[href="#'+f+'"]').tab("show"))})}function v(t,i,r,u,f,e,o,s){var h,c,l,a,v,y,p;return t==2?(h='<input id="'+f+"-"+i+"-"+r+'" type="radio" class="btn-check" name="'+i+r+'" autocomplete="off" onclick="selectMarketsDataset('+i+",'"+f+"','"+r+"')\">",l='<input id="'+e+"-"+i+"-"+r+'" type="radio" class="btn-check" name="'+i+r+'" onclick="selectMarketsDataset('+i+",'"+e+"','"+r+"')\" >",v='<input id="'+o+"-"+i+"-"+r+'" type="radio" class="btn-check" name="'+i+r+'" onclick="selectMarketsDataset('+i+",'"+o+"','"+r+"')\" checked>",p='<input id="'+s+"-"+i+"-"+r+'" type="radio" class="btn-check" name="'+i+r+'" onclick="selectMarketsDataset('+i+",'"+s+"','"+r+"')\">",c='<label class="btn btn-outline-primary" for="'+f+"-"+i+"-"+r+'">'+n(f)+"<\/label>",a='<label class="btn btn-outline-primary" for="'+e+"-"+i+"-"+r+'">'+n(e)+"<\/label>",y='<label class="btn btn-outline-primary" for="'+o+"-"+i+"-"+r+'">'+n(o)+"<\/label>",yearLabel='<label class="btn btn-outline-primary" for="'+s+"-"+i+"-"+r+'">'+n(s)+"<\/label>"):t==3&&(h='<input id="'+f+"-"+i+"-"+r+"-"+u+'" type="radio" class="btn-check" name="'+i+r+u+'" autocomplete="off" onclick="selectDataset('+i+",'"+f+"','"+r+"','"+u+"')\">",l='<input id="'+e+"-"+i+"-"+r+"-"+u+'" type="radio" class="btn-check" name="'+i+r+u+'" autocomplete="off" onclick="selectDataset('+i+",'"+e+"','"+r+"','"+u+"')\">",v='<input id="'+o+"-"+i+"-"+r+"-"+u+'" type="radio" class="btn-check" name="'+i+r+u+'" autocomplete="off" onclick="selectDataset('+i+",'"+o+"','"+r+"','"+u+"')\" checked>",p='<input id="'+s+"-"+i+"-"+r+"-"+u+'" type="radio" class="btn-check" name="'+i+r+u+'" autocomplete="off" onclick="selectDataset('+i+",'"+s+"','"+r+"','"+u+"')\">",c='<label class="btn btn-outline-primary" for="'+f+"-"+i+"-"+r+"-"+u+'">'+n(f)+"<\/label>",a='<label class="btn btn-outline-primary" for="'+e+"-"+i+"-"+r+"-"+u+'">'+n(e)+"<\/label>",y='<label class="btn btn-outline-primary" for="'+o+"-"+i+"-"+r+"-"+u+'">'+n(o)+"<\/label>",yearLabel='<label class="btn btn-outline-primary" for="'+s+"-"+i+"-"+r+"-"+u+'">'+n(s)+"<\/label>"),'<div class="btn-group flex-wrap pb-5" role="group" aria-label="Basic radio toggle button group">'+h+c+l+a+v+y+p+yearLabel+"<\/div>"}function n(n){return n&&n[0].toUpperCase()+n.slice(1)}selectMarketsDataset=function(n,t){marketsChartCurrentSet[n]!=t&&(marketsChart[n].data=marketsDataAlls[t],marketsChartCurrentSet[n]=t)};function ot(n,t){am4core.ready(function(){var f="chartdiv"+n+t,r,u,i;marketsChart[n]=am4core.create(f,am4charts.XYChart);marketsChart[n].numberFormatter.numberFormat={precision:-1,decimalSeparator:",",thousandsSeparator:"####"};marketsChart[n].data=marketsDataAlls.monthly;r=marketsChart[n].xAxes.push(new am4charts.CategoryAxis);r.dataFields.category="date";r.renderer.grid.template.location=0;r.renderer.minGridDistance=30;u=marketsChart[n].yAxes.push(new am4charts.ValueAxis);i=marketsChart[n].series.push(new am4charts.ColumnSeries);i.dataFields.valueY="sales";i.dataFields.categoryX="date";i.name="Sales";i.tooltipText="{categoryX}: [bold]{valueY}[/]";i.strokeWidth=3;i.yAxis=u;marketsChart[n].legend=new am4charts.Legend;marketsChart[n].cursor=new am4charts.XYCursor;$(".sales-marketstabs .nav-tabs li").children("a").last().click()})}function kt(n,t,i){for(var i,r,o,u,e=typeof i!="undefined"?[i]:document.styleSheets,f=0,s=e.length;f<s;f++)if(i=e[f],i.cssRules)for(r=0,o=i.cssRules.length;r<o;r++)if(u=i.cssRules[r],u.selectorText&&u.selectorText.split(",").indexOf(t)!==-1)return u.style[n];return null}$(document).ready(function(){$('a[data-bs-toggle="tab"]').on("shown.bs.tab",function(n){var t=$(n.target).attr("href");t=="#sales-table"&&(initSalesTable||(initSalesTable=!0,$.ajax({url:"/ProductSales/GetOrdersTable/?marketCode="+currentMarket,type:"GET",success:function(n){n.success?(salesTableData=n.data,st(salesTableData,salesTableData.length)):createAlert(n.responseTitle,n.responseSummary,n.responseText)}})))})});function st(n){salesTable=$("#asinstable").DataTable({data:n,columns:salescolumnDefs,responsive:!0,initComplete:function(){showOpacity("asinstable","tableskeleton",salesTable)}});y("asinstable","tableskeleton",salesTable)}noSalesTableInitialized=!1;$(document).ready(function(){$('a[data-bs-toggle="tab"]').on("shown.bs.tab",function(n){var t=$(n.target).attr("href");t=="#nosales-table"&&(initnoSalesTable?u(3):(initnoSalesTable=!0,s()))})});function s(){$.ajax({url:"/ProductSales/GetNoOrdersTable/?marketCode="+currentMarket,type:"GET",success:function(n){n.success?(nosalesTableData=n.data,$("#t3-lastsalestime").text(n.updated+" "+$("#minutesagotext").text()),noSalesTableInitialized||(b(),clearInterval(t3incrementBeforintervalId),t3incrementBeforintervalId=setInterval(b,6e4),ht(nosalesTableData,nosalesTableData.length),noSalesTableInitialized=!0)):createAlert(n.responseTitle,n.responseSummary,n.responseText)}})}function ht(n){nosalesTable=$("#nosalestable").DataTable({data:$.grep(n,function(n){return n.noSales1Day}),columns:salescolumnDefs,responsive:!0,initComplete:function(){showOpacity("nosalestable","tableskeleton2",nosalesTable)}});y("nosalestable","tableskeleton2",nosalesTable)}function h(n,t,i){lt(i);n.clear().draw();n.rows.add(t);n.columns.adjust().draw()}function ct(n,t,i){i==1&&(newData=$.grep(t,function(n){return n.noSales1Day}));i==3&&(newData=$.grep(t,function(n){return n.noSales3Day}));i==7&&(newData=$.grep(t,function(n){return n.noSales7Day}));i==30&&(newData=$.grep(t,function(n){return n.noSales30Day}));(i==1||i==3||i==7||i==30)&&h(n,newData,"nosalestable")}selectnosalestable=function(n){ct(nosalesTable,nosalesTableData,n)};function lt(n){for($("#"+n).css("opacity",1),i=0;i<11;i++)setTimeout(()=>{$("#"+n).css("opacity",1-.1*i)},50);for(i=0;i<11;i++)setTimeout(()=>{$("#"+n).css("opacity",.1*i)},50)}function y(n,t,i){$("#"+n+" tbody").on("click","tr",function(n){var r=$(n.target).closest("td"),t;r.index()>0&&(t=i.row(this).data(),o(t))})}function p(){var n=parseInt($("#t1-lastsalestime").text());n++;$("#t1-lastsalestime").text(n+" "+$("#minutesagotext").text())}function w(){var n=parseInt($("#t2-lastsalestime").text());n++;$("#t2-lastsalestime").text(n+" "+$("#minutesagotext").text())}function b(){var n=parseInt($("#t3-lastsalestime").text());n++;$("#t3-lastsalestime").text(n+" "+$("#minutesagotext").text())}function k(){var n=parseInt($("#t4-lastsalestime").text());n++;$("#t4-lastsalestime").text(n+" "+$("#minutesagotext").text())}$(document).ready(function(){function n(){const n=new URLSearchParams(window.location.search),i=n.get("marketCode");if($("#sales-allcharts").hasClass("active")&&$("#salesallchartspagination").pagination("selectPage",1),$("#sales-asinscol").hasClass("active")){r();window.scrollTo(0,300);$("#asinssalespagination").pagination("drawPage",1);$.when(t(currentMarket,1,0)).then(todayASINsales=am4core.create("todaySaleschartdiv",am4charts.XYChart))}$("#nosales-table").hasClass("active")&&($("#nosales1day").click(),$.when(s()).then(h(nosalesTable,nosalesTableData,"nosalestable")));$("#sales").hasClass("active")&&(e(),$("#daily-overall").click())}setInterval(function(){n()},96e4)});function u(n){if(n==1&&f(1)&&(e(),$("#daily-overall").click()),n==2&&f(2)){r();window.scrollTo(0,300);$("#asinssalespagination").pagination("drawPage",1);$.when(t(currentMarket,1,0)).then(todayASINsales=am4core.create("todaySaleschartdiv",am4charts.XYChart))}n==3&&f(3)&&($("#nosales1day").click(),$.when(s()).then(h(nosalesTable,nosalesTableData,"nosalestable")));n==4&&f(4)&&$("#salesallchartspagination").pagination("selectPage",1)}function f(n){var t=parseInt($("#t"+n+"-lastsalestime").text().replace(/[^0-9]/g,""));return t>16?!0:!1}var initSalesCharts=!1,opts=[],uplot=[],optData=[[,],[,]],data,chartwidth,chartheight,chartdistr,salesallchartspaginationCreated=!1,mobileView;$(document).ready(function(){const n=new URLSearchParams(window.location.search),t=n.get("marketCode");$('a[data-bs-toggle="tab"]').on("shown.bs.tab",function(n){var i=$(n.target).attr("href");i=="#sales-allcharts"&&(initSalesCharts?u(4):(initSalesCharts=!0,mobileView=c(),d(t,mobileView,1)))})});function c(){return $(window).width()<1025?!0:!1}function d(n,t,i){$(window).width()<1025?(chartwidth=300,chartheight=200,chartdistr=1):(chartwidth=500,chartheight=300,chartdistr=2);vt();$.ajax({url:"/ProductSales/GetAsinsCharts/?marketCode="+n+"&mobileView="+t+"&toPage="+i,type:"GET",success:function(n){n.success&&(yt(),data=n.data,$("#t4-lastsalestime").text(n.updated+" "+$("#minutesagotext").text()),at(data,chartwidth,chartheight,chartdistr),n.totalSalesPages>1&&(salesallchartspaginationCreated||(k(),clearInterval(t4iincrementBeforintervalId),t4iincrementBeforintervalId=setInterval(k,6e4),salesallchartspaginationCreated=!0,$("#salesallchartspagination").pagination({items:n.totalSalesPages,displayedPages:5,currentPage:1,edges:0,cssStyle:"",prevText:'<span aria-hidden="true">&laquo;<\/span>',nextText:'<span aria-hidden="true">&raquo;<\/span>',onInit:function(){},onPageClick:function(n){pt(n,data.length)}}))))}})}function at(n,t,r,u){for(i=0;i<n.length;i++)optData[i]=n[i].asinsData;for(i=0;i<n.length;i++)$(".uplotcharts").append('<div class="col mb-3 charts" id="chart'+i+'"><\/div>'),opts[i]=wt(optData,i,n[i].asin,n[i].marketPlaceId,t,r,u),uplot[i]=new uPlot(opts[i],n[i].asinsData,document.getElementById("chart"+i)),$("#chart-"+n[i].asin+"-"+n[i].marketPlaceId+" .u-wrap").append('<img data-src="'+n[i].imageLink+'"  class="lazyload"/>'),$("#chart-"+n[i].asin+"-"+n[i].marketPlaceId+" .u-wrap").append('<i class="country-select-flag '+n[i].marketPlaceId+'flag"/>');$(window).width()<1025?($(".u-wrap img").css("position","absolute"),$(".u-wrap img").css("top","86%"),$(".u-wrap img").css("left","-3%"),$(".u-wrap img").css("width","60px"),$(".u-wrap img").css("height","60px"),$(".u-wrap i").css("position","absolute"),$(".u-wrap i").css("top","87%"),$(".u-wrap i").css("left","86%")):($(".u-wrap img").css("position","absolute"),$(".u-wrap img").css("top","86%"),$(".u-wrap img").css("left","-1%"),$(".u-wrap img").css("width","75px"),$(".u-wrap img").css("height","75px"),$(".u-wrap i").css("position","absolute"),$(".u-wrap i").css("top","-2%"),$(".u-wrap i").css("left","86%"))}function vt(){var n='<div class="row mx-auto">',t=15,r=350,u=650;if(c())var t=5,r=250,u=330;for(i=0;i<t;i++)n=n+'<div class="col mb-3"><div class="chartskeleton" style="width: '+u+"px; height: "+r+'px"><\/div><\/div>';n=n+"<\/div>";$("#chartsskeletoncontainer").append(n)}function yt(){$("#chartsskeletoncontainer").html("")}function pt(n,t){for(i=0;i<t;i++)uplot[i]!=null&&uplot[i].destroy();$(".uplotcharts").html("");optData=[[,],[,]];opts=[];uplot=[];const r=new URLSearchParams(window.location.search),u=r.get("marketCode");d(u,c(),n)}function dt(n,t,i){i.setData(n[t])}function wt(n,t,i,r,u,f){return{id:"chart-"+i+"-"+r,"class":"allcharts",width:u,height:f,plugins:[bt()],scales:{x:{time:!1,distr:2,range:(n,t,i)=>[t-.5,i+.5,]}},cursor:{points:{size:(n,t)=>n.series[t].points.size*2.5,width:(n,t,i)=>i/4,stroke:(n,t)=>n.series[t].points.stroke(n,t)+"90",fill:()=>"slategray"},sync:{key:0},drag:{x:!1,y:!1,setScale:!1}},axes:[{stroke:"#c7d0d9",grid:{width:.12/devicePixelRatio,stroke:"#fff"},values:(n,t)=>t},{stroke:"#c7d0d9",grid:{width:.12/devicePixelRatio,stroke:"#fff"}},],series:[{label:"Day",value:(n,t)=>t},{show:!0,spanGaps:!1,label:"Sales",value:(n,t)=>""+t.toFixed(0),fill:"#03273B",points:{show:!1},stroke:"slategray",width:1,fill:"rgba(68, 68, 68, .75)",paths:uPlot.paths.bars({})},],legend:[{}]}}function gt(n,t){var i=n,r=t}function ni(n){var t=new Date,i,r;return t.setDate(t.getDate()-n),i=t.getUTCDate(),r=t.getUTCMonth()+1,r+"/"+i}function bt(){function f(){let n=t.getBoundingClientRect();r=n.left+5;u=n.top}let t,i,r,u;const n=document.createElement("div");return n.className="uplotchartstooltip",n.style.display="none",n.style.position="absolute",n.style.background="",document.body.appendChild(n),{hooks:{init:r=>{t=r.over,i=t,t.onmouseenter=()=>{n.style.display="block"},t.onmouseleave=()=>{n.style.display="none"}},setSize:()=>{f()},setCursor:t=>{const{left:e,top:o,idx:f}=t.cursor,c=t.data[0][f],s=t.data[1][f],h={left:e+r,top:o+u};n.textContent=`${s} Items`;placement(n,h,"right","start",{bound:i})}}}}function ti(n){return"https://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=US&ASIN="+n+"&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=SL75"}(function(n){var t={init:function(i){var r=n.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:0,currentPage:0,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",ellipsePageSet:!0,cssStyle:"light-theme",listStyle:"",labelMap:[],selectOnClick:!0,nextAtFront:!1,invertPageOrder:!1,useStartEdge:!0,useEndEdge:!0,onPageClick:function(){},onInit:function(){}},i||{}),u=this;return r.pages=r.pages?r.pages:Math.ceil(r.items/r.itemsOnPage)?Math.ceil(r.items/r.itemsOnPage):1,r.currentPage=r.currentPage?r.currentPage-1:r.invertPageOrder?r.pages-1:0,r.halfDisplayed=r.displayedPages/2,this.each(function(){u.addClass(r.cssStyle+" simple-pagination").data("pagination",r);t._draw.call(u)}),r.onInit(),this},selectPage:function(n){return t._selectPage.call(this,n-1),this},prevPage:function(){var n=this.data("pagination");return n.invertPageOrder?n.currentPage<n.pages-1&&t._selectPage.call(this,n.currentPage+1):n.currentPage>0&&t._selectPage.call(this,n.currentPage-1),this},nextPage:function(){var n=this.data("pagination");return n.invertPageOrder?n.currentPage>0&&t._selectPage.call(this,n.currentPage-1):n.currentPage<n.pages-1&&t._selectPage.call(this,n.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},setPagesCount:function(n){this.data("pagination").pages=n},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},drawPage:function(n){var i=this.data("pagination");return i.currentPage=n-1,this.data("pagination",i),t._draw.call(this),this},redraw:function(){return t._draw.call(this),this},disable:function(){var n=this.data("pagination");return n.disabled=!0,this.data("pagination",n),t._draw.call(this),this},enable:function(){var n=this.data("pagination");return n.disabled=!1,this.data("pagination",n),t._draw.call(this),this},updateItems:function(n){var i=this.data("pagination");i.items=n;i.pages=t._getPages(i);this.data("pagination",i);t._draw.call(this)},updateItemsOnPage:function(n){var i=this.data("pagination");return i.itemsOnPage=n,i.pages=t._getPages(i),this.data("pagination",i),t._selectPage.call(this,0),this},getItemsOnPage:function(){return this.data("pagination").itemsOnPage},_draw:function(){var i=this.data("pagination"),r=t._getInterval(i),u,s,f,o,e;if(t.destroy.call(this),s=typeof this.prop=="function"?this.prop("tagName"):this.attr("tagName"),f=s==="UL"?this:n("<ul"+(i.listStyle?' class="'+i.listStyle+'"':"")+"><\/ul>").appendTo(this),i.prevText&&t._appendItem.call(this,i.invertPageOrder?i.currentPage+1:i.currentPage-1,{text:i.prevText,classes:"prev"}),i.nextText&&i.nextAtFront&&t._appendItem.call(this,i.invertPageOrder?i.currentPage-1:i.currentPage+1,{text:i.nextText,classes:"next"}),i.invertPageOrder){if(r.end<i.pages&&i.edges>0){if(i.useStartEdge)for(o=Math.max(i.pages-i.edges,r.end),u=i.pages-1;u>=o;u--)t._appendItem.call(this,u);i.pages-i.edges>r.end&&i.pages-i.edges-r.end!=1?f.append('<li class="page-item disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):i.pages-i.edges-r.end==1&&t._appendItem.call(this,r.end)}}else if(r.start>0&&i.edges>0){if(i.useStartEdge)for(e=Math.min(i.edges,r.start),u=0;u<e;u++)t._appendItem.call(this,u);i.edges<r.start&&r.start-i.edges!=1?f.append('<li class="page-item disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):r.start-i.edges==1&&t._appendItem.call(this,i.edges)}if(i.invertPageOrder)for(u=r.end-1;u>=r.start;u--)t._appendItem.call(this,u);else for(u=r.start;u<r.end;u++)t._appendItem.call(this,u);if(i.invertPageOrder){if(r.start>0&&i.edges>0&&(i.edges<r.start&&r.start-i.edges!=1?f.append('<li class=" page-item disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):r.start-i.edges==1&&t._appendItem.call(this,i.edges),i.useEndEdge))for(e=Math.min(i.edges,r.start),u=e-1;u>=0;u--)t._appendItem.call(this,u)}else if(r.end<i.pages&&i.edges>0&&(i.pages-i.edges>r.end&&i.pages-i.edges-r.end!=1?f.append('<li class=" page-item disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):i.pages-i.edges-r.end==1&&t._appendItem.call(this,r.end),i.useEndEdge))for(o=Math.max(i.pages-i.edges,r.end),u=o;u<i.pages;u++)t._appendItem.call(this,u);i.nextText&&!i.nextAtFront&&t._appendItem.call(this,i.invertPageOrder?i.currentPage-1:i.currentPage+1,{text:i.nextText,classes:"next"});i.ellipsePageSet&&!i.disabled&&t._ellipseClick.call(this,f)},_getPages:function(n){var t=Math.ceil(n.items/n.itemsOnPage);return t||1},_getInterval:function(n){return{start:Math.ceil(n.currentPage>n.halfDisplayed?Math.max(Math.min(n.currentPage-n.halfDisplayed,n.pages-n.displayedPages),0):0),end:Math.ceil(n.currentPage>n.halfDisplayed?Math.min(n.currentPage+n.halfDisplayed,n.pages):Math.min(n.displayedPages,n.pages))}},_appendItem:function(i,r){var s=this,f,e,u=s.data("pagination"),o=n('<li class="page-item"><\/li>'),h=s.find("ul");i=i<0?0:i<u.pages?i:u.pages-1;f={text:i+1,classes:""};u.labelMap.length&&u.labelMap[i]&&(f.text=u.labelMap[i]);f=n.extend(f,r||{});i==u.currentPage||u.disabled?(u.disabled||f.classes==="prev"||f.classes==="next"?o.addClass("disabled"):o.addClass("active"),e=n('<a href="'+u.hrefTextPrefix+(i+1)+u.hrefTextSuffix+'" class="page-link">'+f.text+"<\/a>")):(e=n('<a href="'+u.hrefTextPrefix+(i+1)+u.hrefTextSuffix+'" class="page-link">'+f.text+"<\/a>"),e.click(function(n){return t._selectPage.call(s,i,n)}));f.classes&&e.addClass(f.classes);o.append(e);h.length?h.append(o):s.append(o)},_selectPage:function(n,i){var r=this.data("pagination");r.currentPage=n;r.selectOnClick&&t._draw.call(this);return r.onPageClick(n+1,i)},_ellipseClick:function(i){var f=this,r=this.data("pagination"),u=i.find(".ellipse");u.addClass("clickable").parent().removeClass("disabled");u.click(function(){if(!r.disable){var i=n(this),e=(parseInt(i.parent().prev().text(),10)||0)+1;i.html('<input type="number" min="1" max="'+r.pages+'" step="1" value="'+e+'">').find("input").focus().click(function(n){n.stopPropagation()}).keyup(function(i){var e=n(this).val();i.which===13&&e!==""?e>0&&e<=r.pages&&t._selectPage.call(f,e-1):i.which===27&&u.empty().html(r.ellipseText)}).bind("blur",function(){var i=n(this).val();return i!==""&&t._selectPage.call(f,i-1),u.empty().html(r.ellipseText),!1})}return!1})}};n.fn.pagination=function(i){if(t[i]&&i.charAt(0)!="_")return t[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist on jQuery.pagination");else return t.init.apply(this,arguments)}})(jQuery)}if($("#"+ReportsFeedbackspage+pagevar).length>0){$("#"+ReportsFeedbackspage+sidevar).addClass(activeclass);var pendingfbdatatable,urftable,tbldata,emailgeneric="%2C%0D%0DThanks%20for%20taking%20the%20time%20to%20let%20us%20know%20about%20your%20most%20recent%20experience%2C%0DWe%20sincerely%20apologize%20for%20the%20experience%20you%20had%20and%20hope%20you%20give%20us%20another%20chance%20to%20earn%20your%20business%2E%0D%0D%0D%0D%0DBest%20Regards%2C",activetab=0,urftbldata,urfinit=!0,pendingFeedbacktableInitComplete=!1,fbdata,urfeedbackCnt=0,pfeedbackCnt=0,feedbacks,resolvableFeedbacks,unresolvableFeedbacks,ptbldata,urftbldate,pendingfbColumnDefs=[{data:"shipFromAddressCountryCode",title:"From",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Item",orderable:!1,render:function(n,t,i){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<a class="no-icon" href="'+i.orderLink+'" target="_blank"><img data-src="'+n+'" class="lazyload">'}},{data:"feedbackDate",title:"Date",className:"carrier-truncate-minwidth",orderable:!0,render:function(n,t,i){var r=n.split("T")[0],u=i.purchasedDate.split("T")[0],f='<div class="container" style="font-size: xx-small"><div class="row mx-auto"><div class="col">'+r+'<\/div><\/div><div class="row row-col-1 mx-auto"><div class="col">Purchased On: <\/div><div class="col">'+u+'<\/div><\/div><div class="row mx-auto"><div class="col">Kept for <span style="font-weight: bold;">'+i.feedBackDays+"<\/span> Days";return f}},{data:"stars",title:"Stars",orderable:!0,render:function(n){return n==1?'<i class="zmdi zmdi-star mdc-text-red"><\/i>':n==2?'<i class="zmdi zmdi-star mdc-text-red"><\/i><i class="zmdi zmdi-star mdc-text-red"><\/i>':n==3?'<i class="zmdi zmdi-star mdc-text-red"><\/i><i class="zmdi zmdi-star mdc-text-red"><\/i><i class="zmdi zmdi-star mdc-text-red"><\/i>':""}},{data:"feedback",title:"Feedback",className:"carrier-truncate-lg",orderable:!1,render:function(n,t,i){return'<span data-toggle="tooltip" data-placement="top" title="'+i.feedbackTranslated+'" style="cursor: default;">'+n+"<\/span>"}},{data:"unResolvable",title:"Remove",orderable:!0,render:function(n,t,i){var r="";return n&&(r="checked"),'<a href="#" onclick="unResolvableToggle(\''+i.orderId+'\')"><div class="form-check form-switch"><input class="form-check-input" type="checkbox" id="'+i.orderId+'" '+r+"><\/div><\/a>"}},{data:"emailed",title:"Emailed",orderable:!0,render:function(n,t,i){var r=!0,u="";return n&&(u="checked"),'<div class="container"><div class="row row-col-1"><div class="col"><a href="#" onclick="emailToggle(\'e'+i.orderId+"',"+!r+')"><div class="form-check form-switch"><input class="form-check-input eselect" '+u+' type="checkbox" id="e'+i.orderId+'"><\/div><\/a><\/div><div class="col"><a class="no-icon" href="'+i.emailLink+'" target="_blank" onclick="emailToggle(\'e'+i.orderId+"',"+r+')"><i class="zmdi zmdi-email"><\/i><\/a><\/div><\/div><\/div>'}},{data:"responded",title:"Responded",orderable:!0,render:function(n,t,i){return n?'<a class="no-icon" href="'+i.feedbackGeneralLink+'" target="_blank"><i class="zmdi zmdi-check-circle zmdi-hc-3x mdc-text-green"><\/i><\/a>':'<a class="no-icon" href="'+i.feedbackGeneralLink+'" target="_blank"><i class="zmdi zmdi-close-circle zmdi-hc-3x mdc-text-red"><\/i><\/a>'}}],urfcolumnDefs=[{data:"shipFromAddressCountryCode",title:"From",orderable:!1,render:function(n,t,i){return'<a class="no-icon" href="'+i.sellercentral+"/gp/orders-v2/details/?ie=UTF8&amp;orderID="+i.orderId+'" target="_blank"><i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Item",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"feedbackDate",title:"Date",orderable:!0,render:function(n,t,i){var r=n.split("T")[0],u=i.purchasedDate.split("T")[0],f='<div class="container" style="font-size: xx-small"><div class="row mx-auto"><div class="col">'+r+'<\/div><\/div><div class="row row-col-1 mx-auto"><div class="col">Purchased On: <\/div><div class="col">'+u+'<\/div><\/div><div class="row mx-auto"><div class="col">Kept for <span style="font-weight: bold;">'+i.feedBackDays+"<\/span> Days";return f}},{data:"stars",title:"Stars",orderable:!0,render:function(n){return n==1?'<i class="zmdi zmdi-star mdc-text-red"><\/i>':n==2?'<i class="zmdi zmdi-star mdc-text-red"><\/i><i class="zmdi zmdi-star mdc-text-red"><\/i>':n==3?'<i class="zmdi zmdi-star mdc-text-red"><\/i><i class="zmdi zmdi-star mdc-text-red"><\/i><i class="zmdi zmdi-star mdc-text-red"><\/i>':""}},{data:"feedback",title:"Feedback",className:"carrier-truncate-lg",orderable:!1,render:function(n,t,i){return'<span data-toggle="tooltip" data-placement="top" title="'+i.feedbackTranslated+'" style="cursor: default;">'+n+"<\/span>"}},{data:"unResolvable",title:"Remove",orderable:!0,render:function(n,t,i){var r="";return n&&(r="checked"),'<a href="#" onclick="unResolvableToggle2(\''+i.orderId+'\')"><div class="form-check form-switch"><input class="form-check-input" type="checkbox" id="urf'+i.orderId+'" checked><\/div><\/a>'}}];$(document).ready(function(){var t;$.ajax({url:"/ReportsFeedbacks/GetFeedbacks/",type:"GET",data:t,beforeSend:function(){},complete:function(){},success:function(t){if(t.success){for(feedbacks=t.data,urftbldata=feedbacks.map(n=>Object.assign({},n)),ptbldata=feedbacks.map(n=>Object.assign({},n)),i=0;i<feedbacks.length;i++)feedbacks[i].unResolvable?delete ptbldata[i]:delete urftbldata[i];urftbldata=urftbldata.filter(function(n){return n!=null});ptbldata=ptbldata.filter(function(n){return n!=null});$("#pending-feedbacks").removeClass("hide");$("#pending-feedbacks").addClass("show");n()}else createAlert(t.responseTitle,t.responseSummary,t.responseText)}})});function n(){pendingfbdatatable=$("#pendingfbdatatable").DataTable({data:ptbldata,columns:pendingfbColumnDefs,responsive:!0,info:!1,initComplete:function(){if(tbldata=feedbacks,urfinit){for(pfeedbackCnt=0,t(),pendingFeedbacktableInitComplete=!0,pfeedbackCnt=0,i=0;i<tbldata.length;i++)tbldata[i].unResolvable||pfeedbackCnt++;$("#pending-feedbacks-tab").text("Pending Feedbacks ("+pfeedbackCnt+")");showOpacity("pendingfbdatatable","tableskeleton",pendingfbdatatable)}},drawCallback:function(){$('[data-toggle="tooltip"]').tooltip()},createdRow:function(n,t){var i=t.stars;i==1&&$(n).addClass("fb-onestar");i==2&&$(n).addClass("fb-twostar")},rowCallback:function(n,t){if(t.unResolvable==!0&&$(n).hide(),pendingFeedbacktableInitComplete)for(pfeedbackCnt=0,i=0;i<tbldata.length;i++)tbldata[i].unResolvable||pfeedbackCnt++;$("#pending-feedbacks-tab").text("Pending Feedbacks ("+pfeedbackCnt+")")}})}function t(){fbdata=r(tbldata);urftable=$("#urfdatatable").DataTable({data:urftbldata,columns:urfcolumnDefs,responsive:!0,info:!1,initComplete:function(){},drawCallback:function(){$('[data-toggle="tooltip"]').tooltip()},createdRow:function(n,t){var i=t.stars;i==1&&$(n).addClass("fb-onestar");i==2&&$(n).addClass("fb-twostar")},rowCallback:function(n,t){for(t.unResolvable!=!0&&$(n).hide(),urfeedbackCnt=0,i=0;i<tbldata.length;i++)tbldata[i].unResolvable&&urfeedbackCnt++;$("#ur-feedbacks-tab").text("Unresolvable Feedbacks ("+urfeedbackCnt+")")}})}function r(n){for(var i,r,u,f=[],t=0,e=n.length;t<e;t++){i=n[t];r={};for(u in i)r[u]=i[u];f.push(r)}return f}function u(){var t,n;for(tbldata.rows().every(function(n,i,r){tbldata.cell(r,4).data()==!1&&tbldata.row(r).remove().draw();t=r}),n=0;n<t;n++)tbldata.rows().every(function(n,t,i){tbldata.cell(i,4).data()==!1&&tbldata.row(i).remove().draw()})}var unResolvableToggle=function(n){if(!$("#"+n).is(":disabled")){$("#"+n).closest("tr").css("pointer-events","none");var t=$("#"+n).prop("checked");$("#"+n).prop("disabled","true");$.ajax({url:"ReportsFeedbacks/ToggleUnresolvable/?orderId="+n+"&v=True",type:"POST","async":!0,success:function(r){if(r.success){for(createMiniAlert("Ok","","","success"),$("#"+n).closest("tr").fadeOut(1e3),feedbackCount=localStorage.getItem("feedbackCount"),feedbackCount--,localStorage.setItem("feedbackCount",feedbackCount),setfbColors(feedbackCount),pfeedbackCnt--,$("#pending-feedbacks-tab").text("Pending Feedbacks ("+pfeedbackCnt+")"),i=0;i<tbldata.length;i++)tbldata[i].orderId==n&&(tbldata[i].unResolvable=!0);for(urftbldata=tbldata.map(n=>Object.assign({},n)),ptbldata=tbldata.map(n=>Object.assign({},n)),i=0;i<tbldata.length;i++)tbldata[i].unResolvable?delete ptbldata[i]:delete urftbldata[i];urftbldata=urftbldata.filter(function(n){return n!=null});ptbldata=ptbldata.filter(function(n){return n!=null});urftable.clear().rows.add(urftbldata).draw();setTimeout(function(){pendingfbdatatable.clear().rows.add(ptbldata).draw()},1e3)}else createAlert(r.responseTitle,r.responseSummary,r.responseText),$("#"+n).removeAttr("disabled"),$("#"+n).closest("tr").css("pointer-events","auto"),$("#"+n).prop("checked",!t)}})}},unResolvableToggle2=function(n){if(!$("#urf"+n).is(":disabled")){var t=$("#urf"+n).prop("checked");$("#urf"+n).prop("disabled","true");$("#urf"+n).closest("tr").css("pointer-events","none");$.ajax({url:"/ReportsFeedbacks/ToggleUnresolvable/?orderId="+n+"&v=False",type:"POST","async":!0,success:function(r){if(r.success){for(createMiniAlert("Ok","","","success"),$("#urf"+n).closest("tr").fadeOut(1e3),feedbackCount=localStorage.getItem("feedbackCount"),feedbackCount++,localStorage.setItem("feedbackCount",feedbackCount),setfbColors(feedbackCount),urfeedbackCnt--,$("#ur-feedbacks-tab").text("Unresolvable Feedbacks ("+urfeedbackCnt+")"),i=0;i<tbldata.length;i++)tbldata[i].orderId==n&&(tbldata[i].unResolvable=!1);for(ptbldata=tbldata.map(n=>Object.assign({},n)),urftbldata=tbldata.map(n=>Object.assign({},n)),i=0;i<tbldata.length;i++)tbldata[i].unResolvable?delete ptbldata[i]:delete urftbldata[i];ptbldata=ptbldata.filter(function(n){return n!=null});urftbldata=urftbldata.filter(function(n){return n!=null});pendingfbdatatable.clear().rows.add(ptbldata).draw();setTimeout(function(){urftable.clear().rows.add(urftbldata).draw()},1e3)}else createAlert(r.responseTitle,r.responseSummary,r.responseText),$("#urf"+n).removeAttr("disabled"),$("#urf"+n).closest("tr").css("pointer-events","auto"),$("#urf"+n).prop("checked",!t)}})}},emailToggle=function(n,t){var r=!0,u,i;t&&(i=$("#"+n).prop("checked"),i&&(r=!1));r&&($("#"+n).is(":disabled")||($("#"+n).closest("tr").css("pointer-events","none"),u=n.split("e")[1],i=$("#"+n).prop("checked"),$("#"+n).prop("disabled","true"),$.ajax({url:"/ReportsFeedbacks/ToggleEmail/?orderId="+u+"&v="+$("#"+n).prop("checked"),type:"POST","async":!0,success:function(r){r.success?(createMiniAlert("Ok","","","success"),t&&$("#"+n).prop("checked","true")):(createAlert(r.responseTitle,r.responseSummary,r.responseText),t||$("#"+n).prop("checked",!i));setTimeout(function(){$("#"+n).closest("tr").css("pointer-events","auto");$("#"+n).removeAttr("disabled")},500)}})))};$('a[data-bs-toggle="tab"]').on("shown.bs.tab",function(n){var t=$(n.target).attr("href");t=="#pending-feedbacks"?($("#tabtitle").html("Pending Feedbacks"),activetab=0):t=="#ur-feedbacks"&&(activetab=1,$("#tabtitle").html("All Feedbacks"))})}if($("#"+ReportsRefundspage+pagevar).length>0){$("#"+ReportsRefundspage+sidevar).addClass(activeclass);var refundstable,refundsChart=[],refundsChartCurrentSet=[],refundsChartIndex=0,refundDataAlls=[[,],[,]],refundcolumnDefs=[{data:"marketplaceId",title:"Market Place",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return n.length<10?' <i class="zmdi zmdi-close" style="font-size: xxx-large;color: red;"><\/i>':'<img data-src="'+n+'" class="lazyload">'}},{data:"sales30days",title:"30 days Sales",orderable:!0,className:"dt-body-center"},{data:"refunds30days",title:"Refunds",orderable:!0,className:"dt-body-center"},{data:"refundsComments30days",title:"Comments",orderable:!0,className:"dt-body-center"},{data:"unAckrefundsComments30days",title:"Unread Comments",orderable:!0,className:"dt-body-center",render:function(n,t,i){return'<div id="comm-'+i.marketplaceId+i.asin+'">'+n+"<\/div>"}},{data:"crtiticalRefunds30days",title:"Critical",orderable:!0,render:function(n,t,i){return'<div style="display:flex; background-color:'+i.color+';"><div style="width: 100%;text-align: left;margin-left: 5px; color:'+i.textColor+'">'+i.crtiticalRefunds30daysPct+'%<\/div><div style="width: 100%;text-align: right;margin-right: 5px; color:'+i.textColor+'">'+n+"<\/div><\/div>"}},],refundcommentsDefs=[{data:"returnDate",title:"Date",orderable:!0},{data:"generalReason",title:"Reason",orderable:!0},{data:"customerComments",title:"Customer Comments",orderable:!1,render:function(n,t,i){return'<span data-toggle="tooltip" data-placement="top" title="'+i.customerCommentsTranslated+'" style="cursor: default;">'+n+"<\/span>"}},{data:"ack",title:"Mark as Read",orderable:!0,render:function(n,t,i){var r="";return n&&(r="checked"),'<a href="#" onclick="ackToggle(\''+i.id+'\')"><div class="form-check form-switch"><input class="form-check-input eselect" '+r+' type="checkbox" id="'+i.id+'"><\/div><\/a>'}}];$(document).ready(function(){function t(n,t){var i=$("#"+n).DataTable({data:t,columns:refundcommentsDefs,responsive:!0,drawCallback:function(){$('[data-toggle="tooltip"]').tooltip()}});$(".refunds-asintabs .nav-tabs li").children("a").last().click()}refundstable=$("#refundsdatatable").DataTable({ajax:"/ReportsRefunds/GetProductRefunds/",columns:refundcolumnDefs,responsive:!0,processing:!0,initComplete:function(){showOpacity("refundsdatatable","tableskeleton",refundstable)}});$("#refundsdatatable tbody").on("click","tr",function(){var i=refundstable.row(this).data();$("#refund_"+i.marketplaceId+i.asin).length==0?$.ajax({url:"/ReportsRefunds/GetProductRefundsDetails/?marketplaceId="+i.marketplaceId+"&asin="+i.asin+"&il="+i.imageLink+"&title="+i.title,type:"GET",data:i,success:function(r){if(r.success){refundDataAlls[refundsChartIndex]=r.refundData;createMiniAlert("Ok","","","success");$('a[href="#refunds-details"]').tab("show");var u=i.marketplaceId+i.asin;$(".refunds-asintabs .nav-tabs").append('<li class="nav-item"><a class="nav-link" href="#refund_'+u+'" title="'+r.fullname+'">'+r.name+'<\/a><span id="'+refundsChartIndex+'">x<\/span><\/li>');$(".refunds-asintabs .tab-content").append('<div class="tab-pane" id="refund_'+u+'"><div class="container-fluid"><div class="row mx-auto"><div class="col-2"><i class="country-select-flag '+r.marketplaceId.toLowerCase()+'flag"><\/i><\/div>        <div class="col-2"><img src="'+r.imageLink+'">        <\/div>        <div class="col-8"><p>'+r.fullname+'<\/p>        <\/div>    <\/div>    <\/div><hr style="width:50%";margin: auto;><div class="row mx-auto bm-3"><div class="col-md-3"><div class="card bg-danger text-white h-100" style="text-align:center;"><div class="card-header">Defective Or Not As Described<\/div><div class="card-body"><h5 class="card-title" style="font-size: xx-large;font-weight: bold;">'+r.defictiveOrNotAsDescribed+'%<\/h5><\/div><\/div><\/div><div class="col-md-3"><div class="card bg-primary text-white h-100" style="text-align:center;"><div class="card-header">Found Better Price<\/div><div class="card-body"><h5 class="card-title" style="font-size: xx-large;font-weight: bold;">'+r.foundBetterPrice+'%<\/h5><\/div><\/div><\/div><div class="col-md-3"><div class="card bg-primary text-white h-100" style="text-align:center;"><div class="card-header">Customer Order Mistake<\/div><div class="card-body"><h5 class="card-title" style="font-size: xx-large;font-weight: bold;">'+r.customerOrderMistake+'%<\/h5><\/div><\/div><\/div><div class="col-md-3"><div class="card bg-primary text-white h-100" style="text-align:center;"><div class="card-header">Carrier Or FC Issue<\/div><div class="card-body"><h5 class="card-title" style="font-size: xx-large;font-weight: bold;">'+r.carrierOrFCIssue+'%<\/h5><\/div><\/div><\/div><\/div><hr style="width:50%;margin: auto;"><div id="chartdiv'+refundsChartIndex+i.marketplaceId+i.asin+'" style="width: 100%;height: 500px;"><\/div><div class="container-fluid font-weight-bold mt-3 mb-3"><div class="row  mx-auto"><div class="col-6" style="text-align: end;"><a id="monthly-'+refundsChartIndex+"-"+i.marketplaceId+"-"+i.asin+'" class="btn btn-primary monthly" onclick="selectDataset('+refundsChartIndex+",'monthly','"+i.marketplaceId+"','"+i.asin+'\')" role="button" style="width:120px;color:white;cursor:pointer;">Monthly<\/a><\/div><div class="col-6"><a id="yearly-'+refundsChartIndex+"-"+i.marketplaceId+"-"+i.asin+'" class="btn btn-primary yearly" onclick="selectDataset('+refundsChartIndex+",'yearly','"+i.marketplaceId+"','"+i.asin+'\')" role="button" style="width:120px;color:white;cursor:pointer;">Yearly<\/a><\/div><\/div><\/div><hr style="width:50%;margin: auto;"><div class="row mt-3 mx-auto"><table id = "'+u+'" class="display" style="width:100%;"><thead><tr><th>Date<\/th><th>Reason<\/th><th>Comment<\/th><th>Acknoledge<\/th><\/tr><\/thead><tfoot><tr><th>Date<\/th><th>Reason<\/th><th>Comment<\/th><th>Acknoledge<\/th><\/tr><\/tfoot><\/table><\/div><\/div>');t(u,r.data);n(refundsChartIndex++,i.marketplaceId,i.asin)}else createAlert(r.responseTitle,r.responseSummary,r.responseText)}}):($('a[href="#refunds-details"]').tab("show"),$('a[href="#refunds_'+i.marketplaceId+i.asin+'"]').tab("show"))});$(".nav-tabs").on("click","a",function(n){n.preventDefault();$(this).tab("show")}).on("click","span",function(){var n=$(this).siblings("a"),t;$(n.attr("href")).remove();$(this).parent().remove();t=parseInt($(this).attr("id"));refundDataAlls[t]=null;n[0].classList.contains("active")&&$(".refunds-asintabs .nav-tabs li").children("a").first().click()})});translateCustomerComments=function(n){$("#trans").modal("show");$.ajax({url:"/ReportsRefunds/Translate/?cc="+n,type:"GET","async":!0,beforeSend:function(){$("#trans-body").html("");$("#trans-body").addClass("zmdi zmdi-rotate-right zmdi-hc-3x zmdi-hc-spin")},success:function(n){$("#trans-body").removeClass("zmdi zmdi-rotate-right zmdi-hc-3x zmdi-hc-spin");n.success?($("#trans-body").html(n.translate),createMiniAlert("Ok","","","success")):createAlert(n.responseTitle,n.responseSummary,n.responseText)}})};ackToggle=function(n){var t;!0&&($("#"+n).closest("tr").css("pointer-events","none"),$("#"+n).is(":disabled")||(t=$("#"+n).prop("checked"),$("#"+n).prop("disabled","true"),$.ajax({url:"/ReportsRefunds/ToggleAck/?id="+n+"&v="+$("#"+n).prop("checked"),type:"POST","async":!0,success:function(i){if(i.success){createMiniAlert("Ok","","","success");var u="comm-"+i.marketplaceId+i.asin,r=$("#"+u).text();refundsUnackCommentsCount=localStorage.getItem("refundsUnackCommentsCount");$("#"+n).prop("checked")?(refundsUnackCommentsCount--,r--):(refundsUnackCommentsCount++,r++);localStorage.setItem("refundsUnackCommentsCount",refundsUnackCommentsCount);setrfndColors(refundsUnackCommentsCount);$("#"+u).text(r);setTimeout(function(){$("#"+n).removeAttr("disabled");$("#"+n).closest("tr").css("pointer-events","auto")},500)}else createAlert(i.responseTitle,i.responseSummary,i.responseText),setTimeout(function(){$("#"+n).removeAttr("disabled");$("#"+n).closest("tr").css("pointer-events","auto");$("#"+n).prop("checked",!t)},500)}})))};function n(n,t,i){am4core.ready(function(){var c="chartdiv"+n+t+i,o,l,r,e,h,s,f,u;refundsChart[n]=am4core.create(c,am4charts.XYChart);refundsChart[n].data=refundDataAlls[n].monthly;o=refundsChart[n].xAxes.push(new am4charts.CategoryAxis);o.dataFields.category="date";o.renderer.grid.template.location=0;o.renderer.minGridDistance=30;l=refundsChart[n].yAxes.push(new am4charts.ValueAxis);r=refundsChart[n].series.push(new am4charts.ColumnSeries);r.dataFields.valueY="qty";r.dataFields.categoryX="date";r.name="Refunds";r.columns.template.tooltipText="{categoryX}: [bold]{valueY}[/]";r.columns.template.fillOpacity=.8;e=r.bullets.push(new am4charts.CircleBullet);e.circle.strokeWidth=2;e.circle.radius=4;e.circle.fill=am4core.color("#fff");h=e.states.create("hover");h.properties.scale=2;s=r.columns.template;s.strokeWidth=2;s.strokeOpacity=1;f=refundsChart[n].yAxes.push(new am4charts.ValueAxis);f.title.text="Refund Percentage";f.renderer.opposite=!0;f.min=0;f.max=100;u=refundsChart[n].series.push(new am4charts.LineSeries);u.dataFields.valueY="pct";u.dataFields.categoryX="date";u.name="Refunds Percentage";u.tooltipText="{categoryX}: [bold]{valueY}[/]%";u.strokeWidth=3;u.yAxis=f;refundsChart[n].legend=new am4charts.Legend;refundsChart[n].cursor=new am4charts.XYCursor;refundsChart[n].cursor=new am4charts.XYCursor;refundsChart[n].cursor.behavior="none";refundsChart[n].maxZoomLevel=1;refundsChart[n].zoomOutButton.disabled=!0})}selectDataset=function(n,t){refundsChartCurrentSet[n]!=t&&(refundsChart[n].data=refundDataAlls[n][t],refundsChartCurrentSet[n]=t)}}if($("#"+Vendorspage+pagevar).length>0){$("#"+Vendorspage+sidevar).addClass(activeclass);$(document).ready(function(){var n=[{data:"name",title:"Vendor Name"},{data:"street",title:"Adress"},{data:"city",title:"City"},{data:"state",title:"State"},{data:"country",title:"Country"},{data:"zipCode",title:"Zip Code"},{data:"phone",title:"Phone"},{data:"email",title:"Email"},{data:"website",title:"Website"},{data:"currencyCode",title:"Currency"},{data:"vendorId",title:"Edit/Delete",orderable:!1,render:function(n){return'<a href="#" onclick="EditComponent(\''+n+'\')"><div style="display:flex "><i class="zmdi zmdi-edit mdc-text-light-blue  zmdi-hc-2x"><\/i><\/a><a href="#" onclick="DeleteComponent(\''+n+'\')"><i class="zmdi zmdi-delete mdc-text-light-red  zmdi-hc-2x" style="padding-left: 20px;"><\/i><\/a><\/div>'}}];vendorstable=$("#vendorstable").DataTable({ajax:"/Vendors/GetVendors/",columns:n,responsive:!0,initComplete:function(){showOpacity("vendorstable","tableskeleton",vendorstable)}});$("#vendorName").change(function(){var n=this.value;n=n.toLowerCase();n=="no vendor"&&(this.value=n)});$("#EditModal").on("change","#vendorNameEdit",function(){var n=this.value;n=n.toLowerCase();n=="no vendor"&&(this.value=n)});$("#countryAddSelect").change(function(){var n=this.value;n=="United States"&&$("#currencyCode").val("USD").change();n=="China"&&$("#currencyCode").val("CNY").change();n=="United Kingdom"&&$("#currencyCode").val("GBP").change();n=="Japan"&&$("#currencyCode").val("JPY").change();n=="Germany"&&$("#currencyCode").val("EUR").change();n=="Italy"&&$("#currencyCode").val("EUR").change();n=="Spain"&&$("#currencyCode").val("EUR").change();n=="France"&&$("#currencyCode").val("EUR").change();n=="Canada"&&$("#currencyCode").val("CAD").change();n=="Mexico"&&$("#currencyCode").val("MXN").change();n=="India"&&$("#currencyCode").val("INR").change();n=="Australia"&&$("#currencyCode").val("AUD").change();n=="Brazil"&&$("#currencyCode").val("BRL").change();n=="Turkey"&&$("#currencyCode").val("TRY").change();n=="United Arab Emirates"&&$("#currencyCode").val("AED").change()});$("#EditModal").on("change","#countryAddSelect",function(){var n=this.value;n=="United States"&&$("#EditModal #currencyCode").val("USD").change();n=="China"&&$("#EditModal #currencyCode").val("CNY").change();n=="United Kingdom"&&$("#EditModal #currencyCode").val("GBP").change();n=="Japan"&&$("#EditModal #currencyCode").val("JPY").change();n=="Germany"&&$("#EditModal #currencyCode").val("EUR").change();n=="Italy"&&$("#EditModal #currencyCode").val("EUR").change();n=="Spain"&&$("#EditModal #currencyCode").val("EUR").change();n=="France"&&$("#EditModal #currencyCode").val("EUR").change();n=="Canada"&&$("#EditModal #currencyCode").val("CAD").change();n=="Mexico"&&$("#EditModal #currencyCode").val("MXN").change();n=="India"&&$("#EditModal #currencyCode").val("INR").change();n=="Australia"&&$("#EditModal #currencyCode").val("AUD").change();n=="Brazil"&&$("#EditModal #currencyCode").val("BRL").change();n=="Turkey"&&$("#EditModal #currencyCode").val("TRY").change();n=="United Arab Emirates"&&$("#EditModal #currencyCode").val("AED").change()})});AddComponent=function(){$("#AddModal").modal("show")};$("#AddBtn").on("click",function(){if($("#formCreate").validate(),$("#formCreate").valid()){var t=$("#formCreate").serialize();addWaitingDotsToButton("AddBtn","AddModalFooter");setTimeout(function(){$("#AddModal").modal("hide")},2e3);$.ajax({url:"/Vendors/Create/",type:"POST",data:t,success:function(t){t.success?(createMiniAlert("Ok","","","success"),vendorstable.ajax.reload(null,!1),n("formCreate")):createAlert(t.responseTitle,t.responseSummary,t.responseText);removeWaitingDotsToButton("AddBtn","AddModalFooter")}})}});DeleteComponent=function(n){var t="Vendors/Delete/"+n;$("#DeleteModalBodyDiv").load(t,function(){$("#DeleteModal").modal("show")})};$("#DeleteModal").on("click","#DeleteBtn",function(){var n=$("#DeleteModal #vendorId").val(),t=$("#DeleteModal #formDelete").serialize();addWaitingDotsToButton("DeleteBtn","DeleteModalFooter");setTimeout(function(){$("#DeleteModal").modal("hide")},2e3);$.ajax({url:"Vendors/Delete/"+n,type:"POST",data:t,success:function(n){n.success?(createMiniAlert("Ok","","","success"),vendorstable.ajax.reload(null,!1),$("#DeleteModalBodyDiv").empty()):createAlert(n.responseTitle,n.responseSummary,n.responseText);removeWaitingDotsToButton("DeleteBtn","DeleteModalFooter")}})});EditComponent=function(n){var t="/Vendors/Edit/"+n;$("#EditModalBodyDiv").load(t,function(){$("#EditModal").modal("show");$.validator.unobtrusive.parse("#formEdit");$("#countryEditSelect").select2({dropdownAutoWidth:!0,allowClear:!0});$("#countryEditSelect").select2({dropdownAutoWidth:!0,allowClear:!0})})};$("#EditModal").on("click","#EditBtn",function(){if($("#formEdit").validate(),$("#formEdit").valid()){var n=$("#EditModal #vendorId").val(),t=$("#EditModal #formEdit").serialize();addWaitingDotsToButton("EditBtn","EditModalFooter");setTimeout(function(){$("#EditModal").modal("hide")},2e3);$.ajax({url:"/Vendors/Edit/"+n,type:"POST",data:t,beforeSend:function(){},complete:function(){},success:function(n){n.success?(createMiniAlert("Ok","","","success"),vendorstable.ajax.reload(null,!1),$("#EditModalBodyDiv").empty()):createAlert(n.responseTitle,n.responseSummary,n.responseText);removeWaitingDotsToButton("EditBtn","EditModalFooter")}})}});function n(n){document.getElementById(n).reset()}}if($("#"+PageBuilderspage+pagevar).length>0){$("#"+PageBuilderspage+sidevar).addClass(activeclass);editdeleteclicked=!1;columnDefs=[{data:"marketplaceId",title:"Market Place",orderable:!1,render:function(n){return'<i class="country-select-flag '+n.toLowerCase()+'flag"><\/i>'}},{data:"imageLink",title:"Product",orderable:!1,render:function(n){return'<img src="'+n+'">'}},{data:"productName",title:"Product Name"},{data:"asin",title:"ASIN",render:function(n){return n==null?"":n}},{data:"id",title:"Edit/Delete",orderable:!1,render:function(n,t,i){return'<a href="#" onclick="Editppb('+n+",'"+i.productName+"','"+i.asin+"','"+i.marketplaceId+'\')"><div style="display:flex "><i class="zmdi zmdi-edit mdc-text-light-blue  zmdi-hc-2x"><\/i><\/a><a href="#" onclick="Deleteppb('+n+",'"+i.productName+"','"+i.asin+'\')"><i class="zmdi zmdi-delete mdc-text-light-red  zmdi-hc-2x" style="padding-left: 20px;"><\/i><\/a><\/div>'}}];function u(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){$("#catIndex").val(n);$("#f0").val(t);$("#f1").val(i);$("#f2").val(r);$("#f3").val(u);$("#f4").val(f);$("#f5").val(e);$("#f6").val(o);$("#f7").val(s);$("#f8").val(h);$("#f9").val(c);$("#f10").val(l);$("#f11").val(a);$("#t0").val(v);$("#t1").val(y);$("#t2").val(p);$("#t3").val(w);$("#t4").val(b);k!=null?$("#t5").val(k+" "+k):$("#t5").val("");$("#t6").val(d)}$(document).ready(function(){ppbtable=$("#ppbdatatable").DataTable({ajax:"/PageBuilders/GetProductsPagesList/",columns:columnDefs,responsive:!0,initComplete:function(){showOpacity("ppbdatatable","tableskeleton",ppbtable)}});$("#ppbdatatable tbody").on("click","tr",function(){if(!editdeleteclicked){var n=ppbtable.row(this).data();$.ajax({url:"PageBuilders/openPPB/?openId="+n.id,type:"POST",data:n,success:function(t){if(t.success){if(createMiniAlert("Ok",t.responseText,"","success"),t.newpb)loadEmptyform(n.id,n.productName),fillcontents();else{var i=r(t.compressed),u=pako.inflate(new Uint8Array(i),{to:"string"});loadform(u);fillcontents()}$("#savecloud").val(n.id);$("#productflaghead").prop("innerHTML",'<i class="country-select-flag '+t.marketplaceId.toLowerCase()+'flag"><\/i>');$("#productpichead").prop("innerHTML",'<img src="'+t.imageLink+'">');$("#productnamehead").text(t.title);$("#products-href").removeClass("active");$("#title-href").removeClass("hide");$("#keywords-href").removeClass("hide");$("#product-features-href").removeClass("hide");$("#product-description-href").removeClass("hide");$("#kwsuggestion-href").removeClass("hide");$("#title-href").text("Title (0)");$("#keywords-href").text("Keywords (0)");$("#product-features-href").text("Features (0)");$("#product-description-href").text("Description (0)");$("#kwsuggestion-href").text("Keywords Hint");$("#prodstats").removeClass("hide");$("#ppscore").text("Product Page Score: 0%");$("#ppscore").removeClass("hide");setTimeout(()=>{$('a[href="#title-tab"]').tab("show"),$("#title-href").addClass("active")},500);$("#addnewppb").addClass("hide");$("#products-href").addClass("hide")}else createAlert("Error","",t.responseText)}})}})});$("#addnewppb").on("click",function(){$("#AddModal").modal("show")});$("#AddBtn").on("click",function(){if($("#formCreate").validate(),$("#formCreate").valid()){var n=$("#formCreate").serialize();addWaitingDotsToButton("AddBtn","AddModalFooter");$.ajax({url:"/PageBuilders/addPPB/",type:"POST",data:n,success:function(n){n.success?(createMiniAlert("Ok",n.responseText,"","success"),setTimeout(function(){$("#AddModal").modal("hide")},2e3),ppbtable.ajax.reload(null,!1),$("#AddModal").modal("hide"),t("formCreate"),setTimeout(function(){$("#JsonResult").fadeOut()},5e3)):($("#AddModal").modal("hide"),createAlert("Error","",n.responseText));removeWaitingDotsToButton("AddBtn","AddModalFooter")}})}});Deleteppb=function(n,t,i){editdeleteclicked=!0;$("#DeleteModal").modal("show");$("#ppbproductName").text("Product Page Name: "+t+" / ASIN: "+i);$("#ppbdeleteId").text(n);$("#ppbdeleteId").val(n);setTimeout(()=>{editdeleteclicked=!1},100)};$("#DeleteBtn").on("click",function(){var n=$("#ppbdeleteId").text(),t=$("#formDelete").serialize();addWaitingDotsToButton("DeleteBtn","DeleteModalFooter");setTimeout(function(){$("#DeleteModal").modal("hide")},2e3);$.ajax({url:"/PageBuilders/DeleteConfirmed?ppbdeleteId="+n,type:"POST",data:t,success:function(n){n.success?(createMiniAlert("Ok",n.responseText,"","success"),ppbtable.ajax.reload(null,!1),$("#DeleteModal").modal("hide"),setTimeout(function(){$("#JsonResult").fadeOut()},5e3)):($("#DeleteModal").modal("hide"),createAlert("Error","",n.responseText));removeWaitingDotsToButton("DeleteBtn","DeleteModalFooter")}})});Editppb=function(n,t,i,r){editdeleteclicked=!0;$("#EditModal").modal("show");$("#ppbeditId").val(n);$("#editMarketplaceIds").val(r);$("#editproductName").val(t);(i==null||i==undefined||i=="undefined"||i=="null")&&(i="");$("#editASIN").val(i);setTimeout(()=>{editdeleteclicked=!1},100)};$("#EditBtn").on("click",function(){if($("#formEdit").validate(),$("#formEdit").valid()){var n=$("#EditModal #ppbeditId").val(),t=$("#EditModal #formEdit").serialize();addWaitingDotsToButton("EditBtn","EditModalFooter");setTimeout(function(){$("#EditModal").modal("hide")},2e3);$.ajax({url:"/PageBuilders/Edit/?ppbeditId="+n,type:"POST",data:t,success:function(n){n.success?(createMiniAlert("Ok",n.responseText,"","success"),ppbtable.ajax.reload(null,!1),$("#EditModal").modal("hide"),setTimeout(function(){$("#JsonResult").fadeOut()},5e3)):($("#EditModal").modal("hide"),createAlert("Error","",n.responseText));removeWaitingDotsToButton("EditBtn","EditModalFooter")}})}});function t(n){document.getElementById(n).reset()}$("#savecloud").on("click",function(){n()});function n(){var n;saving=!0;n=$("#savecloud").val();$("#saveallId").val(n);var r=saveform(),t=pako.gzip(r,{to:"Uint8Array"}),u=t.buffer,f=new Blob([u],{type:"application/gzip"}),e=new File([f],"pb.gzip",{type:"application/gzip"}),i=new FormData;i.append("Content",e,"pb.gzip");t.length<5e3?($("#savecloud").prop("disabled",!0),$("#savecloud").css("opacity","0.1"),createMiniAlert("Saving . . .","","","success"),$("#savecloud").css("pointer-events","none"),formchanged=!1,$("#savecloud").prop("disabled",!0),$("#savecloud").css("opacity","0.1"),createMiniAlert("Saving . . .","","","success"),$("#savecloud").css("pointer-events","none"),$.ajax({url:"/PageBuilders/saveppb/?id="+n,type:"POST",data:i,contentType:!1,processData:!1,headers:{"Content-Encoding":"gzip"},success:function(n){n.success?(formchanged=!1,createMiniAlert("Ok",n.responseText,"","success")):(createAlert("Error","",n.responseText),formchanged=!0)}})):createAlert("Error","Too Big","")}$("#closeform").on("click",function(){i()});async function i(){for(livesearchgglamz&&(clearTimeout(lstimerid),$("#livesearchgglamz").text("Live Search"),$("#kwsuggestion-progress").css("display","none"),livesearchgglamz=!1,await kwsuggestionsoutall(!1,!1,!0)),formchanged&&!saving&&n(),$('a[href="#products-tab"]').tab("show"),$("#addnewppb").removeClass("hide"),$("#products-href").removeClass("hide"),$("#products-href").addClass("active"),$("#title-href").removeClass("active"),$("#keywords-href").removeClass("active"),$("#product-features-href").removeClass("active"),$("#product-description-href").removeClass("active"),$("#kwsuggestion-href").removeClass("active"),setTimeout(()=>{$('a[href="#products-tab"]').tab("show")},500),$("#prodstats").addClass("hide"),$("#ppscore").addClass("hide"),$("#fileopensave").css("display","none"),$("#title-href").addClass("hide"),$("#keywords-href").addClass("hide"),$("#product-features-href").addClass("hide"),$("#product-description-href").addClass("hide"),$("#kwsuggestion-href").addClass("hide"),$("#jqkwsuggest-1").html(""),$("#jqgglkwsuggestlive-1").html(""),$("#jqamzkwsuggestlive-1").html(""),$("#jqkwsuggest-2").html(""),$("#jqgglkwsuggestlive-2").html(""),$("#jqamzkwsuggestlive-2").html(""),$("#jqkwsuggest-3").html(""),$("#jqgglkwsuggestlive-3").html(""),$("#jqamzkwsuggestlive-3").html(""),$("#jqkwsuggest-4").html(""),$("#jqgglkwsuggestlive-4").html(""),$("#jqamzkwsuggestlive-4").html(""),$("#jqkwsuggest-5").html(""),$("#jqgglkwsuggestlive-5").html(""),$("#jqamzkwsuggestlive-5").html(""),x=1;x<6;x++)$("#custom-href-"+x).text("Custom Keywords"),$("#gglkw-href-"+x).text("Google Keywords"),$("#amzkw-href-"+x).text("Amazon Keywords")}$("#amzggl-5, #ggl-5").on("click",function(){$("#amzggl-5").prop("checked")?($(".amzggl-5").addClass("radiobg"),$(".ggl-5").removeClass("radiobg")):($(".amzggl-5").removeClass("radiobg"),$(".ggl-5").addClass("radiobg"))});function r(n){for(var i=window.atob(n),r=new Uint8Array(i.length),t=0;t<i.length;t++)r[t]=i.charCodeAt(t);return r}}if($("#"+asinProductComponentspage+pagevar).length>0){$("#"+asinProductComponentspage+sidevar).addClass(activeclass);$(document).ready(function(){function t(t){asincomponentstable=$("#asincomponentstable").DataTable({columns:n,data:t,responsive:!0,initComplete:function(){showOpacity("asincomponentstable","tableskeleton",asincomponentstable)}})}$("#VendorAddSelect").on("change",function(){asinaddvSelect=$("#VendorAddSelect").val()});$("#VendorAddSelect").select2({dropdownParent:$("#AddModal"),dropdownAutoWidth:!0});var n=[{data:"componentName",title:"Componenet Name"},{data:"componentPrice",title:"Price"},{data:"componentQty",title:"Quantity Needed"},{data:"minQty",title:"Minimum Quantity"},{data:"vendorName",title:"Component Vendor"},{data:"componentId",title:"Edit/Delete",orderable:!1,render:function(n){return'<a href="#" onclick="EditComponent(\''+n+'\')"><div style="display:flex "><i class="zmdi zmdi-edit mdc-text-light-blue  zmdi-hc-2x"><\/i><\/a><a href="#" onclick="DeleteComponent(\''+n+'\')"><i class="zmdi zmdi-delete mdc-text-light-red  zmdi-hc-2x" style="padding-left: 20px;"><\/i><\/a><\/div>'}}];getComponentsTableData=function(n){$.ajax({url:"/ProductComponents/getasincomponent/"+$("#sellerIdASIN").val(),type:"GET",success:function(i){i.success?n?(t(i.data),asinsku=i.sku):asincomponentstable.clear().rows.add(i.data).draw():createAlert(i.responseTitle,i.responseSummary,i.responseText)}})};getComponentsTableData(!0)});AddComponent=function(){$("#AddModal").modal("show");$("#pAddsku").val(asinsku+"-");$("#ComponentQty").val("1")};$("#AddBtn").on("click",function(){if($("#formCreate").validate(),$("#formCreate").valid()){addWaitingDotsToButton("AddBtn","AddModalFooter");setTimeout(function(){$("#AddModal").modal("hide")},2e3);var t=$("#formCreate").serialize();$.ajax({url:"/ProductComponents/Create/",type:"POST",data:t,success:function(t){t.success?(createMiniAlert("Ok","","","success"),getComponentsTableData(!1),$("#AddModal").modal("hide"),n("formCreate")):createAlert(t.responseTitle,t.responseSummary,t.responseText);removeWaitingDotsToButton("AddBtn","AddModalFooter")}})}});DeleteComponent=function(n){var t="/ProductComponents/Delete/"+n;$("#DeleteModalBodyDiv").load(t,function(){$("#DeleteModal").modal("show")})};$("#DeleteModal").on("click","#DeleteBtn",function(){var n=$("#DeleteModal #componentId").val(),t=$("#DeleteModal #formDelete").serialize(),i;addWaitingDotsToButton("DeleteBtn","DeleteModalFooter");setTimeout(function(){$("#DeleteModal").modal("hide")},2e3);i=0;$.ajax({url:"/ProductComponents/Delete/"+n,type:"POST",data:t,beforeSend:function(){},complete:function(){},success:function(n){n.success?(getComponentsTableData(!1),$("#DeleteModal").modal("hide"),$("#DeleteModalBodyDiv").empty(),createMiniAlert("Ok","","","success")):createAlert(n.responseTitle,n.responseSummary,n.responseText);removeWaitingDotsToButton("DeleteBtn","DeleteModalFooter")}})});EditComponent=function(n){var t="/ProductComponents/EditComponent/"+n;$("#EditModalBodyDiv").load(t,function(){$("#EditModal").modal("show");$.validator.unobtrusive.parse("#formEdit");$("#ProductEditSelect").hide();$("#VendorEditSelect").select2({dropdownParent:$("#EditModal"),dropdownAutoWidth:!0});$("#pEditmarketflag1").hide();$("#pEditImg").hide();$("#asinId").addClass("visually-hidden")})};$("#EditModal").on("click","#EditBtn",function(){var n,t,i;$("#formEdit").validate();$("#formEdit").valid()&&(n=$("#EditModal #componentId").val(),t=$("#EditModal #formEdit").serialize(),addWaitingDotsToButton("EditBtn","EditModalFooter"),setTimeout(function(){$("#EditModal").modal("hide")},2e3),i=0,$.ajax({url:"/ProductComponents/Edit/"+n,type:"POST",data:t,beforeSend:function(){},complete:function(){},success:function(n){n.success?(getComponentsTableData(!1),$("#EditModal").modal("hide"),$("#EditModalBodyDiv").empty(),createMiniAlert("Ok","","","success")):createAlert(n.responseTitle,n.responseSummary,n.responseText);removeWaitingDotsToButton("EditBtn","EditModalFooter")}}))});function n(n){document.getElementById(n).reset()}}